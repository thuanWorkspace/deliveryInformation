/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","./index","./dom","./action-group","./action-menu"],(function(e,t,o,n,i){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
   * v1.9.2
   */const c=150,l=2,r=e=>e.reduce(((e,t)=>e+t),0)/e.length,a=e=>{const t=e.filter((e=>e.slot!==n.SLOTS.menuActions)),o=t?.length;return{actionWidth:o?r(t.map((e=>e.clientWidth||0))):0,actionHeight:o?r(t.map((e=>e.clientHeight||0))):0}},s=({width:e,actionWidth:t,layout:o,height:n,actionHeight:i,groupCount:c})=>{const r="horizontal"===o?e:n,a="horizontal"===o?t:i;return Math.floor((r-c*l)/a)},h=({layout:e,actionCount:t,actionWidth:o,width:n,actionHeight:i,height:c,groupCount:l})=>Math.max(t-s({width:n,actionWidth:o,layout:e,height:c,actionHeight:i,groupCount:l}),0),u=e=>Array.from(e.querySelectorAll("calcite-action")).filter((e=>!e.closest("calcite-action-menu")||e.slot===i.SLOTS.trigger)),d=({actionGroups:e,expanded:o,overflowCount:i})=>{let c=i;e.reverse().forEach((e=>{let i=0;const l=u(e).reverse();l.forEach((e=>{e.slot===n.SLOTS.menuActions&&(e.removeAttribute("slot"),e.textEnabled=o)})),c>0&&l.some((e=>(l.filter((e=>!e.slot)).length>1&&l.length>2&&!e.closest("calcite-action-menu")&&(e.textEnabled=!0,e.setAttribute("slot",n.SLOTS.menuActions),i++,i>1&&c--),c<1))),t.forceUpdate(e)}))},g={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function f(e,t){return e||t.closest("calcite-shell-panel")?.position||"start"}function p({el:e,expanded:t}){u(e).filter((e=>e.slot!==n.SLOTS.menuActions)).forEach((e=>e.textEnabled=t)),e.querySelectorAll("calcite-action-group, calcite-action-menu").forEach((e=>e.expanded=t))}const m=({tooltip:e,referenceElement:t,expanded:o,ref:n})=>(e&&(e.referenceElement=!o&&t?t:null),n&&n(t),t),x=({expanded:e,expandText:n,collapseText:i,toggle:c,el:l,position:r,tooltip:a,ref:s,scale:h})=>{const u="rtl"===o.getElementDir(l),d=e?i:n,p=[g.chevronsLeft,g.chevronsRight];u&&p.reverse();const x="end"===f(r,l),v=x?p[1]:p[0],A=x?p[0]:p[1];return t.h("calcite-action",{icon:e?v:A,onClick:c,scale:h,text:d,textEnabled:e,title:e||a?null:d,ref:t=>m({tooltip:a,referenceElement:t,expanded:e,ref:s})})};e.ExpandToggle=x,e.geActionDimensions=a,e.getOverflowCount=h,e.overflowActions=d,e.overflowActionsDebounceInMs=c,e.queryActions=u,e.toggleChildActionText=p}));
