/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","./dom"],(function(e,t){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
   * v1.9.2
   */const n="calciteInternalLabelClick",l="calciteInternalLabelConnected",s="calciteInternalLabelDisconnected",o="calcite-label",a=new WeakMap,c=new WeakMap,i=new WeakMap,r=new WeakMap,d=new WeakSet,u=e=>{const{id:n}=e,l=n&&t.queryElementRoots(e,{selector:`${o}[for="${n}"]`});if(l)return l;const s=t.closestElementCrossShadowBoundary(e,o);return!s||b(s,e)?null:s};function b(e,t){let n;const l="custom-element-ancestor-check",s=l=>{l.stopImmediatePropagation();const s=l.composedPath();n=s.slice(s.indexOf(t),s.indexOf(e))};e.addEventListener(l,s,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,s);return n.filter((n=>n!==t&&n!==e)).filter((e=>e.tagName?.includes("-"))).length>0}function E(e){const t=u(e.el);if(c.has(t)&&t===e.labelEl||!t&&d.has(e))return;const o=g.bind(e);if(t){e.labelEl=t;const u=a.get(t)||[];u.push(e),a.set(t,u.sort(f)),c.has(e.labelEl)||(c.set(e.labelEl,h),e.labelEl.addEventListener(n,h)),d.delete(e),document.removeEventListener(l,i.get(e)),r.set(e,o),document.addEventListener(s,o)}else d.has(e)||(o(),document.removeEventListener(s,r.get(e)))}function m(e){if(d.delete(e),document.removeEventListener(l,i.get(e)),document.removeEventListener(s,r.get(e)),i.delete(e),r.delete(e),!e.labelEl)return;const t=a.get(e.labelEl);1===t.length&&(e.labelEl.removeEventListener(n,c.get(e.labelEl)),c.delete(e.labelEl)),a.set(e.labelEl,t.filter((t=>t!==e)).sort(f)),e.labelEl=null}function f(e,n){return t.isBefore(e.el,n.el)?-1:1}function v(e){return e.label||e.labelEl?.textContent?.trim()||""}function h(e){const t=e.detail.sourceEvent.target,n=a.get(this),l=n.find((e=>e.el===t));if(n.includes(l))return;const s=n[0];s.disabled||s.onLabelClick(e)}function L(){d.has(this)&&E(this)}function g(){d.add(this);const e=i.get(this)||L.bind(this);i.set(this,e),document.addEventListener(l,e)}e.connectLabel=E,e.disconnectLabel=m,e.getLabelText=v,e.labelConnectedEvent=l,e.labelDisconnectedEvent=s}));
