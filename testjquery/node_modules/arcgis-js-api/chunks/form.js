/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","./dom","./index"],(function(e,t,n){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
   * v1.9.2
   */!function(e){function t(e,t){e instanceof HTMLElement||n(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==e.type||n(TypeError,"The specified element is not a submit button"),e.form==t||n(DOMException,"The specified element is not owned by this form element","NotFoundError")}function n(e,t,n){throw new e("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+t+".",n)}"function"!=typeof e.requestSubmit&&(e.requestSubmit=function(e){e?(t(e,this),e.click()):((e=document.createElement("input")).type="submit",e.hidden=!0,this.appendChild(e),e.click(),this.removeChild(e))})}(HTMLFormElement.prototype);const o="hidden-form-input";function r(e){return"checked"in e}const i=new WeakMap,c=new WeakSet;function u(e,n){if(t.closestElementCrossShadowBoundary(n.parentElement,"[form]"))return!0;const o="calciteInternalFormComponentRegister";let r=!1;return e.addEventListener(o,(e=>{r=e.composedPath().some((e=>c.has(e))),e.stopPropagation()}),{once:!0}),n.dispatchEvent(new CustomEvent(o,{bubbles:!0,composed:!0})),r}function s(e){const{formEl:t}=e;return!!t&&(t.requestSubmit(),!0)}function a(e){e.formEl?.reset()}function d(e){const{el:t,value:n}=e,o=l(e);if(!o||u(o,t))return;e.formEl=o,e.defaultValue=n,r(e)&&(e.defaultChecked=e.checked);const s=(e.onFormReset||m).bind(e);o.addEventListener("reset",s),i.set(e.el,s),c.add(t)}function l(e){const{el:n,form:o}=e;return o?t.queryElementRoots(n,{id:o}):t.closestElementCrossShadowBoundary(n,"form")}function m(){r(this)?this.checked=this.defaultChecked:this.value=this.defaultValue}function f(e){const{el:t,formEl:n}=e;if(!n)return;const o=i.get(t);n.removeEventListener("reset",o),i.delete(t),e.formEl=null,c.delete(t)}function h(e,t){e.defaultValue=t}const p=e=>{e.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))},E=e=>e.removeEventListener("change",p);function b(e){const{el:t,formEl:n,name:r,value:i}=e,{ownerDocument:c}=t,u=t.querySelectorAll(`input[slot="${o}"]`);if(!n||!r)return void u.forEach((e=>{E(e),e.remove()}));const s=Array.isArray(i)?i:[i],a=[],d=new Set;let l;u.forEach((t=>{const n=s.find((e=>e==t.value));null!=n?(d.add(n),v(e,t,n)):a.push(t)})),s.forEach((t=>{if(d.has(t))return;let n=a.pop();n||(n=c.createElement("input"),n.slot=o),l||(l=c.createDocumentFragment()),l.append(n),n.addEventListener("change",p),v(e,n,t)})),l&&t.append(l),a.forEach((e=>{E(e),e.remove()}))}function v(e,t,n){const{defaultValue:o,disabled:i,form:c,name:u,required:s}=e;t.defaultValue=o,t.disabled=i,t.name=u,t.required=s,t.tabIndex=-1,c?t.setAttribute("form",c):t.removeAttribute("form"),r(e)?(t.checked=e.checked,t.defaultChecked=e.defaultChecked,t.value=e.checked?n||"on":""):t.value=n||"",e.syncHiddenFormInput?.(t)}const y=({component:e})=>(b(e),n.h("slot",{name:o}));e.HiddenFormInputSlot=y,e.afterConnectDefaultValueSet=h,e.connectForm=d,e.disconnectForm=f,e.findAssociatedForm=l,e.resetForm=a,e.submitForm=s}));
