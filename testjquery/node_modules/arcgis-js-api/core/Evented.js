/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../chunks/tslib.es6","./Accessor","./handleUtils","./accessorSupport/decorators/subclass"],(function(e,t,s,r){"use strict";class n{constructor(){this._emitter=new n.EventEmitter(this)}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}}!function(i){class o{constructor(e=null){this._target=e,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(e,t){let s=this._listenersMap?.get(e);if(!s)return!1;const r=this._target||this;let n=!1;for(const i of s.slice()){const e="deref"in i?i.deref():i;e?e?.call(r,t):n=!0}return n&&(s=s.filter((e=>!("deref"in e)||null!=e.deref())),this._listenersMap.set(e,s)),s.length>0}on(e,t){if(Array.isArray(e)){const r=e.map((e=>this.on(e,t)));return s.handlesGroup(r)}if(e.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??(this._listenersMap=new Map);const r=this._listenersMap.get(e)||[];return r.push(t),this._listenersMap.set(e,r),s.makeHandle((()=>{const s=this._listenersMap?.get(e),r=s?.indexOf(t)??-1;r>=0&&s.splice(r,1)}))}once(e,t){const s=this.on(e,(e=>{s.remove();const r="deref"in t?t.deref():t;r?.call(null,e)}));return s}hasEventListener(e){const t=this._listenersMap?.get(e);return null!=t&&t.length>0}}i.EventEmitter=o,i.EventedMixin=t=>{let s=class extends t{constructor(){super(...arguments),this._emitter=new o}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};return s=e.__decorate([r.subclass("esri.core.Evented")],s),s};let c=class extends t{constructor(){super(...arguments),this._emitter=new n.EventEmitter(this)}destroy(){this._emitter.clear()}emit(e,t){return this._emitter.emit(e,t)}on(e,t){return this._emitter.on(e,t)}once(e,t){return this._emitter.once(e,t)}hasEventListener(e){return this._emitter.hasEventListener(e)}};c=e.__decorate([r.subclass("esri.core.Evented")],c),i.EventedAccessor=c}(n||(n={}));return n}));
