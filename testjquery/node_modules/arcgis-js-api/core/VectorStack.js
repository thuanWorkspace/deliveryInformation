/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","./ByteSizeUnit","./nextTick","../chunks/mat3f64","../chunks/mat4f64","../chunks/quatf64","../chunks/vec2f64","../chunks/vec3f64","../chunks/vec4f64"],(function(e,t,i,s,r,f,h,c,n){"use strict";class u{constructor(e,t,i){this._itemByteSize=e,this._itemCreate=t,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(i/this._itemByteSize)}get(){0===this._itemsPtr&&i.nextTick((()=>this._reset()));const e=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=e;){const e=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let t=0;t<this._itemsPerBuffer;++t)this._items.push(this._itemCreate(e,t*this._itemByteSize));this._buffers.push(e)}return this._items[this._itemsPtr++]}_reset(){const e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(e=a){return new u(16,h.createView,e)}static createVec3f64(e=a){return new u(24,c.createView,e)}static createVec4f64(e=a){return new u(32,n.createView,e)}static createMat3f64(e=a){return new u(72,s.createView,e)}static createMat4f64(e=a){return new u(128,r.createView,e)}static createQuatf64(e=a){return new u(32,f.createView,e)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const a=4*t.ByteSizeUnit.KILOBYTES;e.VectorStack=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
