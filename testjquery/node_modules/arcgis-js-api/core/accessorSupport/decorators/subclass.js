/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../has","../beforeDestroy","../interfaces","../metadata","../tracking","../extensions/serializableProperty"],(function(e,t,r,s,o,i,n){"use strict";const a=new Set,c=new Set;function l(e){return t=>{e??(e="esri.core.Accessor"),t.prototype.declaredClass=e,f(t);const s=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!a.has(n.initialize)&&(a.add(n.initialize),s.push(n.initialize)),n.hasOwnProperty("destroy")&&!c.has(n.destroy)&&(c.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);a.clear(),c.clear();const l=class extends t{constructor(...e){if(super(...e),this.constructor===l&&"function"==typeof this.postscript){if(s.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let e=s.length-1;e>=0;e--)s[e].call(this)}}),i.length){let e=!1;const t=this[r.beforeDestroySymbol];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!e){e=!0,t.call(this);for(let e=0;e<i.length;e++)i[e].call(this)}}})}this.postscript(...e)}}};l.__accessorMetadata__=o.getPropertiesMetadata(t.prototype),l.prototype.declaredClass=e;const p=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(l,"name",{value:p,configurable:!0}),l}}function p(e,t){return null==t.get?function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0===r)return;i.trackAccess(r);const s=t.store;return s.has(e)?s.get(e):r.metadata.value}:function(){const t=this.__accessor__,r=t.propertiesByName.get(e);if(void 0!==r)return r.getComputed(t)}}function f(e){const t=e.prototype,r=o.getPropertiesMetadata(t),i={};for(const o of Object.getOwnPropertyNames(r)){const e=r[o];n.processPrototypePropertyMetadata(e),i[o]={enumerable:!0,configurable:!0,get:p(o,e),set(t){const r=this.__accessor__;if(void 0!==r){if(!Object.isFrozen(this)){if(r.initialized&&e.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${o}' of ${this.declaredClass}`);if(r.lifecycle===s.Lifecycle.CONSTRUCTED&&e.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${o}' of ${this.declaredClass}`);r.set(o,t)}}else Object.defineProperty(this,o,{enumerable:!0,configurable:!0,writable:!0,value:t})}}}Object.defineProperties(e.prototype,i)}e.finalizeClass=f,e.subclass=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
