/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports"],(function(e){"use strict";class t{constructor(e){this._accessed=[],this._handles=[],this._observerObject=new s(e),i.register(this,new WeakRef(this._observerObject),this)}destroy(){i.unregister(this._observerObject),this._accessed.length=0,this._observerObject?.destroy(),this.clear()}onObservableAccessed(e){const t=this._accessed;t.includes(e)||t.push(e)}onTrackingEnd(){const e=this._handles,t=this._accessed,s=this._observerObject;for(let i=0;i<t.length;++i)e.push(t[i].observe(s));t.length=0}clear(){const e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}class s{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(1===e)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=n}}const i=new FinalizationRegistry((e=>{e.deref()?.destroy()}));function n(){}e.SimpleTrackingTarget=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
