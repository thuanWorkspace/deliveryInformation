/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../chunks/tslib.es6","../Collection","../collectionUtils","../has","../Logger","../accessorSupport/decorators/property","../accessorSupport/ensureType","../arrayUtils","../accessorSupport/decorators/subclass"],(function(e,t,o,s,r,n,i,l,c,a){"use strict";function p(e,t){return{type:e,cast:s.castForReferenceSetter,set(o){const r=s.referenceSetter(o,this._get(t),e);r.owner=this,this._set(t,r)}}}e.OwningCollection=class extends o{constructor(e){super(e),this.addHandles([this.on("before-add",(e=>{null==e.item&&e.preventDefault()})),this.on("after-add",(e=>this._own(e.item))),this.on("after-remove",(e=>this._release(e.item)))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(o.ofType(this.itemType.Type))(e):new o(e)}},t.__decorate([i.property()],e.OwningCollection.prototype,"owner",null),e.OwningCollection=t.__decorate([a.subclass("esri.core.support.OwningCollection")],e.OwningCollection),e.owningCollectionProperty=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
