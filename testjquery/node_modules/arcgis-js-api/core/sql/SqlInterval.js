/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../arcade/featureset/support/errorsupport"],(function(e,r){"use strict";class t{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(e){if(null!==e.precision||null!==e.secondary)throw new r.SqlError(r.SqlErrorCodes.PrimarySecondaryQualifiers)}static _parseSecondsComponent(e,r){if(r.includes(".")){const t=r.split(".");e.second=parseFloat(t[0]),e.millis=parseInt(t[1],10)}else e.second=parseFloat(r)}static createFromMilliseconds(e){const r=new t;return r.second=e/1e3,r}static createFromValueAndQualifer(e,o,l){let s=null;const a=new t;if(a.op="-"===l?"-":"+","interval-period"===o.type){t._fixDefaults(o);const l=new RegExp("^[0-9]{1,}$");if("year"===o.period||"month"===o.period)throw new r.SqlError(r.SqlErrorCodes.YearMonthIntervals);if("second"===o.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);t._parseSecondsComponent(a,e)}else{if(!l.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);a[o.period]=parseFloat(e)}}else{if(t._fixDefaults(o.start),t._fixDefaults(o.end),"year"===o.start.period||"month"===o.start.period||"year"===o.end.period||"month"===o.end.period)throw new r.SqlError(r.SqlErrorCodes.YearMonthIntervals);switch(o.start.period){case"day":switch(o.end.period){case"hour":if(s=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!s.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);a[o.start.period]=parseFloat(e.split(" ")[0]),a[o.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!s.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);{a[o.start.period]=parseFloat(e.split(" ")[0]);const r=e.split(" ")[1].split(":");a.hour=parseFloat(r[0]),a.minute=parseFloat(r[1])}break;case"second":if(s=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);{a[o.start.period]=parseFloat(e.split(" ")[0]);const r=e.split(" ")[1].split(":");a.hour=parseFloat(r[0]),a.minute=parseFloat(r[1]),t._parseSecondsComponent(a,r[2])}break;default:throw new r.SqlError(r.SqlErrorCodes.IllegalInterval)}break;case"hour":switch(o.end.period){case"minute":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!s.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);a.hour=parseFloat(e.split(":")[0]),a.minute=parseFloat(e.split(":")[1]);break;case"second":if(s=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);{const r=e.split(":");a.hour=parseFloat(r[0]),a.minute=parseFloat(r[1]),t._parseSecondsComponent(a,r[2])}break;default:throw new r.SqlError(r.SqlErrorCodes.IllegalInterval)}break;case"minute":if("second"!==o.end.period)throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);if(s=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!s.test(e))throw new r.SqlError(r.SqlErrorCodes.IllegalInterval);{const r=e.split(":");a.minute=parseFloat(r[0]),t._parseSecondsComponent(a,r[1])}break;default:throw new r.SqlError(r.SqlErrorCodes.IllegalInterval)}}return a}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}e.SqlInterval=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
