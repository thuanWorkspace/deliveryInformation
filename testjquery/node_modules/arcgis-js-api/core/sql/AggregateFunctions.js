/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../arcade/featureset/support/errorsupport","./DateOnly","./SqlTimestampOffset","./TimeOnly","../../chunks/datetime"],(function(n,e,r,l,t,a){"use strict";function u(n,r){const l=i[n.toLowerCase()];if(null==l)throw new e.SqlError(e.SqlErrorCodes.FunctionNotRecognized);if(r.length<l.minParams||r.length>l.maxParams)throw new e.SqlError(e.SqlErrorCodes.InvalidParameterCount,{name:n.toUpperCase()});return l.evaluate(r)}function o(n,e){const r=i[n.toLowerCase()];return null!=r&&e>=r.minParams&&e<=r.maxParams}const i={min:{minParams:1,maxParams:1,evaluate:n=>f(n[0],"min")},max:{minParams:1,maxParams:1,evaluate:n=>f(n[0],"max")},avg:{minParams:1,maxParams:1,evaluate:n=>m(n[0])},sum:{minParams:1,maxParams:1,evaluate:n=>c(n[0])},stddev:{minParams:1,maxParams:1,evaluate:n=>g(n[0])},count:{minParams:1,maxParams:1,evaluate:n=>null==n[0]?null:n[0].length},var:{minParams:1,maxParams:1,evaluate:n=>P(n[0])}};function m(n){if(null===n)return null;let r=0,l=0;for(let t=0;t<n.length;t++){const a=n[t];if(null!==a){if(!s(a))throw new e.SqlError(e.SqlErrorCodes.InvalidValueForAggregateFunction);l++,r+=a}}return 0===l?null:r/n.length}function s(n){return"number"==typeof n}function f(n,e){if(null===n)return null;let u=null,o=null;for(const i of n){let n=i;n=i instanceof r.DateOnly||i instanceof t.TimeOnly?i.toNumber():i instanceof a.DateTime?i.toMillis():i instanceof l.SqlTimeStampOffset?i.toMilliseconds():i,(null===u||"max"===e&&null!==o&&null!==n&&o<=n||"min"===e&&null!==o&&null!==n&&o>=n)&&(u=i,o=n)}return u}function c(n){if(null===n)return null;let r=0;for(let l=0;l<n.length;l++){const t=n[l];if(null!==t){if(!s(t))throw new e.SqlError(e.SqlErrorCodes.InvalidValueForAggregateFunction);r+=t}}return r}function g(n){if(null===n)return null;const e=P(n);return null===e?null:Math.sqrt(e)}function P(n){if(null===n)return null;if(0===(n=n.filter((n=>null!==n))).length)return null;const r=m(n);if(null===r)return null;let l=0;for(const t of n){if(!s(t))throw new e.SqlError(e.SqlErrorCodes.InvalidValueForAggregateFunction);l+=(r-t)**2}return l/(n.length-1)}n.aggregateFunction=u,n.isAggregate=o,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
