/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../chunks/tslib.es6","../analysis/DimensionAnalysis","../analysis/DimensionSimpleStyle","../analysis/LengthDimension","../core/Collection","../core/MultiOriginJSONSupport","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Layer","./mixins/OperationalLayer"],(function(e,t,r,s,o,i,n,a,p,l,c,y,u,d,h){"use strict";let m=class extends(h.OperationalLayer(i.MultiOriginJSONMixin(d))){constructor(e){if(super(e),this.type="dimension",this.operationalLayerType="ArcGISDimensionLayer",this.source=new t,this.opacity=1,e){const{source:t,style:r}=e;t&&r&&(t.style=r)}}initialize(){this.addHandles([n.watch((()=>this.source),((e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)}),n.syncAndInitial)])}async load(){return this.addResolvingPromise(this.source.waitComputeExtent()),this}get spatialReference(){return this.source.spatialReference}get style(){return this.source.style}set style(e){this.source.style=e}get fullExtent(){return this.source.extent}releaseAnalysis(e){this.source===e&&(this.source=new t)}get analysis(){return this.source}set analysis(e){this.source=e}get dimensions(){return this.source.dimensions}set dimensions(e){this.source.dimensions=e}writeDimensions(e,t,r,s){t.dimensions=e.filter((({startPoint:e,endPoint:t})=>null!=e&&null!=t)).map((e=>e.toJSON(s))).toJSON()}};e.__decorate([a.property({json:{read:!1},readOnly:!0})],m.prototype,"type",void 0),e.__decorate([a.property({type:["ArcGISDimensionLayer"]})],m.prototype,"operationalLayerType",void 0),e.__decorate([a.property({nonNullable:!0})],m.prototype,"source",void 0),e.__decorate([a.property({readOnly:!0})],m.prototype,"spatialReference",null),e.__decorate([a.property({types:{key:"type",base:null,typeMap:{simple:r}},json:{write:{ignoreOrigin:!0}}})],m.prototype,"style",null),e.__decorate([a.property({readOnly:!0})],m.prototype,"fullExtent",null),e.__decorate([a.property({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],m.prototype,"opacity",void 0),e.__decorate([a.property({type:["show","hide"]})],m.prototype,"listMode",void 0),e.__decorate([a.property({type:o.ofType(s),json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{ignoreOrigin:!0}}}}})],m.prototype,"dimensions",null),e.__decorate([u.writer("web-scene","dimensions")],m.prototype,"writeDimensions",null),m=e.__decorate([y.subclass("esri.layers.DimensionLayer")],m);return m}));
