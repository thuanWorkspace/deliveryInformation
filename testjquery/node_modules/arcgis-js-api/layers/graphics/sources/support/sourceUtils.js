/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../../core/date","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],(function(e,t,i,n,r){"use strict";class s{constructor(){this.code=null,this.description=null}}class o{constructor(e){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function l(e){return new o(e)}class u{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function a(e){return new u(e)}const c=new Set;function d(e,t,i,n=!1){c.clear();for(const s in i){const o=e.get(s);if(!o)continue;const u=g(o,i[s]);if(c.add(o.name),o&&(n||o.editable)){const e=r.validateFieldValue(o,u);if(e)return l(r.validationErrorToString(e,o,u));t[o.name]=u}}for(const r of e?.requiredFields??[])if(!c.has(r.name))return l(`missing required field "${r.name}"`);return null}function f(e,t){if(e?.length)for(const{name:n}of e)"string"==typeof t[n]&&(t[n]=i.parseDate(t[n]))}function g(e,t){let n=t;return r.isNumericField(e)&&"string"==typeof t?n=parseFloat(t):r.isStringField(e)&&null!=t&&"string"!=typeof t?n=String(t):r.isDateField(e)&&"string"==typeof t&&(n=i.parseDate(t)),r.sanitizeNullFieldValue(n)}let p;function y(e,t){if(!e||!n.isValid(t))return e;if("rings"in e||"paths"in e){if(null==p)throw new TypeError("geometry engine not loaded");return p.simplify(t,e)}return e}async function m(){return null==p&&(p=await new Promise(((t,i)=>e(["../../../../geometry/geometryEngineJSON"],t,i)))),p}async function h(e,t){!n.isValid(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await m()}t.createFeatureEditErrorResult=l,t.createFeatureEditSuccessResult=a,t.loadGeometryEngineForSimplify=h,t.mixAttributes=d,t.parseStringDateFieldValues=f,t.simplify=y,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
