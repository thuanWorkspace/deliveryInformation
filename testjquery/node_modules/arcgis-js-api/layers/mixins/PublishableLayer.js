/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","../support/PublishingInfo"],(function(e,t,s,r,o,i,n,a){"use strict";const u="esri.layers.mixins.PublishableLayer",c=Symbol(u);function l(e){return null!=e&&"object"==typeof e&&c in e}const h=e=>{var r;let o=class extends e{constructor(){super(...arguments),this[r]=!0}get publishingInfo(){if(this.destroyed)return null;const e=this._get("publishingInfo");if(e)return e;const t=new a;return this._checkPublishingStatus(t),t}_checkPublishingStatus(e){const t=250,s=125;let r=0;const o=async t=>{let n;e.updating=!0;try{n=await this.fetchPublishingStatus()}catch(a){n="unavailable"}"published"!==n&&"unavailable"!==n||("publishing"===e.status&&this.refresh(),i.remove()),e.status=n,e.updating=!1,i.removed||(r=setTimeout(o,t,t+s))},i={removed:!1,remove(){this.removed=!0,clearTimeout(r)}};this.when().catch((()=>i.remove())),o(t),this.addHandles(i)}};return r=c,t.__decorate([s.property({readOnly:!0,clonable:!1})],o.prototype,"publishingInfo",null),o=t.__decorate([n.subclass(u)],o),o};e.PublishableLayer=h,e.isPublishableLayer=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
