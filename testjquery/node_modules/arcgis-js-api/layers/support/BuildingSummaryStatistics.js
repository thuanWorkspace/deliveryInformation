/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../request","../../core/JSONSupport","../../core/Loadable","../../core/Logger","../../core/Promise","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass"],(function(e,r,t,o,s,i,l,a,p,u,n){"use strict";let c=class extends t.JSONSupport{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};e.__decorate([l.property({type:String})],c.prototype,"fieldName",void 0),e.__decorate([l.property({type:String})],c.prototype,"modelName",void 0),e.__decorate([l.property({type:String})],c.prototype,"label",void 0),e.__decorate([l.property({type:Number})],c.prototype,"min",void 0),e.__decorate([l.property({type:Number})],c.prototype,"max",void 0),e.__decorate([l.property({json:{read:e=>Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"number"==typeof e)))?e.slice():null}})],c.prototype,"mostFrequentValues",void 0),e.__decorate([l.property({type:[Number]})],c.prototype,"subLayerIds",void 0),c=e.__decorate([n.subclass("esri.layers.support.BuildingFieldStatistics")],c);let d=class extends(o.LoadableMixin(i.EsriPromiseMixin(t.JSONSupport))){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(s.getLogger(this).error("building summary statistics are not loaded"),null)}load(e){const r=null!=e?e.signal:null;return this.addResolvingPromise(this._fetchService(r)),Promise.resolve(this)}async _fetchService(e){const t=(await r(this.url,{query:{f:"json"},responseType:"json",signal:e})).data;this.read(t,{origin:"service"})}};e.__decorate([l.property({constructOnly:!0,type:String})],d.prototype,"url",void 0),e.__decorate([l.property({readOnly:!0,type:[c],json:{read:{source:"summary"}}})],d.prototype,"fields",null),d=e.__decorate([n.subclass("esri.layers.support.BuildingSummaryStatistics")],d);return d}));
