/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../colorUtils","../../rasterFunctionConstants","./utils","../../../../renderers/support/colorRampUtils"],(function(t,a,e,n,r){"use strict";function o(t){return"colormap"in t?s(t):"colorRamp"in t?i(t):u(t)}function s(t){const e=t.colormap.map((t=>{if("value"in t){const e="string"==typeof t.color?a.getNamedColor(t.color)??a.hex2rgba(t.color):t.color;(t=[t.value,...e])[4]&&t[4]<=1&&(t[4]=Math.round(255*t[4]))}return t})),{raster:r,outputPixelType:o}=t,s={colormap:e,raster:r};return n.createRasterFunction("Colormap",s,o)}function i(t){const{raster:a,colorRamp:e,outputPixelType:r}=t,o={colorRamp:"toJSON"in e?e.toJSON():e,raster:a};return n.createRasterFunction("Colormap",o,r)}function u(t){const{colorRampName:a}=t,o=Object.values(e.colormapName).find((t=>t.toLowerCase()===a?.toLowerCase())),s=r.colorRampDict.toJSON(a),{raster:i,outputPixelType:u="unknown"}=t,c=o?{colormapName:o,raster:i}:{colorRampName:s,raster:i};return n.createRasterFunction("Colormap",c,u)}function c(t){const{raster:a,histograms:e,outputPixelType:r}=t,o=t.statistics?.map((t=>({min:t.min,max:t.max,mean:t.avg,standardDeviation:t.stddev})));return n.createRasterFunction("StatisticsHistograms",{raster:a,statistics:o,histograms:e},r)}function l(t){const{raster:a,attributeTable:e,outputPixelType:r="unknown"}=t,o="toJSON"in e?e.toJSON():e;return n.createRasterFunction("Table",{raster:a,attributeTableAsRecordSet:o},r)}function p(t){const{raster:a,outputPixelType:e="unknown"}=t,r={raster:a,missingBandAction:"fail"===t.missingBandAction?1:0};return"bandIds"in t?r.bandIds=t.bandIds:"bandNames"in t?r.bandNames=t.bandNames:"bandWavelengths"in t&&(r.bandWavelengths=t.bandWavelengths),n.createRasterFunction("ExtractBand",r,e)}function m(t){const{rasters:a,outputPixelType:e}=t;return n.createRasterFunction("CompositeBand",{rasters:a},e)}function d(t){const{allowUnmatched:a,raster:e,rangeMaps:r,outputPixelType:o}=t,s=r?.filter((({output:t})=>null!=t)),i=s?.flatMap((({range:t})=>t)),u=s?.map((({output:t})=>t)),c=r?.filter((t=>null==t.output))?.flatMap((({range:t})=>t)),l={allowUnmatched:a,raster:e,inputRanges:i,outputValues:u,noDataRanges:c};return n.createRasterFunction("Remap",l,o)}function f(t){const{raster:a,outputPixelType:e="unknown"}=t,r=t.includedRanges?.flatMap((t=>t)),o=t.noDataValues?.map((t=>t.join(" "))),s={raster:a,includedRanges:r,noDataInterpretation:"match-all"===t.noDataInterpretation?1:0,noDataValues:o};return n.createRasterFunction("Mask",s,e)}t.colormap=o,t.compositeBands=m,t.extractBand=p,t.mask=f,t.remap=d,t.statisticsHistogram=c,t.table=l,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
