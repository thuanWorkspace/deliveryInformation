/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","./BaseRasterFunction","./ColormapFunctionArguments","./colormaps","../../../renderers/support/colorRampUtils"],(function(o,r,e,t,s,p,n,c,a,u){"use strict";let i=class extends n{constructor(){super(...arguments),this.functionName="Colormap",this.functionArguments=null,this.rasterArgumentNames=["raster"],this.isNoopProcess=!0}_bindSourceRasters(){const o=this.sourceRasterInfos[0];if(o.bandCount>1)return{success:!1,supportsGPU:!1,error:"colormap-function: source data must be single band"};let{colormap:r,colormapName:e,colorRamp:t,colorRampName:s}=this.functionArguments;if(!r?.length)if(t)r=u.convertColorRampToColormap(t,{interpolateAlpha:!0});else if(s){const o=u.getColorRampJSON(s);o&&(r=u.convertColorRampToColormap(o))}else e&&(r=a.getColormapByName(e));if(!r?.length)return{success:!1,supportsGPU:!1,error:"colormap-function: missing colormap argument"};this.outputPixelType=this._getOutputPixelType("u8");const p=o.clone();return p.pixelType=this.outputPixelType,p.colormap=r,p.bandCount=1,this.rasterInfo=p,{success:!0,supportsGPU:!0}}_processPixels(o){return o.pixelBlocks?.[0]}};o.__decorate([r.property({json:{write:!0,name:"rasterFunction"}})],i.prototype,"functionName",void 0),o.__decorate([r.property({type:c,json:{write:!0,name:"rasterFunctionArguments"}})],i.prototype,"functionArguments",void 0),o.__decorate([r.property()],i.prototype,"rasterArgumentNames",void 0),o.__decorate([r.property()],i.prototype,"isNoopProcess",void 0),o.__decorate([r.property({json:{write:!0}})],i.prototype,"indexedColormap",void 0),i=o.__decorate([p.subclass("esri.layers.support.rasterFunctions.ColormapFunction")],i);return i}));
