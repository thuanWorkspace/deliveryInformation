/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../widgets/support/dataUtils","../../widgets/support/dateUtils"],(function(e,n,i){"use strict";var l;e.DomainValidationError=void 0,(l=e.DomainValidationError||(e.DomainValidationError={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",l.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const t=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function r(e){return null!=e&&t.has(e.type)}function a(e){return null!=e&&("date-only"===e.type||"esriFieldTypeDateOnly"===e.type)}function o(e){return null!=e&&("timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type)}function u(e){return null!=e&&("time-only"===e.type||"esriFieldTypeTimeOnly"===e.type)}function s(n,i){const l=n?.domain;if(!l)return null;switch(l.type){case"range":{const{min:l,max:t}=m(n);if(null!=l&&+i<l||null!=t&&+i>t)return e.DomainValidationError.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==l.codedValues||l.codedValues.every((e=>null==e||e.code!==i)))return e.DomainValidationError.INVALID_CODED_VALUE}return null}function m(e,n){const i=n??e?.domain;if(!i||"range"!==i.type)return;const l="range"in i?i.range[0]:i.minValue,t="range"in i?i.range[1]:i.maxValue,s=r(e);return a(e)||u(e)||o(e)?{...d(e,t,l),isInteger:s}:{min:null!=l&&"number"==typeof l?l:null,max:null!=t&&"number"==typeof t?t:null,rawMin:l,rawMax:t,isInteger:s}}function d(e,l,t){if(a(e)){return{min:null!=t&&n.isString(t)?i.dateOnlyToDateTime(t).toMillis():null,max:null!=l&&n.isString(l)?i.dateOnlyToDateTime(l).toMillis():null,rawMin:t,rawMax:l}}if(u(e)){return{min:null!=t&&n.isString(t)?i.timeOnlyToDateTime(t).toMillis():null,max:null!=l&&n.isString(l)?i.timeOnlyToDateTime(l).toMillis():null,rawMin:t,rawMax:l}}if(o(e)){return{min:null!=t&&n.isString(t)?i.timestampOffsetToDateTime(t).toMillis():null,max:null!=l&&n.isString(l)?i.timestampOffsetToDateTime(l).toMillis():null,rawMin:t,rawMax:l}}return{max:null,min:null}}e.dateTimeFieldValuesToNumericRange=d,e.getDomainRange=m,e.validateDomainValue=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
