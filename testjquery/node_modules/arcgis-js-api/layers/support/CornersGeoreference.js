/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../core/perspectiveUtils","../../core/screenUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","../../chunks/mat3f64","../../chunks/vec2","../../chunks/vec2f64","../../geometry/Point","../../geometry/Polygon","../../geometry/projection","./GeoreferenceBase"],(function(e,t,o,r,n,s,c,l,p,i,a,u,y,f,h){"use strict";const d=a.create();let g=class extends h{constructor(e){super(e),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:e,topRight:t,bottomLeft:o,bottomRight:r}=this;if(null==e||null==t||null==o||null==r)return null;const n=e.spatialReference;return t=this.projectOrWarn(t,n),o=this.projectOrWarn(o,n),r=this.projectOrWarn(r,n),null==t||null==o||null==r?null:new y({rings:[[[o.x,o.y],[e.x,e.y],[t.x,t.y],[r.x,r.y],[o.x,o.y]]],spatialReference:n})}set coords(e){const{topLeft:t}=this;if(null==t)return;const o=t.spatialReference;if(null==(e=this.projectOrWarn(e,o)))return;const{rings:[[r,n,s,c]]}=e;this.bottomLeft=new u({x:r[0],y:r[1],spatialReference:o}),this.topLeft=new u({x:n[0],y:n[1],spatialReference:o}),this.topRight=new u({x:s[0],y:s[1],spatialReference:o}),this.bottomRight=new u({x:c[0],y:c[1],spatialReference:o})}toSourceNormalized(e){const{topLeft:r,topRight:n,bottomRight:s,bottomLeft:c}=this;if(null==e||null==r||null==n||null==s||null==c)return null;const l=r.spatialReference;e=e.normalize();const a=f.projectOrLoad(e,l).geometry;if(null==a)return null;i.set(d,a.x,a.y);const u=t.getProjectiveTransform(p.create(),[r.x,r.y,c.x,c.y,n.x,n.y,s.x,s.y],[0,0,0,1,1,0,1,1]);return t.transformProjective(d,d,u),o.createScreenPoint(d[0],d[1])}};e.__decorate([r.property()],g.prototype,"coords",null),e.__decorate([r.property({type:u})],g.prototype,"bottomLeft",void 0),e.__decorate([r.property({type:u})],g.prototype,"bottomRight",void 0),e.__decorate([r.property({type:u})],g.prototype,"topLeft",void 0),e.__decorate([r.property({type:u})],g.prototype,"topRight",void 0),g=e.__decorate([l.subclass("esri.layers.support.CornersGeoreference")],g);return g}));
