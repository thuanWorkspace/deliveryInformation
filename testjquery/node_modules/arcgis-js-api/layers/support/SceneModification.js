/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../geometry","../../core/JSONSupport","../../core/lang","../../core/Warning","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/writer","../../core/accessorSupport/decorators/persistable","../../geometry/projection","../../geometry/Polygon"],(function(e,r,t,o,s,c,a,p,i,n,l,y){"use strict";var u;let d=u=class extends t.JSONSupport{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,r,t,o){if(o.layer?.spatialReference&&!o.layer.spatialReference.equals(this.geometry.spatialReference)){if(!l.canProjectWithoutEngine(e.spatialReference,o.layer.spatialReference))return void(o?.messages&&o.messages.push(new s("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:o.layer.spatialReference,context:o})));const c=new y;l.projectPolygon(e,c,o.layer.spatialReference),r[t]=c.toJSON(o)}else r[t]=e.toJSON(o);delete r[t].spatialReference}clone(){return new u({geometry:o.clone(this.geometry),type:this.type})}};e.__decorate([c.property({type:y}),n.persistable()],d.prototype,"geometry",void 0),e.__decorate([i.writer(["web-scene","portal-item"],"geometry")],d.prototype,"writeGeometry",null),e.__decorate([c.property({type:["clip","mask","replace"],nonNullable:!0}),n.persistable()],d.prototype,"type",void 0),d=u=e.__decorate([p.subclass("esri.layers.support.SceneModification")],d);return d}));
