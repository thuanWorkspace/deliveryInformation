/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/Logger","../../geometry/support/spatialReferenceUtils","./infoFor3D","./layerUtils"],(function(e,t,i,r,a){"use strict";function s(e){return!(!(e&&"object"==typeof e&&"loaded"in e&&e.loaded&&a.getEffectiveLayerCapabilities(e)?.operations?.supportsEditing&&"type"in e)||"editingEnabled"in e&&!a.getEffectiveEditingEnabled(e)||"scene"===e.type&&!n(e))}function n(e){const{associatedLayer:a}=e,s=a?.infoFor3D;if(!!!s)return!0;const{supportedFormats:n,queryFormats:o}=s,l=r.getMimeTypeFormatId("model/gltf-binary",n)??r.getFilenameFormatId("glb",n);if(!(null!=l&&o.includes(l)))return t.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because it does not support GLB queries.`),!1;const d=e.spatialReference,c=a.spatialReference;if(!i.equals(d,c))return t.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because its spatial reference (wkid:${d.wkid}) is different from its associated FeatureLayer's spatial reference (wkid:${c.wkid}).`),!1;const u=a.sourceJSON.sourceSpatialReference;return!(null!=u&&!i.equals(u,c))||(t.getLogger("esri.layers.support.editableLayers").warnOnce(`SceneLayer (${e.title??"Untitled layer"}, ${e.id}) is not editable because the spatial reference of its associated FeatureLayer's service (wkid:${c.wkid}) is different from its source spatial reference (wkid:${u.wkid}).`),!1)}e.isEditableLayer=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
