/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../support/requestPresets"],(function(e,t){"use strict";async function r(e,r){const a=await t.fetchArcGISServiceJSON(e,r);u(a),c(a);const n={serviceJSON:a};if((a.currentVersion??0)<10.5)return n;const s=await t.fetchArcGISServiceJSON(e+"/layers",r);return u(s),c(s),n.layersJSON={layers:s.layers,tables:s.tables},n}function a(e){return"Feature Layer"===e.type||"Oriented Imagery Layer"===e.type}function n(e){return"Table"===e.type}function c(e){e.layers=e.layers?.filter(a),e.tables=e.tables?.filter(n)}function s(e){e.type||(e.type="Feature Layer")}function i(e){e.type||(e.type="Table")}function u(e){e.layers?.forEach(s),e.tables?.forEach(i)}e.fetchFeatureService=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
