/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../request","../../core/JSONSupport","../../core/lang","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/decorators/persistable","./PolygonCollection","../../chunks/persistableUrlUtils"],(function(e,r,t,s,o,i,a,c,n,l,p,u){"use strict";var m;let d=m=class extends t.JSONSupport{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new p,this._geometriesSource=null}initialize(){this.addHandles(o.on((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),o.sync))}readGeometries(e,r,t){Array.isArray(e)?this.geometries=p.fromJSON(e,t):this._geometriesSource={url:u.fromJSON(e,t),context:t}}async loadGeometries(e,t){if(null==this._geometriesSource)return;const{url:s,context:o}=this._geometriesSource,i=await r(s,{responseType:"json",signal:t?.signal}),a=e.toJSON(),c=i.data.map((e=>({...e,spatialReference:a})));this.geometries=p.fromJSON(c,o),this._geometriesSource=null}clone(){const e=new m({geometries:s.clone(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};e.__decorate([i.property({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],d.prototype,"spatialRelationship",void 0),e.__decorate([i.property({type:p,nonNullable:!0,json:{write:!0}}),l.persistable({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],d.prototype,"geometries",void 0),e.__decorate([c.reader(["web-scene","portal-item"],"geometries")],d.prototype,"readGeometries",null),d=m=e.__decorate([n.subclass("esri.layers.support.SceneFilter")],d);return d}));
