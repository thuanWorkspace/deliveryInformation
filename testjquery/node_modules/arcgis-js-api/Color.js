/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["./colorUtils","./core/mathUtils","./core/accessorSupport/ensureType"],(function(t,r,s){"use strict";function n(t){return r.clamp(s.ensureInteger(t),0,255)}function i(t,r,s){return t=Number(t),isNaN(t)?s:t<r?r:t>s?s:t}function e(t,r){const s=t.toString(16).padStart(2,"0");return r?s.substring(0,1):s}class a{static blendColors(t,r,s,n=new a){return n.r=Math.round(t.r+(r.r-t.r)*s),n.g=Math.round(t.g+(r.g-t.g)*s),n.b=Math.round(t.b+(r.b-t.b)*s),n.a=t.a+(r.a-t.a)*s,n._sanitize()}static fromRgb(r,s){const n=r.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(n){const r=n[2].split(/\s*,\s*/),i=n[1];if("rgb"===i&&3===r.length||"rgba"===i&&4===r.length){const t=r[0];if("%"===t.charAt(t.length-1)){const t=r.map((t=>2.56*parseFloat(t)));return 4===r.length&&(t[3]=parseFloat(r[3])),a.fromArray(t,s)}return a.fromArray(r.map((t=>parseFloat(t))),s)}if("hsl"===i&&3===r.length||"hsla"===i&&4===r.length)return a.fromArray(t.hsla2rgba(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3])),s)}return null}static fromHex(t,r=new a){if("#"!==t[0]||isNaN(Number(`0x${t.substring(1)}`)))return null;switch(t.length){case 4:case 5:{const s=parseInt(t.substring(1,2),16),n=parseInt(t.substring(2,3),16),i=parseInt(t.substring(3,4),16),e=5===t.length?15:parseInt(t.substring(4),16);return a.fromArray([s+16*s,n+16*n,i+16*i,(e+16*e)/255],r)}case 7:case 9:{const s=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16),e=7===t.length?255:parseInt(t.substring(7),16);return a.fromArray([s,n,i,e/255],r)}default:return null}}static fromArray(t,r=new a){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(r,s){const n=t.isNamedColor(r)?t.getNamedColor(r):null;return n&&a.fromArray(n,s)||a.fromRgb(r,s)||a.fromHex(r,s)}static fromJSON(t){return null!=t?new a([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return null!=t?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return null!=t?[t.r/255,t.g/255,t.b/255,null!=t.a?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return"string"==typeof t?a.fromString(t,this):Array.isArray(t)?a.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof a||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=t?.capitalize??!1,s=t?.digits??6,n=3===s||4===s,i=4===s||8===s,a=`#${e(this.r,n)}${e(this.g,n)}${e(this.b,n)}${i?e(Math.round(255*this.a),n):""}`;return r?a.toUpperCase():a}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=a.AlphaMode.ALWAYS){const r=n(this.r),s=n(this.g),i=n(this.b);return t===a.AlphaMode.ALWAYS||1!==this.a?[r,s,i,n(255*this.a)]:[r,s,i]}clone(){return new a(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return null!=t&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(i(this.r,0,255)),this.g=Math.round(i(this.g,0,255)),this.b=Math.round(i(this.b,0,255)),this.a=i(this.a,0,1),this}_set(t,r,s,n){this.r=t,this.g=r,this.b=s,this.a=n}}a.prototype.declaredClass="esri.Color",function(t){var r;(r=t.AlphaMode||(t.AlphaMode={}))[r.ALWAYS=0]="ALWAYS",r[r.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(a||(a={}));return a}));
