/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["./chunks/tslib.es6","./Map","./core/Loadable","./core/loadAll","./core/Logger","./core/MultiOriginJSONSupport","./core/Promise","./core/Version","./core/accessorSupport/decorators/property","./core/accessorSupport/ensureType","./core/arrayUtils","./core/has","./core/accessorSupport/decorators/reader","./core/accessorSupport/decorators/subclass","./core/accessorSupport/decorators/writer","./core/accessorSupport/read","./linkchart/InitialViewProperties","./portal/PortalItem","./webdoc/webdocLoadUtils"],(function(e,r,o,t,i,s,a,n,c,l,p,d,u,h,y,_,m,v,V){"use strict";const g=new n.Version(2,28),w="Link Chart",S="linkchart",b="link-chart",I={currentVersion:g,createInitialViewProperties:()=>new m,parseVersion:n.Version.parse,itemType:w,name:S,origin:b};let P=class extends(s.MultiOriginJSONMixin(o.LoadableMixin(a.EsriPromiseMixin(r)))){constructor(e){super(e),this.resourceReferences={portalItem:null,paths:[]},this.initialViewProperties=new m,this.portalItem=null,this.sourceVersion=null}load(e){return this.addResolvingPromise(V.loadFromSource(I,this)),Promise.resolve(this)}destroy(){const e=this.portalItem;this.portalItem=null,e?.destroy()}initialize(){if(this.when().catch((e=>{i.getLogger(this).error("#load()","Failed to load link chart",e)})),this.resourceInfo){let r;try{r=this._validateJSON(this.resourceInfo)}catch(e){return void this.addResolvingPromise(Promise.reject(e))}this.read(r)}}readSourceVersion(e,r){return n.Version.parse(r.version,S)}writeSourceVersion(e,r,o){r[o]=`${g.major}.${g.minor}`}loadAll(){return t.loadAll(this,(e=>{e(this.ground,this.basemap,this.layers,this.tables)}))}read(e,r){r={...r,origin:b},_.readLoadable(this,e,(r=>super.read(e,r)),r)}_validateJSON(e){const r=n.Version.parse(e.version||"","link-chart");return g.validate(r),e.version=`${r.major}.${r.minor}`,e}};e.__decorate([c.property({type:m,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]}}})],P.prototype,"initialViewProperties",void 0),e.__decorate([c.property({json:{read:!1}})],P.prototype,"layers",void 0),e.__decorate([c.property()],P.prototype,"linkChartProperties",void 0),e.__decorate([c.property({type:v})],P.prototype,"portalItem",void 0),e.__decorate([c.property()],P.prototype,"resourceInfo",void 0),e.__decorate([c.property({readOnly:!0,type:n.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],P.prototype,"sourceVersion",void 0),e.__decorate([u.reader("sourceVersion")],P.prototype,"readSourceVersion",null),e.__decorate([y.writer("sourceVersion")],P.prototype,"writeSourceVersion",null),e.__decorate([c.property({json:{read:!1}})],P.prototype,"tables",void 0),P=e.__decorate([h.subclass("esri.LinkChart")],P);return P}));
