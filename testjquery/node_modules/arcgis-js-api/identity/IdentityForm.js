/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/subclass","../intl/substitute","../widgets/Widget","../widgets/support/widgetUtils","../widgets/support/decorators/messageBundle","../widgets/support/jsxFactory"],(function(e,t,s,r,o,i,n,u,a,p,l){"use strict";const d="esri-identity-form",c={base:d,group:`${d}__group`,label:`${d}__label`,footer:`${d}__footer`,esriInput:"esri-input",esriButton:"esri-button",esriButtonSecondary:"esri-button--secondary"},h="ArcGIS Online";let _=class extends u{constructor(e,t){super(e,t),this._usernameInputNode=null,this._passwordInputNode=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:e,server:t,resource:s,signingIn:r,oAuthPrompt:o,messages:i}=this,u=l.tsx("div",{class:c.group},n.substitute(o?i.oAuthInfo:i.info,{server:t&&/\.arcgis\.com/i.test(t)?h:t,resource:`(${s||i.lblItem})`})),p=o?null:l.tsx("div",{class:c.group,key:"username"},l.tsx("label",{class:c.label},i.lblUser,l.tsx("input",{afterCreate:a.storeNode,autocomplete:"off",bind:this,class:c.esriInput,"data-node-ref":"_usernameInputNode",required:!0,spellcheck:!1,type:"text",value:""}))),d=o?null:l.tsx("div",{class:c.group,key:"password"},l.tsx("label",{class:c.label},i.lblPwd,l.tsx("input",{afterCreate:a.storeNode,bind:this,class:c.esriInput,"data-node-ref":"_passwordInputNode",required:!0,type:"password",value:""}))),_=l.tsx("div",{class:this.classes(c.group,c.footer)},l.tsx("input",{class:c.esriButton,disabled:!!r,type:"submit",value:r?i.lblSigning:i.lblOk}),l.tsx("input",{bind:this,class:this.classes(c.esriButton,c.esriButtonSecondary),onclick:this._cancel,type:"button",value:i.lblCancel})),b=e?l.tsx("div",null,e.details?.httpStatus?i.invalidUser:i.noAuthService):null;return l.tsx("form",{bind:this,class:c.base,onsubmit:this._submit},u,b,p,d,_)}_cancel(){this._set("signingIn",!1),this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const t=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit("submit",t)}};e.__decorate([t.property(),p.messageBundle("esri/identity/t9n/identity")],_.prototype,"messages",void 0),e.__decorate([t.property()],_.prototype,"signingIn",void 0),e.__decorate([t.property()],_.prototype,"server",void 0),e.__decorate([t.property()],_.prototype,"resource",void 0),e.__decorate([t.property()],_.prototype,"error",void 0),e.__decorate([t.property()],_.prototype,"oAuthPrompt",void 0),_=e.__decorate([i.subclass("esri.identity.IdentityForm")],_);return _}));
