/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/time","../easing","./Definition","./Settings","./apex/Path"],(function(t,i,e,n,s,a){"use strict";const o={zoom:0,pan:0,rotate:0};let r=class{get time(){return this._time}constructor(t){this._createCamera=t,this._time=i.Milliseconds(0),this.definition=new n.Definition(t),this.path=new a.Path}update(t,n,s){this.definition.update(t,n,s),this.path.update(this.definition,s),this._time=this._applyTimeSettings(i.millisecondsFromSeconds(isFinite(this.path.time)?this.path.time:i.Seconds(0)),s),this._easing=s.easing??(this._time>=1e3?e.inOutCoastQuad:e.outExpo)}cameraAt(t,i){i=i||this._createCamera(),t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const e=this.path.interpolateComponentsAt(t,o);return i.interpolate(this.definition.source,this.definition.target,e),i}_normalizedEasing(t){const i=this._easing(0,this._time),e=this._easing(1,this._time);return(this._easing(t,this._time)-i)/(e-i)}_applyTimeSettings(t,e){const n=null!=e.speedFactor?e.speedFactor:1;null!=e.duration?t=e.duration:null!=e.speedFactor&&(t=i.Milliseconds(t/n));const a=null!=e.minDuration?e.minDuration:s.defaultSettings.minDuration/n,o=null!=e.maxDuration?e.maxDuration:s.defaultSettings.maxDuration/n;return i.Milliseconds(Math.min(Math.max(a,t),o))}};t.Animation=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
