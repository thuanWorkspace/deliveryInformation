/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/quantityUtils","../../core/unitUtils","../../chunks/vec3","../../chunks/vec3f64","../../geometry/projection/projectVectorToVector","../../geometry/support/spatialReferenceUtils","./measurementUtils"],(function(e,t,n,r,c,i,a,l){"use strict";var o;function u(e){return f(e,o.Direct)}function s(e){return f(e,o.Horizontal)}function f(e,r){const{hasZ:c,spatialReference:i}=e,a=l.computeEuclideanMeasurementSR(i);let u=0;const s=n.lengthUnitFromSpatialReference(a);if(null==s)return null;const f=r===o.Direct?D:R;for(const t of e.paths){if(t.length<2)continue;const e=t.length-1;for(let n=0;n<e;++n){const e=t[n];S[0]=e[0],S[1]=e[1],S[2]=c?e[2]:0;const r=t[n+1];x[0]=r[0],x[1]=r[1],x[2]=c?r[2]:0;const a=f(S,x,i);if(null==a)return null;u+=a.value}}return t.createLength(u,s)}function h(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(S[0]=e.x,S[1]=e.y,S[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,v(S,x,n)):null}function d(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(S[0]=e.x,S[1]=e.y,S[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,D(S,x,n)):null}function p(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(S[0]=e.x,S[1]=e.y,S[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,R(S,x,n)):null}function g(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(S[0]=e.x,S[1]=e.y,S[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,V(S,x,n)):null}function z(e){return S[0]=e.x,S[1]=e.y,S[2]=e.hasZ?e.z:0,m(S,e.spatialReference)}function v(e,n,r){const c=L(e,n,r);return null!=c?{direct:t.createLength(c.direct,c.unit),horizontal:t.createLength(c.horizontal,c.unit),vertical:t.createLength(c.vertical,c.unit)}:null}function D(e,n,r){const c=L(e,n,r,o.Direct);return null!=c?t.createLength(c.direct,c.unit):null}function R(e,n,r){const c=L(e,n,r,o.Horizontal);return null!=c?t.createLength(c.horizontal,c.unit):null}function y(e,n,r){const c=L(e,n,r,o.Vertical);return null!=c?t.createLength(Math.abs(c.verticalSigned),c.unit):null}function V(e,n,r){const c=L(e,n,r,o.Vertical);return null!=c?t.createLength(c.verticalSigned,c.unit):null}function m(e,r){const c=n.verticalLengthUnitFromSpatialReference(r);return null!=c?t.createLength(e[2],c):null}function L(e,t,c,a){const u=l.computeEuclideanMeasurementSR(c),s=n.lengthUnitFromSpatialReference(u);if(null==s)return null;const f=t[2]-e[2];if(a===o.Vertical)return{verticalSigned:f,unit:s};if(!i.projectVectorToVector(e,c,Z,u)||!i.projectVectorToVector(t,c,H,u))return null;if(a===o.Direct){return{direct:r.distance(H,Z),unit:s}}if(r.set(U,e[0],e[1],t[2]),!i.projectVectorToVector(U,c,U,u))return null;const h=r.distance(U,H);if(a===o.Horizontal)return{horizontal:h,unit:s};return{direct:r.distance(H,Z),horizontal:h,vertical:Math.abs(f),unit:s}}!function(e){e[e.Direct=0]="Direct",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(o||(o={}));const S=c.create(),x=c.create(),Z=c.create(),H=c.create(),U=c.create();e.elevation=m,e.elevationOfPoint=z,e.euclideanDirectDistance=D,e.euclideanDirectDistanceBetweenPoints=d,e.euclideanDistance=v,e.euclideanDistanceBetweenPoints=h,e.euclideanHorizontalDistance=R,e.euclideanHorizontalDistanceBetweenPoints=p,e.euclideanHorizontalLength=s,e.euclideanLength=u,e.verticalDistance=y,e.verticalSignedDistance=V,e.verticalSignedDistanceBetweenPoints=g,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
