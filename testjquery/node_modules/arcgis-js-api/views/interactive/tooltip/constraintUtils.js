/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/quantityUtils","../../../core/unitUtils","../../../chunks/vec3","../../../chunks/vec3f64","../../../geometry/projection/projectVectorToVector","../../../geometry/support/Axis","../../../geometry/support/coordinateSystem","../sketch/constraints","../sketch/normalizedPoint","../../support/angularMeasurementUtils","../../support/measurementUtils"],(function(t,e,n,r,o,i,c,s,a,u,l,f){"use strict";function p(t,o,l,p){if(!o)return;const{spatialReference:m}=t;if(!n.lengthUnitFromSpatialReference(m))return;const d=f.computeEuclideanMeasurementSR(m),g=n.lengthUnitFromSpatialReference(d);if(!g)return;const S=u.fromPoint(t,l,p),U=h;if(!i.projectVectorToVector(S,m,U,d))return;const y=e.valueInUnit(o,g);if("3d"===l?.type&&"local"===l.viewingMode)U[0]+=y;else{const t=s.createGlobal(d),e=s.axisAt(t,U,c.Axis.X,v);r.scaleAndAdd(U,U,e,y)}if(!i.projectVectorToVector(U,d,U,m))return;const A=r.distance(S,U);return new a.SphereConstraint(S,A)}function m(t,e,n,r){if(!e)return;const o=u.fromPoint(t,n,r),i=1,c=l.pointFromDistanceAlongAzimuth(t,i,e);if(!c)return;const s=u.fromPoint(c,n,r);return new a.VerticalHalfPlaneConstraint(o,s)}function d(t,r,o,i){if(null==t)return;const c=f.computeEuclideanMeasurementSR(r),s=n.verticalLengthUnitFromSpatialReference(c);return s?new a.HorizontalPlaneConstraint(e.valueInUnit(t,s)):void 0}function g(t){let e;for(const n of t)n&&(e=e?.intersect(n)??n);return e}const h=o.create(),v=o.create();t.getDistanceConstraint=p,t.getElevationConstraint=d,t.getOrientationConstraint=m,t.intersectAll=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
