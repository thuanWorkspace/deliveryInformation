/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/screenUtils","../../../chunks/vec2","../../../chunks/vec3","../../../chunks/vec3f64","../../../layers/graphics/dehydratedPoint","../../../support/elevationInfoUtils"],(function(e,r,n,t,o,c,a){"use strict";function i(e,r,t,o){t.projectToRenderScreen(e,v),t.projectToRenderScreen(r,y),n.subtract(o,y,v),n.normalize(o,o)}function d(e,r,n,t,c=o.create()){const i=r.toXYZ(e);return i[2]=a.getConvertedElevationFromVector(t,i,r.spatialReference,n)||0,t.renderCoordsHelper.toRenderCoords(i,r.spatialReference,c),c}function s(e,r,n,c,i=o.create()){const d=t.copy(R,e);return d[2]=a.getConvertedElevationFromVector(c,d,r,n)||0,c.renderCoordsHelper.toRenderCoords(d,r,i),i}function l(e,r,n,t){return p(r.toXYZ(e),r.spatialReference,n,t)}function p(e,n,t,o){return"2d"===o.type?(f.x=e[0],f.y=e[1],f.spatialReference=n,o.toScreen(f)):(s(e,n,t,o,R),o.state.camera.projectToScreen(R,S),r.createScreenPoint(S[0],S[1]))}function u(e,r,n,t,o,c,i){if("absolute-height"===t.mode)return d(e,n,t,o,c),void d(r,n,t,o,i);const s=n.toXYZ(e),l=n.toXYZ(r),p=a.getConvertedElevationFromVector(o,s,n.spatialReference,t),u=a.getConvertedElevationFromVector(o,l,n.spatialReference,t),f=(null==p?u:null==u?p:Math.min(p,u))||0;s[2]=f,l[2]=f,o.renderCoordsHelper.toRenderCoords(s,n.spatialReference,c),o.renderCoordsHelper.toRenderCoords(l,n.spatialReference,i)}const f=c.makeDehydratedPoint(0,0,0,null),R=o.create(),v=r.createRenderScreenPointArray3(),y=r.createRenderScreenPointArray3(),S=r.createScreenPointArray();e.anyMapPointToRender=d,e.anyMapPointToScreenPoint=l,e.anyMapPointsToRenderWithEqualRelativeZ=u,e.renderScreenSpaceTangent=i,e.vectorToRender=s,e.vectorToScreenPoint=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
