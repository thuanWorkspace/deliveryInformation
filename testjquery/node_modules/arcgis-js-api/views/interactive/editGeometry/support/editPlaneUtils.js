/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/vec2","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/boundedPlane","../../../../geometry/support/vectorStacks","../operations/MoveVertex","../operations/RotateVertex","../operations/ScaleVertex","../operations/UpdateVertices"],(function(e,t,n,o,i,a,r,s,c,d){"use strict";function u(e,t){return f(e,t,!1)}function p(e,t){return f(e,t,!0)}function f(e,t,n){if(e instanceof d.UpdateVertices){if(e.operation instanceof r.MoveVertex)return b(e.operation,t,n),!0;if(e.operation instanceof s.RotateVertex)return g(e.operation,t,n),!0;if(e.operation instanceof c.ScaleVertex)return l(e.operation,t,n),!0}return!1}function b(e,t,a=!1){const r=a?-1:1,s=o.fromValues(r*e.dx,r*e.dy,r*e.dz);n.add(t.origin,t.origin,s),i.updateUnboundedPlane(t)}function g(e,t,a=!1){const r=a?-e.angle:e.angle;n.rotateZ(t.basis1,t.basis1,o.ZEROS,r),n.rotateZ(t.basis2,t.basis2,o.ZEROS,r),i.updateUnboundedPlane(t)}function l(e,o,a=!1){const r=a?1/e.factor1:e.factor1,s=a?1/e.factor2:e.factor2;n.scale(o.basis1,o.basis1,r),n.scale(o.basis2,o.basis2,s),t.projectAndScale(o.origin,o.origin,e.origin,e.axis1,r),t.projectAndScale(o.origin,o.origin,e.origin,e.axis2,s),i.updateUnboundedPlane(o)}function I(e,n,o,r){r||(r=i.create());const s=t.set(a.sv2d.get(),e[1],-e[0]),c=t.set(a.sv2d.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),d=t.set(a.sv2d.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),u=a.sv2d.get();n.components.forEach((n=>n.vertices.forEach((n=>{const o=n.pos;t.set(u,t.dot(e,o),t.dot(s,o)),t.min(c,c,u),t.max(d,d,u)}))));const p=1e-6,f=t.set(a.sv2d.get(),d[0]-c[0]<p?o/2:0,d[1]-c[1]<p?o/2:0);return t.subtract(c,c,f),t.add(d,d,f),t.scale(r.basis1,e,(d[0]-c[0])/2),t.scale(r.basis2,s,(d[1]-c[1])/2),t.set(r.origin,c[0]*e[0]+c[1]*s[0],c[0]*e[1]+c[1]*s[1]),t.add(r.origin,r.origin,r.basis1),t.add(r.origin,r.origin,r.basis2),i.updateUnboundedPlane(r),r}e.apply=u,e.calculateOrientedBounds=I,e.unapply=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
