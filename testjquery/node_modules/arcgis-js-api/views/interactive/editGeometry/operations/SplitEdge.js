/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../EditGeometry"],(function(e,t){"use strict";class i{constructor(e,t,i){this._editGeometry=e,this._edge=t,this._t=i,this.createdVertex=null,this._left=null,this._right=null}apply(){let e="redo";const i=this._edge,r=i.component,s=i.leftVertex,d=i.rightVertex;r.edges.splice(r.edges.indexOf(i),1),null==this.createdVertex&&(e="apply",this.createdVertex=new t.Vertex(i.component)),r.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(i.leftVertex.pos,i.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),null==this._left&&(this._left=new t.Edge(r,s,this.createdVertex)),this._left.leftVertex.leftEdge?r.edges.push(this._left):r.edges.unshift(this._left),s.rightEdge=this._left,null==this._right&&(this._right=new t.Edge(r,this.createdVertex,d)),r.edges.push(this._right),d.leftEdge=this._right,r.updateVertexIndex(this.createdVertex,s.index+1),this._editGeometry.notifyChanges({operation:e,addedVertices:[this.createdVertex]})}undo(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const e=this._edge,t=e.component,i=this.createdVertex.leftEdge,r=this.createdVertex.rightEdge,s=i?.leftVertex,d=r?.rightVertex;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this._left),1),t.edges.splice(t.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?t.edges.push(this._edge):t.edges.unshift(this._edge),s&&(s.rightEdge=e),d&&(d.leftEdge=e),s&&t.updateVertexIndex(s,s.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}e.SplitEdge=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
