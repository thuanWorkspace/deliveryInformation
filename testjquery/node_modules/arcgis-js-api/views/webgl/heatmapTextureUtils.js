/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/Error","./enums"],(function(e,t,r){"use strict";class a{constructor(e,t,r,a){this.dataType=e,this.samplingMode=t,this.pixelFormat=r,this.internalFormat=a}}function o(e,o){const{textureFloat:l,colorBufferFloat:i}=e.capabilities,n=l?.textureFloat,f=l?.textureFloatLinear,u=l?.textureHalfFloat,s=l?.textureHalfFloatLinear,x=i?.textureFloat,m=i?.textureHalfFloat,d=i?.floatBlend,_=e.driverTest.floatBufferBlend.result;if(!n&&!u)throw new t("heatmap:missing-texture-float","HeatmapRenderer requires WebGL2 or the WebGL1 extension OES_texture_float or OES_texture_half_float.");if(!x&&!m)throw new t("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(d&&_||m))throw new t("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(_?"":" This device claims support for EXT_float_blend, but does not actually support it."));const p=n&&x&&d&&_,F=u&&m,c=f,h=s,b=!!i?.R32F,T=!!i?.R16F;if(p&&(c||!h))return c||o.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),new a(r.PixelType.FLOAT,c?r.TextureSamplingMode.LINEAR:r.TextureSamplingMode.NEAREST,b?r.PixelFormat.RED:r.PixelFormat.RGBA,b?r.SizedPixelFormat.R32F:r.PixelFormat.RGBA);if(F)return h||o.warnOnce("Missing WebGL extension OES_texture_half_float_linear. Heatmap quality may be reduced."),new a(r.PixelType.HALF_FLOAT,h?r.TextureSamplingMode.LINEAR:r.TextureSamplingMode.NEAREST,T?r.PixelFormat.RED:r.PixelFormat.RGBA,T?r.SizedPixelFormat.R16F:r.PixelFormat.RGBA);throw new t("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}e.HeatmapTextureConfiguration=a,e.loadHeatmapTextureConfiguration=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
