/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/tslib.es6","../../../core/handleUtils","../../../core/promiseUtils","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","../../../geometry/support/heightModelInfoUtils"],(function(e,t,r,s,o,a,i,n,l,c,p){"use strict";const d=e=>{let i=class extends e{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),p.supportsHeightModelInfo(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,t=e.signal;this.addHandles(r.makeHandle((()=>e.abort()))),await o.whenOnce((()=>this.view.defaultsFromMap?.heightModelInfoReady),t),s.throwIfAborted(t);const a=p.rejectLayerError(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(a)throw a}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e?.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(e.outsideScaleRange=!0),e}};return t.__decorate([a.property()],i.prototype,"view",void 0),t.__decorate([a.property()],i.prototype,"slicePlaneEnabled",void 0),i=t.__decorate([c.subclass("esri.views.3d.layers.LayerView3D")],i),i};e.LayerView3D=d,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
