/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/vec3f64","../../../../geometry/projection/projectPointToVector","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/coordsUtils","../../../../layers/graphics/dehydratedPoint","./elevationAlignmentUtils","./graphicUtils","../../webgl-engine/lib/Object3D"],(function(e,t,n,o,r,i,a,c,l){"use strict";function s(e,t,r,i,c){const s=e.clippingExtent;if(n.projectPointToVector(t,d,e.elevationProvider.spatialReference),null!=s&&!o.containsPoint(s,d))return null;n.projectPointToVector(t,d,e.renderCoordsHelper.spatialReference),r.localOrigin=e.localOriginFactory.getOrigin(d);const p=new l.Object3D({geometries:[r],castShadow:!1,layerUid:e.layer.uid,graphicUid:c,usesVerticalDistanceToGround:!0});return{object:p,sampledElevation:a.applyElevationAlignmentForHUD(p,t,e.elevationProvider,e.renderCoordsHelper,i)}}function p(e,t,o){const r=e.elevationContext,a=o.spatialReference;n.projectPointToVector(t,d,a),r.centerPointInElevationSR=i.makeDehydratedPoint(d[0],d[1],t.hasZ?d[2]:0,null!=a?a:null)}function u(e){switch(e.type){case"point":return e;case"polygon":case"extent":return c.computeCentroid(e);case"polyline":{const t=e.paths[0];if(!t||0===t.length)return null;const n=r.getPointOnPath(t,r.getPathLength(t)/2);return i.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}case"mesh":return e.origin}return null}const d=t.create();e.createStageObject=s,e.extendPointGraphicElevationContext=p,e.placePointOnGeometry=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
