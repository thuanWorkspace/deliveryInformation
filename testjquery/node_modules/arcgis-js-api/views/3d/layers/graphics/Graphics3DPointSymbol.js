/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../core/asyncUtils","../../../../core/maybe","../../../../core/promiseUtils","./Graphics3DCalloutSymbolLayerFactory","./Graphics3DLineCalloutSymbolLayer","./Graphics3DSymbol"],(function(e,r,t,l,o,a,s){"use strict";class y extends s.Graphics3DSymbol{constructor(e,r,t){super(e,r,t),this._calloutSymbolLayer=null,this.symbol.hasVisibleCallout()&&(this._calloutSymbolLayer=o.make(this.symbol,r))}async doLoad(e){const t=this._calloutSymbolLayer?r.result(this._calloutSymbolLayer.load()):null;try{await super.doLoad(e),l.throwIfAborted(e)}catch(o){throw this._calloutSymbolLayer?.abortLoad(),o}t&&await t}destroy(){super.destroy(),this._calloutSymbolLayer=t.destroyMaybe(this._calloutSymbolLayer)}createGraphics3DGraphic(e,r){const t=super.createGraphics3DGraphic(e,r);if(null!=this._calloutSymbolLayer&&null!=t){const r=this._createCalloutGraphic(e);r&&t.setCalloutGraphic(r)}return t}globalPropertyChanged(e,r){return!!super.globalPropertyChanged(e,r)&&(!this._calloutSymbolLayer||this._calloutSymbolLayer.globalPropertyChanged(e,r,(e=>e.calloutLayer)))}updateGeometry(e,r){const t=super.updateGeometry(e,r);if(t&&this._calloutSymbolLayer){const t=e.calloutLayer;if(t)return this._calloutSymbolLayer.updateGeometry(t,r)}return t}_createCalloutGraphic(e){const r=e.renderingInfo;return e.renderingInfo=new a.LineCalloutSymbolLayerRenderingInfo(r.renderer,r.symbol),this._calloutSymbolLayer.createGraphics3DGraphic(e)}}e.Graphics3DPointSymbol=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
