/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../../../core/arrayUtils","../../../../core/handleUtils","../II3SMeshView3D"],(function(e,t,i){"use strict";class s{constructor(){this.ids=new Set}}class l{constructor({collection:e,forAllFeatures:t,forAllFeaturesOfNode:i}){this._highlights=[],this._collection=e,this._forAllFeatures=t,this._forAllFeaturesOfNode=i}destroy(){this._highlights.forEach((e=>this._releaseSet(e))),this._highlights=null}acquireSet(){const i=new s;this._highlights.push(i);const l=t.makeHandle((()=>{this._highlights&&(this._releaseSet(i),e.removeUnordered(this._highlights,i))}));return{set:i,handle:l}}setFeatureIds(e,t){t.forEach((t=>e.ids.add(t))),this._initializeSet(e)}_initializeSet(e){this._forAllFeatures(((t,s,l)=>(e.ids.has(t)&&this._collection.addComponentHighlight(l.objectHandle,s),i.ForAllFeaturesReturnType.CONTINUE)))}_releaseSet(e){this._forAllFeatures(((t,s,l)=>(e.ids.has(t)&&this._collection.removeComponentHighlight(l.objectHandle,s),i.ForAllFeaturesReturnType.CONTINUE)))}objectCreated(e){this._highlights.forEach((t=>{this._forAllFeaturesOfNode(e,((s,l)=>(t.ids.has(s)&&this._collection.addComponentHighlight(e.objectHandle,l),i.ForAllFeaturesReturnType.CONTINUE)))}))}objectDeleted(e){this._collection.clearHighlights(e.objectHandle)}}return l}));
