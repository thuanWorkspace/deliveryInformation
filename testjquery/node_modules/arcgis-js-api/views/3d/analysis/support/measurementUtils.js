/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../geometry/geometryEngine","../../../../geometry/Polygon","../../../../geometry/SpatialReference","../../../../geometry/projection/projectPointToVector","../../../../geometry/projection/projectPointToWGS84ComparableLonLat","../../../../geometry/projection/projectVectorToWGS84ComparableLonLat","../../../../geometry/support/geodesicUtils","../../support/mathUtils"],(function(e,t,o,n,r,i,c,a,s,l,u){"use strict";function p(e,o){const n=o.center;t.set(n,0,0,0);for(let i=0;i<e.length;++i)t.add(n,n,e[i]);t.scale(n,n,1/e.length);let r=0;for(let i=0;i<e.length;++i)r=Math.max(r,t.squaredDistance(n,e[i]));o.radius=Math.sqrt(r)}function g(e,t){if(e.length<3)throw new Error("need at least 3 points to fit a plane");u.planeFromPoints(e[0],e[1],e[2],t)}function f(e,o){return t.dot(e,o)+e[3]}function m(e,o,n){return c.projectPointToVector(e,S,n)&&c.projectPointToVector(o,G,n)?t.distance(S,G):0}function d(e,t){if(!a.projectPointToWGS84ComparableLonLat(e,S)||!a.projectPointToWGS84ComparableLonLat(t,G))return 0;const o=new l.InverseGeodeticSolverResult;return l.inverseGeodeticSolver(o,[S[0],S[1]],[G[0],G[1]]),o.distance}function h(e,t,o){const n=new l.InverseGeodeticSolverResult;return l.inverseGeodeticSolver(n,[e[0],e[1]],[t[0],t[1]],o),n.distance}function L(e,t,o,r){const i=b;return s.projectVectorToWGS84ComparableLonLat(e,r,S)&&s.projectVectorToWGS84ComparableLonLat(t,r,G)&&s.projectVectorToWGS84ComparableLonLat(o,r,j)?(i.setPoint(0,0,S),i.setPoint(0,1,G),i.setPoint(0,2,j),Math.abs(n.geodesicArea(i,"square-meters"))):0}function y(e,o=null,n=!0){const r=1e-6,i=(e,o)=>{if(0===o[0]&&0===o[1]&&0===o[2])return!1;for(let n=0;n<e.length;++n)if(t.dot(o,e[n])<-r)return!1;return!0};if(0===e.length)return!1;if(1===e.length)return o&&t.copy(o,e[0]),!0;t.set(T,0,0,0);for(let c=0;c<e.length;++c)t.add(T,T,e[c]);if(t.normalize(T,T),i(e,T))return o&&t.copy(o,T),!0;if(!n)return!1;for(let c=0;c<e.length;++c)for(let n=0;n<e.length;++n)if(c!==n&&(t.cross(T,e[c],e[n]),t.normalize(T,T),i(e,T)))return o&&t.copy(o,T),!0;return!1}function P(e){return"mouse"!==e.pointerType||0===e.button}const S=o.create(),G=o.create(),j=o.create(),b=new r({rings:[[S,G,j]],spatialReference:i.WGS84}),T=o.create();e.bestFitPlane=g,e.boundingSphere=p,e.fitHemisphere=y,e.isPrimaryPointerAction=P,e.planePointDistance=f,e.segmentLengthEuclidean=m,e.segmentLengthGeodesic=d,e.segmentLengthGeodesicVector=h,e.triangleAreaGeodesic=L,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
