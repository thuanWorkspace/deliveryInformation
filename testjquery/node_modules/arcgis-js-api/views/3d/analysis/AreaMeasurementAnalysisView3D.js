/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/maybe","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","../../../properties/defaultUnit","./AnalysisView3D","./interfaces","./AreaMeasurement/support/AreaMeasurementController","./AreaMeasurement/support/AreaMeasurementPathHelper","./AreaMeasurement/support/AreaMeasurementVisualization"],(function(e,t,a,r,s,o,i,n,l,p,u,y,d,c){"use strict";let h=class extends(p.AnalysisView3D(t)){constructor(e){super(e),this.type="area-measurement-view-3d",this.analysis=null,this.measurementData=null,this.lastDraggedVertex=null,this.stagedPoint=null,this.mode=u.MeasurementMode.Auto}initialize(){const{analysis:e,view:t}=this;this.path=new d.AreaMeasurement3DPathHelper({view:t,areaMeasurement:e}),this.analysisVisualization=new c.AreaMeasurementVisualization({view:t,analysis:e,analysisViewData:this}),this.analysisController=new y.AreaMeasurementController({view:t,analysis:e,analysisViewData:this})}destroy(){this.analysisController=a.destroyMaybe(this.analysisController),this.analysisVisualization=a.destroyMaybe(this.analysisVisualization),this.path.destroy()}get updating(){return!!this.analysisVisualization?.loadingMessages}get result(){const{measurementData:e}=this;return null==e?{area:null,mode:null,perimeter:null}:"euclidean"===e.actualMeasurementMode?{area:e.area,perimeter:e.perimeterLength,mode:"euclidean"}:{area:e.geodesicArea,perimeter:e.pathLength,mode:"geodesic"}}get viewData(){return this.analysisVisualization.viewData}get validMeasurement(){return this.path.isValidPolygon}get unit(){return this.analysis.unit??this._defaultUnit}get testData(){return{visualization:this.analysisVisualization,controller:this.analysisController}}};e.__decorate([r.property({readOnly:!0})],h.prototype,"type",void 0),e.__decorate([r.property({constructOnly:!0,nonNullable:!0})],h.prototype,"analysis",void 0),e.__decorate([r.property()],h.prototype,"updating",null),e.__decorate([r.property()],h.prototype,"analysisVisualization",void 0),e.__decorate([r.property()],h.prototype,"analysisController",void 0),e.__decorate([r.property()],h.prototype,"result",null),e.__decorate([r.property()],h.prototype,"measurementData",void 0),e.__decorate([r.property()],h.prototype,"viewData",null),e.__decorate([r.property()],h.prototype,"validMeasurement",null),e.__decorate([r.property()],h.prototype,"path",void 0),e.__decorate([r.property()],h.prototype,"lastDraggedVertex",void 0),e.__decorate([r.property()],h.prototype,"stagedPoint",void 0),e.__decorate([r.property()],h.prototype,"mode",void 0),e.__decorate([r.property()],h.prototype,"unit",null),e.__decorate([r.property(l.defaultUnitPropertyMetadata)],h.prototype,"_defaultUnit",void 0),h=e.__decorate([n.subclass("esri.views.3d.analysis.AreaMeasurementAnalysisView3D")],h);return h}));
