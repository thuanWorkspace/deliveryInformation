/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","../camera/intersectionUtils","../camera/constraintUtils/surfaceCollision"],(function(e,t,r,a,s,o,i,n,c,l){"use strict";e.SurfaceCollisionConstraint=class extends r{constructor(e){super(e)}initialize(){this.addHandles(this.view.basemapTerrain.on("elevation-change",(e=>this._handleElevationChangeEvent(e))))}_handleElevationChangeEvent(e){if(this.view.state.cameraController)return;const t=this.view.state.camera;null!=e.spatialReference&&c.eyeWithinExtent(this.view,t,e.extent,e.spatialReference)&&this._applyToCurrentCamera()}_applyToCurrentCamera(){this.view.state.updateCamera((e=>l.applySurfaceCollisionConstraint(this.view,e,l.Mode.EYE_AND_CENTER)))}},t.__decorate([a.property({constructOnly:!0})],e.SurfaceCollisionConstraint.prototype,"view",void 0),e.SurfaceCollisionConstraint=t.__decorate([n.subclass("esri.views.3d.state.ElevationCollisionConstraint")],e.SurfaceCollisionConstraint),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
