/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/vec3","../../../chunks/vec3f64","../../../geometry/support/frustum"],(function(t,e,i,n){"use strict";class s{get planes(){return this.frustum}get points(){return this._points}get mutablePoints(){return this._points}get direction(){return this._direction}constructor(t){this.renderCoordsHelper=t,this.frustum=n.create(),this._points=n.createPoints(),this.lines=new Array(12),this._origin=i.create(),this._direction=i.create(),this._altitude=null;for(let e=0;e<12;e++)this.lines[e]={origin:null,direction:i.create(),endpoint:null}}update(t){n.fromMatrix(t.viewMatrix,t.projectionMatrix,this.frustum,this._points),e.copy(this._origin,t.eye),e.copy(this._direction,t.viewForward),this._altitude=this.renderCoordsHelper.getAltitude(this._origin),this._updateLines()}updatePoints(t){for(let i=0;i<this._points.length;i++)e.copy(this._points[i],t[i]);n.computePlanes(this.frustum,this._points),this._updateLines()}get altitude(){return this._altitude}intersectsSphere(t){return n.intersectsSphere(this.frustum,t)}intersectsRay(t){return n.intersectsRay(this.frustum,t)}intersectsLineSegment(t,e){return n.intersectsLineSegment(this.frustum,t,e)}intersectsPoint(t){return n.intersectsPoint(this.frustum,t)}_updateLines(){const t=this._points;for(let e=0;e<4;e++){const i=e+4;r(this.lines[e],t[e],t[i]),r(this.lines[e+4],t[e],3===e?t[0]:t[e+1]),r(this.lines[e+8],t[i],3===e?t[4]:t[i+1])}}}function r(t,i,n){t.origin=i,t.endpoint=n,e.direction(t.direction,i,n)}s.planePointIndices=n.planePointIndices,s.nearFarLineIndices=[[n.PointIndex.NEAR_BOTTOM_LEFT,n.PointIndex.FAR_BOTTOM_LEFT],[n.PointIndex.NEAR_BOTTOM_RIGHT,n.PointIndex.FAR_BOTTOM_RIGHT],[n.PointIndex.NEAR_TOP_RIGHT,n.PointIndex.FAR_TOP_RIGHT],[n.PointIndex.NEAR_TOP_LEFT,n.PointIndex.FAR_TOP_LEFT]],t.Frustum=s,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
