/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/maybe","../../../chunks/vec3","../../../geometry/support/aaBoundingBox","./terrainUtils","../webgl-engine/lib/Normals"],(function(t,e,s,i,r,n){"use strict";class o{constructor(){this.indices=null,this.vertexAttributes=null,this.boundingBox=i.empty(),this.indexCount=0,this.numVerticesPerSide=0,this.uvRange=[0,0,1,1],this.outerEdges=[null,null,null,null],this.innerEdges=[null,null,null,null]}release(){this.vertexAttributes=e.releaseMaybe(this.vertexAttributes),this.indices=null}}class u{constructor(t,e,s,i,r){this.attributes=t,this.localOrigin=e,this.index0=s,this.stride=i,this.count=r}getVertexIndex(t){return this.getAttributeIndex(t)}getAttributeIndex(t){return r.internalAssert(0<=t&&t<this.count),this.index0+this.stride*t}_getVertexRaw(t,e){this.attributes.position.getVec(t,e)}getVertexPos(t,e){this._getVertexRaw(this.getAttributeIndex(e),t),s.add(t,t,this.localOrigin)}getNormal(t,e){const{typedBuffer:s,typedBufferStride:i}=this.attributes.normalCompressed;n.decompressNormal(t,s,this.getAttributeIndex(e),i)}_setNormal(t,e,s,i){const{typedBuffer:r,typedBufferStride:o}=this.attributes.normalCompressed;n.compressNormal(r,t,e,s,i,o)}_setUV(t,e,s){a(this.attributes.uv0,t,e,s)}setNormalFromValues(t,e,s,i){this._setNormal(this.getAttributeIndex(t),e,s,i)}setVertexFromValuesRawPositionUV(t,e,s,i,r,n){const o=this.getAttributeIndex(t);this.attributes.position.setValues(o,e,s,i),this._setUV(o,r,n)}setVertexFromValuesRawPositionUVNormal(t,e,s,i,r,n,o,u,l){const a=this.getAttributeIndex(t);this.attributes.position.setValues(a,e,s,i),this._setUV(a,r,n),this._setNormal(a,o,u,l)}}const l=16384;function a(t,e,s,i){t.setValues(e,s*l,i*l)}function h(t,e,s,i){t<i[0]?i[0]=t:t>i[3]&&(i[3]=t),e<i[1]?i[1]=e:e>i[4]&&(i[4]=e),s<i[2]?i[2]=s:s>i[5]&&(i[5]=s)}t.EdgeDescriptor=u,t.PatchGeometry=o,t.encodeUVInBuffer=a,t.minMaxBoundingBox=h,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
