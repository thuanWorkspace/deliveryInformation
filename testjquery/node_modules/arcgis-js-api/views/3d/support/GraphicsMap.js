/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/Evented","../../../core/MapUtils"],(function(e,t,n){"use strict";class s extends t{constructor(){super(...arguments),this._map=new Map}clear(){if(this._map.size>0){const e=this.toArray();this._map.clear(),this.emit("change",{added:[],removed:e})}}get length(){return this._map.size}get(e){return this._map.get(e)}addMany(e){if(0===e.length)return;const t=new Set;for(let s=0;s<e.length;s++){const n=e[s],o=n.objectId,r=this._map.get(o);r?(t.add(o),n!==r&&(e[s]=r),r.refCount||(r.refCount=0),++r.refCount):(n.refCount=1,this._map.set(o,n))}const n=t.size>0?e.filter((e=>!t.has(e.objectId))):e;n.length>0&&this.emit("change",{added:n,removed:[]})}removeMany(e){const t=[];for(const n of e){const e=n.objectId,s=this._map.get(e);null!=s&&(!s.refCount||--s.refCount<=0)&&(this._map.delete(e),t.push(n))}t.length>0&&this.emit("change",{added:[],removed:t})}removeManyByObjectId(e){const t=[];for(const n of e){const e=this._map.get(n);null!=e&&(!e.refCount||--e.refCount<=0)&&(this._map.delete(n),t.push(e))}t.length>0&&this.emit("change",{added:[],removed:t})}toArray(){return[...this._map.values()]}find(e){let t;return n.someMap(this._map,(n=>!!e(n)&&(t=n,!0))),t}forEach(e){this._map.forEach((t=>e(t)))}}e.GraphicsMap=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
