/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../geometry","../../../core/Error","../../../core/unitUtils","../../../geometry/ellipsoidUtils","../../../portal/support/geometryServiceUtils","../../../rest/geometryService/project","../../../rest/support/ProjectParameters","../../../geometry/Point","../../../geometry/SpatialReference"],(function(e,t,r,i,o,s,c,a,n,p){"use strict";class l{constructor(e,t){this.spatialReference=t,this.unitInMeters=i.getMetersPerUnitForSR(this.spatialReference,o.getReferenceEllipsoid(this.spatialReference).metersPerDegree);const c=e&&"portalItem"in e?e.portalItem:void 0;this._geometryServiceURLPromise=s.getGeometryServiceURL(c).catch((()=>{throw new r("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config")}))}async toGeographic(e){const t=await this._geometryServiceURLPromise;let r,i=!0;Array.isArray(e[0])&&"number"!=typeof e[0]?r=e:(r=[e],i=!1);const o=r.map((e=>e instanceof n?e:new n(e,this.spatialReference))),s=new a({geometries:o,outSpatialReference:p.WGS84}),l=(await c.project(t,s)).map((e=>"point"===e.type?[e.x,e.y]:void 0)).filter((e=>!!e));return i?l:l[0]}}e.MapCoordsHelper=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
