/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../core/time","../../../../chunks/vec3","../../../../chunks/vec3f64","./Camera","../../webgl-engine/lib/Camera","../../../animation/pointToPoint/Animation"],(function(t,i,e,n,r,o,s){"use strict";const a=n.create();class c{get finished(){return this.currentTime>=this._animation.time}get time(){return this._animation.time}constructor(t){this.currentTime=i.Milliseconds(0),this._animation=new s.Animation((()=>new r(t))),this._current=new r(t)}update(t,n,r){const o=this._animation.definition.source,s=this._animation.definition.target,c=e.subtract(a,n.center,t.center),m=e.length(c);m>=1e-5?(c[0]/=m,c[1]/=m,c[2]/=m):(c[0]=0,c[1]=1,c[0]=0),e.copy(o.lookAtDirection,c),e.copy(s.lookAtDirection,c),o.copyFromRenderCamera(t),s.copyFromRenderCamera(n),this._current.copyFrom(o),this._animation.update(o,s,r),this.currentTime=i.Milliseconds(0),t.almostEquals(n)&&(this.currentTime=this._animation.time)}cameraAt(t,i){return this._animation.cameraAt(t,this._current),i=i||new o.Camera,this._current.copyToRenderCamera(i),i}step(t,e){return this.finished||(this.currentTime=i.Milliseconds(this.currentTime+i.millisecondsFromSeconds(t)),this.currentTime>=this.time&&(this.currentTime=this.time)),this.cameraAt(this.currentTime/this.time,e)}}t.Animation=c,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
