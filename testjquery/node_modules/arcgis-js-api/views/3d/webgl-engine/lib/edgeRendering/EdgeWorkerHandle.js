/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/typedArrayUtil","../../../../../core/workers/WorkerHandle","../../../support/buffer/workerHelper","./edgeProcessing"],(function(e,t,r,n,a){"use strict";class s extends r.WorkerHandle{constructor(e){super("EdgeProcessingWorker","extract",{extract:e=>[e.dataBuffer],extractComponentsEdgeLocations:e=>[e.dataBuffer],extractEdgeLocations:e=>[e.dataBuffer]},e)}async process(e,t,r){if(r)return a.extract(e);const n=await this.invoke(new i(e),t);return this._unpackOutput(n)}async extractEdgeLocations(e,t){const r=await this.invokeMethod("extractEdgeLocations",new i(e),t);return n.unpackInterleavedBuffer(r)}async extractComponentsEdgeLocations(e,t){const r=await this.invokeMethod("extractComponentsEdgeLocations",new i(e),t);return n.unpackInterleavedBuffer(r)}_unpackOutput(e){return{regular:{instancesData:n.unpackInterleavedBuffer(e.regular.instancesData),lodInfo:{lengths:new Float32Array(e.regular.lodInfo.lengths)}},silhouette:{instancesData:n.unpackInterleavedBuffer(e.silhouette.instancesData),lodInfo:{lengths:new Float32Array(e.silhouette.lodInfo.lengths)}},averageEdgeLength:e.averageEdgeLength}}}class i{constructor(e){this.dataBuffer=e.data.buffer,this.writerSettings=e.writerSettings,this.skipDeduplicate=e.skipDeduplicate,this.indices=t.isArray(e.indices)?e.indices:e.indices.buffer,this.indicesType=t.isArray(e.indices)?"Array":t.isUint32Array(e.indices)?"Uint32Array":"Uint16Array",this.indicesLength=e.indicesLength}}e.EdgeWorkerHandle=s,e.PackedInput=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
