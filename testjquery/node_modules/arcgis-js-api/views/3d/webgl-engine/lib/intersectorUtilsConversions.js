/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/mat4","../../../../chunks/vec3f64","../../../../geometry/support/aaBoundingBox","../../../../chunks/sphere","../../layers/i3s/Intersector","../../terrain/Intersector","./intersectorUtils","./lodRendering/Intersector"],(function(e,t,r,n,s,i,l,u,c){"use strict";function o(e,t){return u.isObjectIntersectorResult(e)||u.isHudIntersectorResult(e)?h(e.target?.object,t):l.isTerrainIntersectorResult(e)?t.map?.ground:i.isPclIntersectorResult(e)||i.isI3sIntersectorResult(e)||l.isOverlayIntersectorResult(e)||i.isVoxelIntersectorResult(e)?h(e.target,t):null}function a(e,t){const r=g(e,t);return null!=r&&"graphic"===r.type?r.graphic:null}function g(e,t){if(null==e)return null;if(u.isObjectIntersectorResult(e)||u.isHudIntersectorResult(e))return d(e.target?.object,t);if(i.isPclIntersectorResult(e)){const t=e.target.createGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if(i.isVoxelIntersectorResult(e)){const t=e.target.createVoxelGraphic();return{type:"graphic",graphic:t,layer:t.layer}}return l.isOverlayIntersectorResult(e)||c.isLodIntersectorResult(e)?d(e.target,t):i.isI3sIntersectorResult(e)?p(e.target,t):null}function d(e,t){if(null==e?.graphicUid)return null;const r=h(e,t);if(null==r)return null;if(r===t.graphics)return null==t.graphicsView||"number"!=typeof e.graphicUid?null:t.graphicsView.getHit(e.graphicUid);const n=t.allLayerViews.find((e=>e.layer===r));return!n||n.suspended||null==e.graphicUid?null:"getHit"in n?n.getHit(e.graphicUid):null}function p(e,t){const r=h(e,t);if(null==r)return null;const n=t.allLayerViews.find((e=>e.layer===r));return n&&!n.suspended&&"getGraphicFromIntersectorTarget"in n?f(n.getGraphicFromIntersectorTarget(e)):null}function I(e,t){const r=h(e,t);if(null==r)return null;const n=t.allLayerViews.find((e=>e.layer===r));return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(e):null}function f(e){return null!=e?{type:"graphic",graphic:e,layer:e.layer}:null}function h(e,t){return null==e?.layerUid?null:null!=t.graphicsView&&e.layerUid===t.graphicsView.processor.layer.id?t.graphics:t.map.findLayerByUid(e.layerUid)}function y(e,r){if(u.isObjectIntersectorResult(e)||u.isHudIntersectorResult(e))return s.getRadius(e.target.object.boundingVolumeWorldSpace.bounds);if(c.isLodIntersectorResult(e)){t.getScaling(m,e.transformation);const r=Math.max(m[0],m[1],m[2]);return e.target.baseBoundingSphere.radius*r}if(i.isI3sIntersectorResult(e)){const t=I(e.target,r);return t?.5*n.diameter(t):null}return null}function R(e){return!u.isObjectIntersectorResult(e)&&!u.isHudIntersectorResult(e)&&(c.isLodIntersectorResult(e)?e.target.numLodLevels>1:!!i.isI3sIntersectorResult(e))}const m=r.create();e.getIntersectedFeatureBSRadius=y,e.hasLod=R,e.toGraphic=a,e.toHit=g,e.toOwner=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
