/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../core/mathUtils","../../../../chunks/vec3","../../../../chunks/vec3f64","./Lightsources","./SphericalHarmonics"],(function(i,t,s,h,r,n){"use strict";class e{constructor(){this.color=h.create(),this.intensity=1}}class a{constructor(){this.direction=h.create(),this.ambient=new e,this.diffuse=new e}}const c=.4;class o{constructor(){this._shOrder=2,this._legacy=new a,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new r.SphericalHarmonicsAmbientLight,this._mainLight=new r.MainLight(h.create(),h.fromValues(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(i){n.combineLights(i,this._shOrder,this._mainLight,this._sphericalHarmonics),s.copy(this._legacy.direction,this._mainLight.direction);const t=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*t,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*t,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*t,s.scale(this._legacy.diffuse.color,this._mainLight.intensity,t),s.copy(g,this._legacy.diffuse.color),s.scale(g,g,c*this.globalFactor),s.add(this._legacy.ambient.color,this._legacy.ambient.color,g)}copyFrom(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),s.copy(this._mainLight.direction,i.mainLight.direction),s.copy(this._mainLight.intensity,i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor}lerpLighting(i,h,r){if(s.lerp(this._mainLight.intensity,i.mainLight.intensity,h.mainLight.intensity,r),this._mainLight.environmentStrength=t.lerp(i.mainLight.environmentStrength,h.mainLight.environmentStrength,r),this._mainLight.specularStrength=t.lerp(i.mainLight.specularStrength,h.mainLight.specularStrength,r),s.copy(this._mainLight.direction,h.mainLight.direction),this._mainLight.castShadows=h.mainLight.castShadows,this.globalFactor=t.lerp(i.globalFactor,h.globalFactor,r),this.noonFactor=t.lerp(i.noonFactor,h.noonFactor,r),i.sh.r.length===h.sh.r.length)for(let s=0;s<h.sh.r.length;s++)this._sphericalHarmonics.r[s]=t.lerp(i.sh.r[s],h.sh.r[s],r),this._sphericalHarmonics.g[s]=t.lerp(i.sh.g[s],h.sh.g[s],r),this._sphericalHarmonics.b[s]=t.lerp(i.sh.b[s],h.sh.b[s],r);else for(let t=0;t<h.sh.r.length;t++)this._sphericalHarmonics.r[t]=h.sh.r[t],this._sphericalHarmonics.g[t]=h.sh.g[t],this._sphericalHarmonics.b[t]=h.sh.b[t]}}const g=h.create();i.SceneLighting=o,i.ambientBoost=c,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})}));
