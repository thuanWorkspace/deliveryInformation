/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../ViewingMode","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/DefaultVertexAttributeLocations","../lib/OrderIndependentTransparency","../lib/Program","../lib/TransparencyPassType","../../../../chunks/HUDMaterial.glsl","../../../webgl/enums","../../../webgl/renderState"],(function(e,t,i,r,a,n,o,l,u,s,d,c,h){"use strict";class p extends n.ShaderTechnique{initializeConfiguration(e,t){t.spherical=e.viewingMode===i.ViewingMode.Global}initializeProgram(e){return new u.Program(e.rctx,p.shader.get().build(this.configuration),o.Default3D)}initializePipeline(){const e=this.configuration.transparencyPassType,t=this.configuration,i=e===s.TransparencyPassType.NONE,a=e===s.TransparencyPassType.FrontFace,n=this.configuration.hasPolygonOffset?g:null,o=(i||a)&&t.output!==r.ShaderOutput.Highlight&&(t.depthEnabled||t.occlusionPass)?h.defaultDepthWriteParams:null;return h.makePipelineState({blending:t.output===r.ShaderOutput.Color||t.output===r.ShaderOutput.Alpha||t.output===r.ShaderOutput.Highlight?i?P:l.oitBlending(e):null,depthTest:{func:c.CompareFunction.LEQUAL},depthWrite:o,colorWrite:h.defaultColorWriteParams,polygonOffset:n})}get primitiveType(){return this.configuration.occlusionPass?c.PrimitiveType.POINTS:c.PrimitiveType.TRIANGLES}}p.shader=new a.ReloadableShaderModule(d.HUDMaterial,(()=>new Promise(((t,i)=>e(["./HUDMaterial.glsl"],t,i)))));const g={factor:0,units:-4},P=h.simpleBlendingParams(c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA);t.HUDMaterialTechnique=p,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
