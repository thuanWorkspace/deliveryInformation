/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/vec4f64","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/DefaultVertexAttributeLocations","../lib/OrderIndependentTransparency","../lib/Program","../lib/StencilUtils","../lib/TransparencyPassType","../materials/VisualVariablePassParameters","../../../../chunks/ColorMaterial.glsl","../../../webgl/renderState"],(function(e,t,a,r,i,l,s,n,o,c,u,p,d,h){"use strict";class P extends p.VisualVariablePassParameters{constructor(){super(...arguments),this.color=a.ZEROS}}class g extends l.ShaderTechnique{initializeProgram(e){return new o.Program(e.rctx,g.shader.get().build(this.configuration),s.Default3D)}_createPipeline(e,t){const a=this.configuration,i=e===u.TransparencyPassType.NONE,l=e===u.TransparencyPassType.FrontFace;return h.makePipelineState({blending:a.output!==r.ShaderOutput.Color&&a.output!==r.ShaderOutput.Alpha||!a.transparent?null:i?n.blendingDefault:n.oitBlending(e),culling:h.cullingParams(a.cullFace),depthTest:{func:n.oitDepthTest(e)},depthWrite:(i||l)&&a.writeDepth?h.defaultDepthWriteParams:null,colorWrite:h.defaultColorWriteParams,stencilWrite:a.hasOccludees?c.stencilWriteMaskOn:null,stencilTest:a.hasOccludees?t?c.stencilToolMaskBaseParams:c.stencilBaseAllZerosParams:null,polygonOffset:i||l?a.polygonOffset?f:null:n.getOITPolygonOffset(a.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}g.shader=new i.ReloadableShaderModule(d.ColorMaterial,(()=>new Promise(((t,a)=>e(["./ColorMaterial.glsl"],t,a)))));const f={factor:1,units:1};t.ColorMaterialPassParameters=P,t.ColorMaterialTechnique=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
