/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../core/floatRGBA","./ProceduralTextureRepository","../../../webgl/enums","../../../webgl/Texture","../../../webgl/TextureDescriptor"],(function(e,t,r,o,n,u){"use strict";function i(e,t){return new r.ProceduralTextureRepository((t=>{const{encodedData:r,textureSize:i}=a(t),c=new u.TextureDescriptor;return c.internalFormat=o.PixelFormat.RGBA,c.width=i,c.height=1,c.wrapMode=o.TextureWrapMode.REPEAT,new n.Texture(e,c,r)}),(e=>`${e.pattern.join(",")}-r${e.pixelRatio}`),t)}function a(e){const r=c(e),o=1/e.pixelRatio,n=l(e),u=p(e),i=(Math.floor(.5*(u-1))+.5)*o,a=[];let s=1;for(const t of r){for(let e=0;e<t;e++){const r=s*(Math.min(e,t-1-e)+.5)*o/i*.5+.5;a.push(r)}s=-s}const f=Math.round(r[0]/2),x=[...a.slice(f),...a.slice(0,f)],d=new Uint8Array(4*n);let T=0;for(const c of x)t.packFloatRGBA(c,d,T),T+=4;return{encodedData:d,textureSize:n}}function c(e){return e.pattern.map((t=>Math.round(t*e.pixelRatio)))}function l(e){if(null==e)return 1;const t=c(e);return Math.floor(t.reduce(((e,t)=>e+t)))}function p(e){return c(e).reduce(((e,t)=>Math.max(e,t)))}e.computeLongestPattern=p,e.computeTextureSize=l,e.createStippleTextureRepository=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
