/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/tslib.es6","../../../../Color","../../../../core/Accessor","../../../../core/colorUtils","../../../../core/accessorSupport/decorators/property","../../../../core/accessorSupport/ensureType","../../../../core/arrayUtils","../../../../core/has","../../../../core/accessorSupport/decorators/subclass","../visualElements/ExtendedLineVisualElement","../../webgl-engine/lib/Material","../../webgl-engine/materials/lineStippleUtils"],(function(e,t,o,l,i,r,s,n,c,a,h,d,p){"use strict";const u=.3;function g(e,t){t&&Object.assign(e,t)}class f{constructor(e){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=d.RenderOccludedFlag.Opaque,this.color=e.accent}}class y{constructor({colors:e,...t}){this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=e.accent,this.outlineColor=e.outline,this.renderOccluded=d.RenderOccludedFlag.Opaque,this.hoverOutlineColor=e.selectedOutline,g(this,t)}applyColor(e){this._apply(this.color,e)}applyOutline(e){this._apply(this.outlineColor,e)}applyHoverOutline(e){this._apply(this.hoverOutlineColor,e)}_apply(e,t){t.setParameters({color:i.unitRGBAFromColor(e),renderOccluded:this.renderOccluded})}}class C{constructor({colors:e,...t}){this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=d.RenderOccludedFlag.Transparent,this.minSquaredEdgeLength=900,this.color=i.multiplyOpacity(e.accent,.5),this.hoverColor=e.accent,g(this,t)}applyColor(e){this._apply(this.color,e)}applyHover(e){this._apply(this.hoverColor,e)}_apply(e,t){t.setParameters({color:i.unitRGBAFromColor(e),renderOccluded:this.renderOccluded})}}class O{constructor(e){this.vertex=new y({colors:e,color:e.accent,outlineColor:e.outline}),this.edge=new y({colors:e,color:i.desaturate(i.multiplyOpacity(e.accent,2/3),.5),outlineColor:i.multiplyOpacity(e.outline,.5),size:8,collisionPadding:8}),this.selected=new y({colors:e,color:e.selected,outlineColor:e.outline}),this.edgeOffset=new C({colors:e})}}class w{constructor({colors:e,...t}){this.width=1.5,this.stipplePattern=p.createStipplePatternSimple(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=d.RenderOccludedFlag.OccludeAndTransparent,this.color=e.selected,this.stippleOffColor=e.outline,this.innerColor=e.selected,g(this,t)}apply(e){e.color=i.unitRGBAFromColor(this.color),e.width=this.width,e.stipplePattern=this.stipplePattern,e.stippleOffColor=i.unitRGBAFromColor(this.stippleOffColor),e.falloff=this.falloff,e.innerWidth=this.innerWidth,e.innerColor=i.unitRGBAFromColor(this.innerColor),e.renderOccluded=this.renderOccluded}}class m{constructor({colors:e,...t}){this.size=4,this.outlineSize=1,this.shape="square",this.color=e.selected,this.outlineColor=e.outline,g(this,t)}apply(e){e.color=i.unitRGBAFromColor(this.color),e.size=this.size,e.outlineSize=this.outlineSize,e.outlineColor=i.unitRGBAFromColor(this.outlineColor),e.primitive=this.shape}}class A{constructor({colors:e,...t}){this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=u,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=e.selected,this.glowColor=e.accent,this.heightFillColor=e.accent,g(this,t)}apply(e,t=1){const l={glowColor:o.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:o.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*t*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in e?e.style=l:e.laserlineStyle=l}}class S{constructor(e){this.outline=new w({colors:e,color:e.stippleOff,renderOccluded:d.RenderOccludedFlag.OccludeAndTransparentStencil,stippleOffColor:e.stippleOn,innerWidth:0}),this.staged=new w({colors:e,color:e.stippleOn,renderOccluded:d.RenderOccludedFlag.OccludeAndTransparentStencil,innerColor:e.stagedSolid,stippleOffColor:e.stippleOff}),this.shadowStyle=new A({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1})}}class F{constructor(e){this.outline=new m({colors:e,color:e.selected,outlineColor:e.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new A({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:1.5,glowWidth:6,innerColor:e.selected,innerWidth:1,radius:2})}}class R extends w{constructor({colors:e,...t}){super({colors:e}),this.extensionType=h.ExtensionType.GROUND_RAY,g(this,t)}}class _{constructor(e){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineGraphics=new S(e),this.pointGraphics=new F(e),this.heightPlane=new A({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1}),this.heightBox=new A({colors:e,globalAlpha:u,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:0,heightFillColor:e.accent}),this.zVerticalLine=new R({colors:e,color:i.multiplyOpacity(e.accent,5*u/3),falloff:2,innerColor:i.multiplyOpacity(e.selected,0),renderOccluded:d.RenderOccludedFlag.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:h.ExtensionType.GROUND_RAY})}}e.Settings=class extends l{constructor(e){super(e)}get colors(){const e=this.getTheme().accentColor,t=e.a;return{accent:e,contrast:i.getContrast(e),selected:o.fromArray([255,255,255,t]),selectedOutline:o.fromArray([255,255,255,t]),staged:o.fromArray([12,207,255,t]),stagedSolid:o.fromArray([12,207,255,1]),outline:o.fromArray([0,0,0,.5*t]),stippleOn:o.fromArray([255,255,255,1]),stippleOff:o.fromArray([0,0,0,.5])}}get visualElements(){return new _(this.colors)}get manipulators(){return new O(this.colors)}get zManipulator(){return new f(this.colors)}},t.__decorate([r.property()],e.Settings.prototype,"colors",null),t.__decorate([r.property()],e.Settings.prototype,"visualElements",null),t.__decorate([r.property()],e.Settings.prototype,"manipulators",null),t.__decorate([r.property()],e.Settings.prototype,"zManipulator",null),t.__decorate([r.property()],e.Settings.prototype,"getTheme",void 0),e.Settings=t.__decorate([a.subclass("esri.views.3d.interactive.editingTools.settings.Settings")],e.Settings),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
