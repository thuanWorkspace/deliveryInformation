/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../chunks/tslib.es6","../core/Accessor","../core/Collection","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/subclass","./3d/support/cameraUtils","./support/GroundViewElevationSampler"],(function(e,t,r,s,a,i,n,o,p,d,l){"use strict";let u=class extends t{constructor(e){super(e),this.view=null,this.layerViews=new r}initialize(){this.addHandles(s.when((()=>this.view?.map?.ground),(e=>e.load()))),this.addHandles(this.layerViews.on("after-changes",(()=>this._layerViewsAfterChangesHandler())))}destroy(){this._set("view",null);for(const e of this.layerViews)e.destroy();this.layerViews.length=0}get elevationSampler(){return this.view?"2d"===this.view.type?null:this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new l({view:this.view}):null:null}get extent(){const e=this.view;return e&&"2d"!==e.type&&e.ready?d.toExtent(e,e.state.camera,e.pointsOfInterest.centerOnSurfaceFrequent.renderLocation):null}get updating(){return!this.suspended&&this.layerViews.some((e=>e.updating))}get suspended(){return!this.view||this.view.suspended}_layerViewsAfterChangesHandler(){this.removeHandles("updating"),this.addHandles(this.layerViews.map((e=>s.watch((()=>e.updating),(()=>this._updateUpdating()),s.sync))).toArray(),"updating"),this._updateUpdating()}_updateUpdating(){this.notifyChange("updating")}};e.__decorate([a.property({readOnly:!0})],u.prototype,"elevationSampler",null),e.__decorate([a.property({readOnly:!0})],u.prototype,"extent",null),e.__decorate([a.property({type:Boolean,readOnly:!0})],u.prototype,"updating",null),e.__decorate([a.property({constructOnly:!0})],u.prototype,"view",void 0),e.__decorate([a.property({type:r,readOnly:!0})],u.prototype,"layerViews",void 0),e.__decorate([a.property({readOnly:!0})],u.prototype,"suspended",null),u=e.__decorate([p.subclass("esri.views.GroundView")],u);return u}));
