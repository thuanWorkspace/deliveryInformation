/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","./aspectProcessor","./bandArithmeticProcessor","./compositeBandProcessor","./contrastProcessor","./convolutionProcessor","./curvatureProcessor","./extractBandProcessor","./focalStatisticsProcessor","./localProcessor","./maskProcessor","./ndviProcessor","./remapProcessor","./reprojectProcessor","./slopeProcessor","./stretchProcessor","../../../../webgl/contextUtils","../../../../webgl/enums","../../../../webgl/Texture","../../../../webgl/TextureDescriptor"],(function(e,t,r,o,s,c,n,a,i,u,l,p,d,x,m,P,T,b,f,g){"use strict";const w=new Map;function h(e,t,r){const o=new g.TextureDescriptor;return o.width=t,o.height=r,o.internalFormat=e.type===T.ContextType.WEBGL2?b.SizedPixelFormat.RGBA32F:b.PixelFormat.RGBA,o.samplingMode=b.TextureSamplingMode.NEAREST,o.dataType=b.PixelType.FLOAT,o.isImmutable=e.type===T.ContextType.WEBGL2,o.wrapMode=b.TextureWrapMode.CLAMP_TO_EDGE,o}function y(e,t,r,o){const{context:s,requestRender:c,allowDelayedRender:n}=e,a=o.createProgram(e,r);return n&&null!=c&&!a.compiled?(c(),null):(s.bindFramebuffer(t),s.setViewport(0,0,t.width,t.height),s.useProgram(a),a)}function F(e){return w.get(e.toLowerCase())}function v(e,t,r,o){const s=e.rasterFunction.name.toLowerCase(),c="reproject"===s?x:F(s);if(null==c)return;const n=y(e,r,o,c);if(!n)return;c.bindTextureAndUniforms(e,n,o),t.draw();const[a,i]=o.getRasterTextureSize("reproject"===s),u=h(e.context,a,i),l=new f.Texture(e.context,u);if(r.copyToTexture(0,0,a,i,0,0,l),"reproject"===s)o.rasterTexture=l,o.projected=!0;else{const t=e.hasBranches?e.rasterFunction.id:0;o.functionTextures[t]=l}}w.set("aspect",t),w.set("bandarithmetic",r),w.set("compositeband",o),w.set("convolution",c),w.set("contrastbrightness",s),w.set("curvature",n),w.set("extractband",a),w.set("statistics",i),w.set("local",u),w.set("mask",l),w.set("ndvi",p),w.set("remap",d),w.set("slope",m),w.set("stretch",P),e.createTextureDescriptor=h,e.process=v,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
