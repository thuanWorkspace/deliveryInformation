/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../../../Color","../../../../../../core/screenUtils","../../color","../../definitions","../Technique","../../../../../webgl/enums"],(function(e,t,o,a,r,n,l){"use strict";class i extends n.Technique{static getStorageSpec({attributes:e}){return{visualVariables:!0,attributes:e??null}}static _createRendererSchema(){return{type:"pie-chart",colors:new Float32Array(4*r.chartMaxFields),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}}static createOrUpdateRendererSchema(e,n){const{attributes:l,defaultColor:i,holePercentage:c,othersCategory:s,outline:u}=n,d=null!=e&&"pie-chart"===e.type?e:this._createRendererSchema();for(let o=0;o<r.chartMaxFields;o++){const e=o>=l.length?new t([0,0,0,0]):l[o].color;a.writeColor(d.colors,e,4*o)}return a.writeColor(d.defaultColor,i),a.writeColor(d.othersColor,s?.color),a.writeColor(d.outlineColor,u?.color),d.outlineWidth=o.pt2px(u?.width||0),d.holePercentage=c,d.sectorThreshold=s?.threshold||0,d.numberOfFields=l.length,d}static getVariation(e){return{numberOfFields:e.numberOfFields}}static getVariationHash(e){return e.numberOfFields}}i.type="pie-chart",i.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:l.DataType.SHORT},{location:1,name:"a_vertexOffset",count:2,type:l.DataType.SHORT},{location:2,name:"a_texCoords",count:2,type:l.DataType.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:l.DataType.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:l.DataType.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:l.DataType.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:l.DataType.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:l.DataType.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:l.DataType.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]},e.PieChartTechnique=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
