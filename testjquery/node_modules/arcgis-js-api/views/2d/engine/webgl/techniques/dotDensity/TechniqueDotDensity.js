/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../color","../../definitions","../Technique","../../../../../webgl/enums"],(function(e,t,o,a,n){"use strict";class r extends a.Technique{static getStorageSpec({attributes:e}){return{visualVariables:!1,attributes:e??null}}static _createRendererSchema(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}}static createOrUpdateRendererSchema(e,a){const{attributes:n,dotValue:r,referenceScale:i,dotSize:l,dotBlendingEnabled:d,seed:c,backgroundColor:s}=a,u=null!=e&&"dot-density"===e.type?e:this._createRendererSchema();u.dotValue=r,u.dotSize=l,u.dotScale=i,u.dotBlending=d,u.seed=c;const{colors:y,activeDots:g,backgroundColor:p}=u;for(let S=0;S<o.dotDensityMaxFields;S++){const e=S>=n.length?null:n[S].color;t.writeColor(y,e,4*S)}for(let t=0;t<8;t++)g[t]=t<a.attributes.length?1:0;return t.writeColor(p,s),u}static getVariation(e){return{ddDotBlending:e.dotBlending}}static getVariationHash(e){return e.dotBlending?1:0}}r.type="dot-density",r.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:n.DataType.SHORT},{location:1,name:"a_id",count:3,type:n.DataType.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:n.DataType.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:n.DataType.FLOAT}]}},e.DotDensityTechnique=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
