/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["./GraphicDisplayList","./WGLDisplayObject","./util/serializationUtils"],(function(s,i,t){"use strict";class e{constructor(){this.displayObjects=[],this._displayList=null}get displayObjectRegistry(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(const s of this.displayObjects)this._displayObjectRegistry.set(s.id,s)}return this._displayObjectRegistry}get displayList(){return this._displayList}computeDisplayList(){this._displayList=new s;for(const s of this.displayObjects)for(const i of s.displayRecords)this._displayList.addToList(i)}clone(){const s=new e;return this.displayObjects&&(s.displayObjects=this.displayObjects.map((s=>s.clone()))),s}serialize(s){return t.serializeList(s,this.displayObjects),s}_deserializeObjects(s){const t=s.readInt32(),e=new Array(t),l=new Map;for(let a=0;a<e.length;++a){const t=i.deserialize(s);e[a]=t,l.set(t.id,t)}this.displayObjects=e,this._displayList=null,this._displayObjectRegistry=l}static deserialize(s){const i=new e;return i._deserializeObjects(s),i}}return e}));
