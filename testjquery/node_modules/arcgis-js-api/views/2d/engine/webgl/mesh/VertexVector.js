/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../Utils","./VertexBuffer","../util/Writer"],(function(t,e,r,s){"use strict";class n{get vertexCount(){const t=this.stride/4,e=this.data.length/t;return e!==(0|e)&&console.debug("Corrupted stride"),e}constructor(t,e){this.data=t,this.stride=e}transfer(t,e){const r=this.data.buffer();t.vertexCount=this.vertexCount,t.data=r,t.stride=this.stride,e.push(r)}}class o{constructor(t,r,o){this.geometryType=t,this.indexVector=new s(Uint32Array,6*r),this.namedVectors={};const i=e.getStrides(t,o);for(const e in i){const t=i[e];let o;switch(t%4){case 0:case 2:o=new s(Uint32Array,t*r);break;case 1:case 3:o=new s(Uint8Array,t*r)}this.namedVectors[e]=new n(o,t)}}get(t){return this.namedVectors[t].data}getVector(t){return this.namedVectors[t]}transfer(t,e){const r=this.indexVector.buffer(),s={};let n;for(n in e.push(r),this.namedVectors){const t=this.namedVectors[n];s[n]={},t.transfer(s[n],e)}t.geometryType=this.geometryType,t.indexBuffer=r,t.namedBuffers=s,this.destroy()}intoBuffers(){const t=r.VertexBuffers.fromVertexVectors(this);return this.destroy(),t}destroy(){this.indexVector=null,this.namedVectors=null}}t.VertexVector=n,t.VertexVectors=o,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
