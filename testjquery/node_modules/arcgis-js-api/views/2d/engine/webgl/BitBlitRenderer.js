/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","./DefaultVertexAttributeLayouts","./shaders/BitBlitPrograms","../../../webgl/BufferObject","../../../webgl/enums","../../../webgl/ProgramTemplate","../../../webgl/VertexArrayObject"],(function(e,t,r,i,a,s,n,o){"use strict";class l{constructor(){this._initialized=!1}dispose(){this._program=t.disposeMaybe(this._program),this._vertexArrayObject=t.disposeMaybe(this._vertexArrayObject)}render(e,t,r,i){e&&(this._initialized||this._initialize(e),e.setBlendFunctionSeparate(s.BlendFactor.ONE,s.BlendFactor.ONE_MINUS_SRC_ALPHA,s.BlendFactor.ONE,s.BlendFactor.ONE_MINUS_SRC_ALPHA),e.bindVAO(this._vertexArrayObject),e.useProgram(this._program),t.setSamplingMode(r),e.bindTexture(t,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",i),e.drawArrays(s.PrimitiveType.TRIANGLE_STRIP,0,4),e.bindTexture(null,0),e.bindVAO())}_initialize(e){if(this._initialized)return!0;const t=n.createProgram(e,i.bitBlit);if(!t)return!1;const l=new Int8Array(16);l[0]=-1,l[1]=-1,l[2]=0,l[3]=0,l[4]=1,l[5]=-1,l[6]=1,l[7]=0,l[8]=-1,l[9]=1,l[10]=0,l[11]=1,l[12]=1,l[13]=1,l[14]=1,l[15]=1;const b=i.bitBlit.attributes,c=new o.VertexArrayObject(e,b,r.PosTex2b,{geometry:a.BufferObject.createVertex(e,s.Usage.STATIC_DRAW,l)});return this._program=t,this._vertexArrayObject=c,this._initialized=!0,!0}}e.BitBlitRenderer=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
