/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","./cpuMapped/FreeList"],(function(t,e){"use strict";class n{constructor(t,e,n,i,a){this.target=t,this.geometryType=e,this.materialKey=n,this.indexFrom=i,this.indexCount=a}get indexEnd(){return this.indexFrom+this.indexCount}extend(t){this.indexCount+=t}}class i{constructor(t,e){this.geometryType=0,this._target=t,this.geometryType=e}static from(t,e,n,a){const s=new i(t,e);if(null!=a)for(const i of a)n.seekIndex(i),s.addRecord(n);else for(;n.next();)s.addRecord(n);return s}addRecord(t){const i=this._target,a=this.geometryType,s=t.materialKey;let d=t.indexFrom,r=t.indexCount;const o=t.vertexFrom,l=t.vertexCount;if(r||(d=o,r=l),null==this._head){const t=new n(i,a,s,d,r);return void(this._head=new e.List(t))}let h=null,u=this._head;for(;u;){if(d<u.data.indexFrom)return this._insert(s,d,r,h,u);h=u,u=u.next}this._insert(s,d,r,h,null)}forEach(t){null!=this._head&&this._head.forEach(t)}*infos(){if(null!=this._head)for(const t of this._head.values())yield t}_insert(t,i,a,s,d){if(null==s&&null==d){const s=new n(this._target,this.geometryType,t,i,a);this._head=new e.List(s)}return null==s&&null!=d?this._insertAtHead(t,i,a,d):null!=s&&null==d?this._insertAtEnd(t,i,a,s):null!=s&&null!=d?this._insertAtMiddle(t,i,a,s,d):void 0}_insertAtHead(t,i,a,s){const d=i+a;if(t===s.data.materialKey&&d===s.data.indexFrom)s.data.indexFrom=i,s.data.indexCount+=a;else{const d=new n(this._target,this.geometryType,t,i,a);this._head=new e.List(d),this._head.next=s}}_insertAtEnd(t,i,a,s){if(s.data.materialKey===t&&s.data.indexEnd===i)s.data.indexCount+=a;else{const d=new n(this._target,this.geometryType,t,i,a),r=new e.List(d);s.next=r}}_insertAtMiddle(t,i,a,s,d){const r=i+a;if(s.data.materialKey===t&&s.data.indexEnd===i)s.data.indexCount+=a,s.data.materialKey===d.data.materialKey&&s.data.indexEnd===d.data.indexFrom&&(s.data.indexCount+=d.data.indexCount,s.next=d.next);else if(t===d.data.materialKey&&r===d.data.indexFrom)d.data.indexFrom=i,d.data.indexCount+=a;else{const r=new n(this._target,this.geometryType,t,i,a),o=new e.List(r);s.next=o,o.next=d}}}t.FeatureDisplayList=i,t.FeatureDisplayListInfo=n,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
