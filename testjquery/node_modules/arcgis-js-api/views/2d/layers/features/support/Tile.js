/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../../../core/ArrayPool","../../../../../geometry/Extent","../../../../../geometry/support/aaBoundingRect","../../../../../rest/support/QuantizationParameters","../../../tiling/TileKey"],(function(e,t,i,s,n,o){"use strict";class r{constructor(e,t){this.key=new o(0,0,0,0),this.bounds=s.create(),this.objectIds=new Set,this.key.set(t);const i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return i.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=t.acquire();for(let t=0;t<e.length;t++)i[t]=new r(this.tileInfoView,e[t]);return i}getQuantizationParameters(){return n.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}e.Tile=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
