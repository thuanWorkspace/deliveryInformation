/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../../symbols/cim/cimAnalyzer","../../../../symbols/cim/ExpandedCIM"],(function(e,t,a,n){"use strict";const i=async(e,t,i)=>{const r=new a.CIMAnalyzer(i,t);return new n.ExpandedCIM(await r.analyzeSymbolReference(e.data,!1),e.data,e.rendererKey,e.maxVVSize)};async function r(t,a,n,r){if(!t)return null;if("cim"===t.type)return i(t,a,n);if("web-style"===t.type){const{fetchCIMSymbolReference:l}=await new Promise(((t,a)=>e(["./webStyleUtils"],t,a))),s={type:"cim",data:await l(t,null,r)??void 0,rendererKey:t.rendererKey,maxVVSize:t.maxVVSize};return i(s,a,n)}return t}function l(e){if(!e)return null;const{avoidSDFRasterization:t,type:a,cim:n,url:i,materialHash:r,maxVVSize:l}=e,s={cim:n,type:a,mosaicHash:r,url:i,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(a){case"marker":l&&"size"in n&&(n.size=Math.max(l,n.size)),s.size=e.size,s.path=e.path,s.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":s.dashTemplate=e.dashTemplate;break;case"text":s.text=e.text,s.fontName=e.fontName}return s}t.cimLayerToRasterizationInfo=l,t.expandSymbol=r,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
