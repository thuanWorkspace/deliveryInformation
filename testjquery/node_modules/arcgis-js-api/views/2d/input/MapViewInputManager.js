/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../../chunks/tslib.es6","../../../core/Accessor","../../../core/maybe","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","./handlers/DoubleClickZoom","./handlers/DoubleTapDragZoom","./handlers/DragPan","./handlers/DragRotate","./handlers/GamepadNavigation","./handlers/KeyPan","./handlers/KeyRotate","./handlers/KeyZoom","./handlers/MouseWheelZoom","./handlers/PinchAction","../../input/BrowserEventSource","../../input/InputManager","../../input/handlers/PreventContextMenu","../../input/recognizers/DoubleTapDrag","../../input/recognizers/Drag","../../input/recognizers/ImmediateDoubleClick","../../input/recognizers/PointerClickHoldAndDrag","../../input/recognizers/SingleAndDoubleClick"],(function(e,t,n,o,i,r,a,s,c,l,u,p,w,h,d,g,v,y,m,_,D,b,P,A,M,T,k){"use strict";const C={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let z=class extends t{initialize(){const e=()=>this.view?.ready;this.addHandles([o.when((()=>!e()),(()=>this._disconnect())),o.when(e,(()=>this._connect()))])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=n.destroyMaybe(this._inputManager)}_connect(){const e=this.view.surface,t=new _.BrowserEventSource(e,this.view.input),n=[new M.ImmediateDoubleClick,new T.PointerClickHoldAndDrag,new k.SingleAndDoubleClick,new A.Drag(this.view.navigation),new P.DoubleTapDrag],i=new D.InputManager({eventSource:t,recognizers:n});i.installHandlers("prevent-context-menu",[new b.PreventContextMenu],D.ViewEventPriorities.INTERNAL),i.installHandlers("navigation",[new m.PinchRotateAndZoom(this.view),new h.GamepadNavigation(this.view),new y.MouseWheelZoom(this.view),new l.DoubleClickZoom(this.view),new l.DoubleClickZoom(this.view,[C.counter]),new p.DragPan(this.view,"primary"),new d.KeyPan(this.view,C.pan),new v.KeyZoom(this.view,C.zoom),new g.KeyRotate(this.view,C.rotate),new w.DragRotate(this.view,"secondary"),new u.DoubleTapDragZoom(this.view,"touch")],D.ViewEventPriorities.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,o.watch((()=>this.view?.navigation?.browserTouchPanEnabled),(e=>{this._source&&(this._source.browserTouchPanningEnabled=!e)}),o.initial)}get test(){return{inputManager:this._inputManager}}};e.__decorate([i.property()],z.prototype,"view",void 0),e.__decorate([i.property()],z.prototype,"latestPointerType",null),e.__decorate([i.property()],z.prototype,"latestPointerLocation",null),e.__decorate([i.property()],z.prototype,"multiTouchActive",null),z=e.__decorate([c.subclass("esri.views.2d.input.MapViewInputManager")],z);return z}));
