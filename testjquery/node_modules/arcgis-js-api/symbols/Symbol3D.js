/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../chunks/tslib.es6","../core/Collection","../core/collectionUtils","../core/Logger","../core/urlUtils","../core/Warning","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/reader","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","../portal/Portal","../chunks/persistableUrlUtils","./ExtrudeSymbol3DLayer","./FillSymbol3DLayer","./IconSymbol3DLayer","./LineSymbol3DLayer","./ObjectSymbol3DLayer","./PathSymbol3DLayer","./Symbol","./Symbol3DLayer","./TextSymbol3DLayer","./WaterSymbol3DLayer","./support/StyleOrigin","./support/Thumbnail"],(function(e,r,t,o,s,l,a,y,n,i,c,p,m,b,d,u,g,S,_,h,L,O,f,U,w,D,N){"use strict";const x={icon:S,object:h,line:_,path:L,fill:g,extrude:u,text:U,water:w},v=r.ofType({base:f,key:"type",typeMap:x,errorContext:"symbol-layer"});let j=class extends O{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,o=t?.type,s=o||r;this._set("symbolLayers",new s)}get color(){return null}set color(e){this.constructed&&o.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){t.referenceSetter(e,this._get("symbolLayers"))}readStyleOrigin(e,r,t){if(e.styleUrl&&e.name){const r=d.fromJSON(e.styleUrl,t);return new D({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new D({portal:t?.portal||b.getDefault(),styleName:e.styleName,name:e.name});t?.messages&&t.messages.push(new l("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:t,definition:e}))}writeStyleOrigin(e,r,t,o){if(e.styleUrl&&e.name){let t=d.toJSON(e.styleUrl,o);s.isAbsolute(t)&&(t=s.normalize(t)),r.styleOrigin={styleUrl:t,name:e.name}}else e.styleName&&e.name&&(e.portal&&o?.portal&&!s.hasSamePortal(e.portal.restUrl,o.portal.restUrl)?o?.messages&&o.messages.push(new l("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof f||e&&x[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};e.__decorate([a.property({json:{read:!1,write:!1}})],j.prototype,"color",null),e.__decorate([a.property({type:v,nonNullable:!0,json:{write:!0}}),y.cast(t.castForReferenceSetter)],j.prototype,"symbolLayers",null),e.__decorate([a.property({type:D})],j.prototype,"styleOrigin",void 0),e.__decorate([c.reader("styleOrigin")],j.prototype,"readStyleOrigin",null),e.__decorate([m.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],j.prototype,"writeStyleOrigin",null),e.__decorate([a.property({type:N.Thumbnail,json:{read:!1}})],j.prototype,"thumbnail",void 0),e.__decorate([a.property({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],j.prototype,"type",void 0),j=e.__decorate([p.subclass("esri.symbols.Symbol3D")],j);return j}));
