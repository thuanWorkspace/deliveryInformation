/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define((function(){"use strict";class t{applyColorSubstituition(t,a){if(!a)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:e,height:n}=t,r=this._rasterizationCanvas,i=r.getContext("2d",{willReadFrequently:!0});t!==r&&(r.width=e,r.height=n,i.drawImage(t,0,0,e,n));const o=i.getImageData(0,0,e,n).data;if(a)for(const l of a)if(l&&l.oldColor&&4===l.oldColor.length&&l.newColor&&4===l.newColor.length){const[t,a,e,n]=l.oldColor,[r,i,s,h]=l.newColor;if(t===r&&a===i&&e===s&&n===h)continue;for(let l=0;l<o.length;l+=4)t===o[l]&&a===o[l+1]&&e===o[l+2]&&n===o[l+3]&&(o[l]=r,o[l+1]=i,o[l+2]=s,o[l+3]=h)}const s=new ImageData(o,e,n);return i.putImageData(s,0,0),r}tintImageData(t,a){if(!a||a.length<4)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:e,height:n}=t,r=this._rasterizationCanvas,i=r.getContext("2d",{willReadFrequently:!0});t!==r&&(r.width=e,r.height=n,i.drawImage(t,0,0,e,n));const o=i.getImageData(0,0,e,n),s=new Uint8Array(o.data),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255];for(let g=0;g<s.length;g+=4)s[g]*=l[0],s[g+1]*=l[1],s[g+2]*=l[2],s[g+3]*=l[3];const h=new ImageData(new Uint8ClampedArray(s.buffer),e,n);return i.putImageData(h,0,0),r}}return t}));
