/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../request","../../core/Error","../../core/LRUCache","../../chunks/vec3f64","../../geometry/support/aaBoundingBox","./symbolLayerUtils3D"],(function(e,r,o,i,t,n,s,c){"use strict";let u=a();function a(){const e=50;return new t.LRUCache(e)}function l(){u=a()}async function h(e,r){if(e.resource?.href)return f(e.resource.href).then((e=>[e.width,e.height]));if(e.resource?.primitive)return null!=r?[r,r]:[256,256];throw new i("symbol3d:invalid-symbol-layer","symbol layers of type Icon must have either an href or a primitive resource")}function f(e){return o(e,{responseType:"image"}).then((e=>e.data))}async function y(r,o=null){if(!r.isPrimitive){const o=r.resource.href;if(!o)throw new i("symbol:invalid-resource","The symbol does not have a valid resource");const t=u.get(o);if(void 0!==t)return t;const{fetch:c}=await new Promise(((r,o)=>e(["../../views/3d/layers/graphics/objectResourceUtils"],r,o))),a=await c(o,{disableTextures:!0}),l=s.size(a.referenceBoundingBox,n.create());return u.put(o,l),l}if(!r.resource?.primitive)throw new i("symbol:invalid-resource","The symbol does not have a valid resource");const t=s.create(c.objectSymbolLayerPrimitiveBoundingBox(r.resource.primitive));if(null!=o)for(let e=0;e<t.length;e++)t[e]*=o;return s.size(t,n.create())}r.clearBoundingBoxCache=l,r.computeIconLayerResourceSize=h,r.computeObjectLayerResourceSize=y,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));
