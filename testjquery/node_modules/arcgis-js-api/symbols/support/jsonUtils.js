/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../symbols","../../core/Error","../../layers/support/layerUtils","../Symbol3D","./symbolConversion","../WebStyleSymbol"],(function(e,n,o,t,l,s,r){"use strict";function i(e,n,o,t){const l=u(e,{},{context:t,isLabelSymbol:!1});null!=l&&(n[o]=l)}function a(e,n,o,t){const l=u(e,{},{context:t,isLabelSymbol:!0});null!=l&&(n[o]=l)}function b(e){return e instanceof l||e instanceof r}function u(e,n,l){if(null==e)return null;const{context:r,isLabelSymbol:i}=l,a=r?.origin,u=r?.messages;if("web-scene"===a&&!b(e)){const t=s.to3D(e,{retainCIM:!0,hasLabelingContext:i});return null!=t.symbol?t.symbol.write(n,r):(u?.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:t.error})),null)}return("web-map"===a||"portal-item"===a&&!t.isSceneServiceLayer(r?.layer))&&b(e)?(u?.push(new o("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(n,r)}function y(e,o){return n.readSymbol(e,null,o)}e.fromJSON=y,e.write=i,e.writeLabelSymbol=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
