/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../../core/lang","../../support/utils"],(function(e,s){"use strict";function a(e,a,t){let p=null,m=null;if(a&&(p=s.getBasemapId(a,e,!1),p)){const e=s.getBasemapGroup(p);null!=e&&(m=e)}return!p&&t&&(p="dark"===t?"dark-gray":"gray",m=t),p||m||(p="gray",m="light"),{basemapId:p,basemapTheme:m}}class t{constructor(e){const{name:a,label:t,description:p,schemes:m}=e;this.name=a,this.label=t,this.description=p,this.schemes=m;const o=e.basemapGroups||s.defaultBasemapGroups;let n=[];o&&Object.keys(o).forEach((e=>{n=n.concat(o[e])})),this.supportedBasemaps=n,this.basemapGroups=o}isBasemapSupported(e){const a=s.getBasemapId(e,this.supportedBasemaps);return!(!a||!this.supportedBasemaps.includes(a))}getRawSchemes(t){const{basemapId:p,basemapTheme:m}=a(this.supportedBasemaps,t.basemap,t.basemapTheme);let o=m;if(p){const e=s.getBasemapGroup(p,this.basemapGroups);null!=e&&(o=e)}let n=t.geometryType;"multipoint"===n?n="point":"mesh"===n&&(n="polygon");const r=this.schemes[n]||this.schemes.default;return{schemesInfo:e.clone(r[o]),basemapId:p,basemapTheme:m}}}return t}));
