/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../PopupTemplate","../../core/Error","../../intl/messages","./support/utils"],(function(e,n,r,t,a){"use strict";async function s(e){const{layer:n,renderer:t}=e;await n.load();const a=t||n.renderer;if("unique-value"!==a?.type)throw new r("unique-values-popup:invalid-parameters","renderer.type must be 'unique-value'");return{layer:n,renderer:a}}async function i(e,r,t="divide"){const{fieldInfos:s,expressionInfos:i}=await a.getFieldAndExpressionInfos({renderer:e,layer:r,normFieldExpressionTemplate:t});return new n({content:await a.getContentFromFieldInfos(r,{fieldInfos:s,expressionInfos:i}),fieldInfos:s,expressionInfos:i})}async function o(e){const[{renderer:n,layer:r},o]=await Promise.all([s(e),t.fetchMessageBundle("esri/smartMapping/t9n/smartMapping")]),u={name:"unique-values",title:o.uniqueValues,value:await i(n,r)},l=[];return a.hasNormalizedField(n)&&l.push({name:"unique-values-percent",title:o.uniqueValuesNormFieldAsPercent,value:await i(n,r,"percentage")}),{primaryTemplate:u,secondaryTemplates:l}}e.getTemplates=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
