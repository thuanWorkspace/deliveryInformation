/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","../support/utils"],(function(e,t,r,n){"use strict";async function a(e){e=await n.processRasterRendererParameters(e);const{rasterInfo:a}=e.layer;if(1===a.bandCount)throw new t("raster-rgb-renderer:not-supported","Only multiband image is supported");const{rgbBandIds:s}=e;if(s&&3!==s.length)throw new t("raster-rgb-renderer:invalid-parameters","rgb band ids must have exactly three 0-based band indices");if(!s){const t=r.getDefaultBandCombination(a);t&&t.length<3&&2===a.bandCount?e.rgbBandIds=[0,1,1]:e.rgbBandIds=t}return e}async function s(e){const t=(e=await a(e)).layer,{rasterInfo:n}=t,{rgbBandIds:s}=e,i={bandIds:s,stretchType:e.stretchType,includeStatisticsInStretch:e.includeStatisticsInStretch};let c=r.createStretchRenderer(n,i);return e.estimateStatistics&&c.dynamicRangeAdjustment&&(await t.updateRasterInfoWithEstimatedStats({rasterFunction:e.rasterFunction,signal:e.signal}),c=r.createStretchRenderer(n,i)),d(c,e),{renderer:c,rgbBandIds:s}}function d(e,t){const{gamma:r,useGamma:n,dynamicRangeAdjustment:a}=t;3===r?.length&&(e.gamma=r),null!=n&&(e.useGamma=n),null!=a&&(e.dynamicRangeAdjustment=a)}e.createRenderer=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
