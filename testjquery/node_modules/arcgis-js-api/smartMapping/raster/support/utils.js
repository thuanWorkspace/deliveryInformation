/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/Error","../../../renderers/support/rasterRendererHelper","./adapters/ImageryLayerAdapter","./adapters/ImageryTileLayerAdapter"],(function(e,r,a,t,s){"use strict";const n={imagery:{adapter:t,label:"ImageryLayer"},"imagery-tile":{adapter:s,label:"ImageryTileLayer"},wcs:{adapter:s,label:"WCSLayer"}},l={"raster-stretch":"raster-stretch","unique-value":"raster-unique-value","raster-rgb":"raster-rgb","class-breaks":"raster-class-breaks","raster-colormap":"raster-colormap","raster-shaded-relief":"raster-shaded-relief","vector-field":"raster-vector-field",flow:"raster-flow"},o=Object.keys(n).map((e=>n[e].label));function i(e){if("raster-layer-adapter"===e.type)return e;const r=n[e.type]?.adapter;return null==r?null:new r({layer:e})}async function d(e){const r=i((e=await c(e)).layer),t=await r.generateRasterInfo(e),s=a.getSupportedRendererTypes(t,!0).map((e=>l[e])),n=a.createDefaultRenderer(t),{bandCount:o}=t;return o>1&&s.push("raster-rgb"),!s.includes("raster-class-breaks")&&1===o&&+r.layer?.version>=10.3&&s.push("raster-class-breaks"),{supportedTypes:s,defaultRenderer:n}}async function u(e){const r=i((e=await c(e)).layer),t=await r.generateRasterInfo(e);return a.getDefaultBandCombination(t)}async function c(e){const{layer:a}=e;if(!a)throw new r("raster-renderer-creator:missing-parameters","'layer' parameter is required");const t=i(a);if(null==t)throw new r("raster-renderer-creator:invalid-parameters","'layer' must be one of these types: "+o.join(", "));await t.load();const s=e.rasterFunction??e.renderingRule;return await t.updateRasterInfo({rasterFunction:s,signal:e.signal}),{...e,layer:t,rasterFunction:s}}e.createRasterLayerAdapter=i,e.getDefaultBandCombination=u,e.getSupportedRendererInfo=d,e.processRasterRendererParameters=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
