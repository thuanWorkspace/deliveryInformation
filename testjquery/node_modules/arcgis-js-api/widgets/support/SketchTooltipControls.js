/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","../../chunks/tslib.es6","../../core/arrayUtils","../../core/maybe","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/accessorSupport/decorators/subclass","../Widget","./componentsUtils","./globalCss","./LabeledSwitch","./legacyIcon","./widgetUtils","./decorators/messageBundle","./jsxFactory","./SketchTooltipControls/SketchTooltipControlsViewModel","./SketchTooltipControls/VisibleElements"],(function(e,t,o,l,s,i,n,r,a,p,c,d,h,b,g,_,u,y){"use strict";const w="esri-sketch-tooltip-controls",v={base:w,widgetIcon:h.legacyIcon.gear,block:`${w}__block`,blockContent:`${w}__block-content`,hintIcon:`${w}__hint-icon`};let k=class extends a{constructor(e,t){super(e,t),this._defaultViewModel=null,this.icon=null,this.iconClass=v.widgetIcon,this.visibleElements=new y,this.viewType=void 0,this._onTooltipsEnabledChange=e=>{this.tooltipOptions.enabled=e},this._onLabelsEnabledChange=e=>{this.labelOptions.enabled=e};const{tooltipOptions:o,labelOptions:l,viewModel:s}=e;this.viewModel=s??(this._defaultViewModel=new u({tooltipOptions:o,labelOptions:l}))}loadDependencies(){return Promise.all([p.loadCalciteComponents({block:()=>new Promise(((t,o)=>e(["../../chunks/calcite-block"],t,o)))}),d.loadLabeledSwitchComponents()])}render(){const{label:e,visibleElements:t}=this,o=this._renderContent();return _.tsx("div",{"aria-label":e,class:this.classes(v.base,c.globalCss.widget)},o?_.tsx("calcite-block",{class:v.block,heading:t.header?this.label:"",key:"content-block",open:!0},_.tsx("div",{class:v.blockContent,key:"content"},o)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}set viewModel(e){e!==this._get("viewModel")&&(null!=this._defaultViewModel&&this._defaultViewModel===e||(this._defaultViewModel=l.destroyMaybe(this._defaultViewModel)),this._set("viewModel",e))}_renderContent(){const{visibleElements:e,viewType:t}=this,l=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&"2d"!==t?this._renderLabelsToggle():null].filter(o.isSome);return 0===l.length?null:l}_renderTooltipsToggle(){const{messages:e,tooltipOptions:t}=this;return _.tsx(d.LabeledSwitch,{checked:t.enabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){const{messages:e,labelOptions:t}=this;return _.tsx(d.LabeledSwitch,{checked:t.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}};t.__decorate([s.property()],k.prototype,"icon",void 0),t.__decorate([s.property()],k.prototype,"iconClass",void 0),t.__decorate([s.property()],k.prototype,"label",null),t.__decorate([s.property()],k.prototype,"labelOptions",null),t.__decorate([s.property()],k.prototype,"tooltipOptions",null),t.__decorate([s.property()],k.prototype,"viewModel",null),t.__decorate([s.property({type:y,nonNullable:!0})],k.prototype,"visibleElements",void 0),t.__decorate([s.property(),g.messageBundle("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],k.prototype,"messages",void 0),t.__decorate([s.property({type:String})],k.prototype,"viewType",void 0),k=t.__decorate([r.subclass("esri.widgets.support.SketchTooltipControls")],k);return k}));
