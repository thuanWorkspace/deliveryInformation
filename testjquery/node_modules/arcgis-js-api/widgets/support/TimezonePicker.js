/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","../Widget","./componentsUtils","./timeWidgetUtils","./widgetUtils","./decorators/messageBundle","./jsxFactory"],(function(e,t,o,s,i,r,n,c,p,d,l,a,u,m){"use strict";const _="esri-timezone-picker",g={base:_,trigger:`${_}__trigger`,itemTitle:`${_}__item-title`,itemDescription:`${_}__item_description`};function h(e,t){return e.find((e=>f(e)===t))}function y(e,t){return e.find((e=>e.utcOffset===t))}function f(e){return e?`${e.utcOffset}-${e.long}`:void 0}t.TimezonePicker=class extends p{constructor(e,t){super(e,t),this.value=null,this.onChange=null,this.open=!1,this.onOpen=null,this.onClose=null,this._selectedId=null,this._onOpen=()=>{this.open=!0,this.onOpen?.()},this._onClose=()=>{this.open=!1,this.onClose?.()},this._killEvent=e=>(e.stopPropagation(),!0),this._onChange=e=>{const t=e.target,o=t.selectedItems?.[0].getAttribute("data-id"),s=h(this._gmtOffsets,o)?.utcOffset;s&&(this._selectedId=o,this.onChange?.(s))}}loadDependencies(){return d.loadCalciteComponents({button:()=>new Promise(((t,o)=>e(["../../chunks/calcite-button"],t,o))),dropdown:()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown"],t,o))),"dropdown-group":()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown-group"],t,o))),"dropdown-item":()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown-item"],t,o)))})}render(){const e=this._messages;if(!e)return m.tsx("div",{class:g.base,key:"empty"});const t=this._selectedItem,o=f(t);return m.tsx("div",{class:g.base,key:"container",onpointerdown:this._killEvent},m.tsx("calcite-dropdown",{open:this.open,overlayPositioning:"fixed",placement:"bottom-end",scale:"s",onCalciteDropdownClose:this._onClose,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownSelect:this._onChange},m.tsx("calcite-button",{appearance:"transparent",class:g.trigger,key:"trigger",kind:"neutral",scale:"s",slot:"trigger",tabIndex:0,title:e.chooseTimezone},t?.short??""),m.tsx("calcite-dropdown-group",{selectionMode:"single"},this._gmtOffsets.map((e=>{const t=f(e);return m.tsx("calcite-dropdown-item",{"data-id":t,key:t,selected:o===t},m.tsx("div",{class:g.itemTitle,key:"title"},e.shortWithUTC),m.tsx("div",{class:g.itemDescription,key:"description"},e.long))})))))}get _gmtOffsets(){const e=this._messages;return e?l.getTimezoneInfos(e):[]}get _selectedItem(){const e=this._gmtOffsets,t=this.value,o=h(e,this._selectedId);return o?.utcOffset===t?o:y(e,t)}},o.__decorate([s.property()],t.TimezonePicker.prototype,"value",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"onChange",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"open",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"onOpen",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"onClose",void 0),o.__decorate([s.property(),u.messageBundle("esri/widgets/support/t9n/timezone")],t.TimezonePicker.prototype,"_messages",void 0),o.__decorate([s.property()],t.TimezonePicker.prototype,"_gmtOffsets",null),o.__decorate([s.property()],t.TimezonePicker.prototype,"_selectedItem",null),o.__decorate([s.property()],t.TimezonePicker.prototype,"_selectedId",void 0),t.TimezonePicker=o.__decorate([c.subclass("esri.widgets.support.TimezonePicker")],t.TimezonePicker),t.css=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
