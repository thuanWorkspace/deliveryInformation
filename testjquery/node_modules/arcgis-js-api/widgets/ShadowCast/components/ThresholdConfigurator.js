/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/tslib.es6","../../../core/maybe","../../../core/reactiveUtils","../../../core/timeUtils","../../../core/uuid","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","../../../intl/number","../../Slider","../../Widget","../css","./Label","./LabeledColorPicker","../../support/componentsUtils","../../support/widgetUtils","../../support/decorators/messageBundle","../../support/jsxFactory"],(function(e,o,r,s,t,l,i,a,n,c,u,d,h,p,m,v,b,g,_,C,y,S){"use strict";o.ThresholdConfigurator=class extends m{constructor(e){super(e),this.colorPickerVisible=!0,this._valueSliderId=`value-slider-${i.generateUUID()}`,this._colorPickerId=`color-picker-${i.generateUUID()}`,this._valueSlider=new p({visibleElements:{labels:!1,rangeLabels:!1},steps:l.convertTime(30,"minutes","milliseconds"),labelFormatFunction:(e,o)=>{const r=l.convertTime(e,"milliseconds","hours");return"tick"===o?h.formatNumber(r,{maximumFractionDigits:0}):""}}),this._onColorChange=e=>{this.options.color=e}}initialize(){const e=({value:e})=>{this.options.value=e};this.addHandles([t.watch((()=>{const{value:e,minValue:o,maxValue:r}=this.options;return{value:e,minValue:o,maxValue:r}}),(({value:e,minValue:o,maxValue:r})=>{const s=this._valueSlider;s.min=o,s.max=r,s.values=[e];const t=r-o,i=Math.floor(l.convertTime(t,"milliseconds","hours"));s.tickConfigs=[{mode:"count",values:2*i+1,labelsVisible:!1},{mode:"count",values:i+1,labelsVisible:!0}]}),t.syncAndInitial),this._valueSlider.on("thumb-change",e),this._valueSlider.on("thumb-drag",e)])}loadDependencies(){return _.loadCalciteComponents({label:()=>new Promise(((o,r)=>e(["../../../chunks/calcite-label"],o,r)))})}destroy(){this._valueSlider=s.destroyMaybe(this._valueSlider)}render(){const e=this._messages.threshold,{color:o}=this.options;return S.tsx("div",{class:v.thresholdConfiguratorCss.base},S.tsx(b.Label,{class:v.thresholdConfiguratorCss.valueLabel,for:this._valueSliderId,label:e.valueLabel},this._valueSlider.render()),this.colorPickerVisible?S.tsx(g.LabeledColorPicker,{id:this._colorPickerId,label:e.colorLabel,value:o,onChange:this._onColorChange}):null)}get testData(){return{valueSlider:this._valueSlider}}},r.__decorate([a.property()],o.ThresholdConfigurator.prototype,"options",void 0),r.__decorate([a.property()],o.ThresholdConfigurator.prototype,"colorPickerVisible",void 0),r.__decorate([a.property()],o.ThresholdConfigurator.prototype,"testData",null),r.__decorate([a.property()],o.ThresholdConfigurator.prototype,"_valueSlider",void 0),r.__decorate([a.property(),y.messageBundle("esri/widgets/ShadowCast/t9n/ShadowCast")],o.ThresholdConfigurator.prototype,"_messages",void 0),o.ThresholdConfigurator=r.__decorate([d.subclass("esri.widgets.ShadowCast.components.ThresholdConfigurator")],o.ThresholdConfigurator),Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}));
