/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/arrayUtils","../../../layers/support/fieldUtils","./PanelContent","../../FeatureTemplates/ItemList","../../support/widgetUtils","../../support/jsxFactory"],(function(e,t,a,l,n,s,o){"use strict";const r=()=>l.loadPanelContentComponents();function i({editableItems:e,filterText:a,id:s,messagesTemplates:r,onFilterTextChange:i,onSelectFeature:u,workflow:c}){const m=new Map,f=c.data.candidates;let p=0;f.map((e=>({label:d(e),id:e.attributes[e.layer.objectIdField],data:e}))).filter((t=>{const{label:l,data:n}=t,s=a.toLowerCase(),{title:o}=n.layer,r=e.find((e=>e.layer===n.layer));if(!r)return null;const{attachmentsOnUpdateEnabled:i,supports:d}=r;return(d.includes("update")||d.includes("delete")||i)&&(!s||l?.toLowerCase().includes(s)||o?.toLowerCase().includes(s))})).filter(t.isSome).forEach((e=>{p++;const t=e.data.layer;m.has(t)?m.get(t)?.items.push(e):m.set(t,{id:`${t.id}`,label:t.title??"",items:[e]})}));const y=e.toArray().map((({layer:e})=>m.get(e))).filter(t.isSome),b=p>10||a.length>0;return o.tsx(l.PanelContent,{key:"feature-list"},o.tsx(l.PanelContentSection,null,n.ItemList({enableListScroll:!1,filterEnabled:b,filterText:a,id:s,items:y,messages:{filterPlaceholder:r.filterPlaceholder,noItems:r.noItems,noMatches:r.noMatches},onFilterChange:e=>i(e),onItemMouseEnter:e=>u(e.data),onItemMouseLeave:()=>u(null),onItemSelect:e=>u(e.data,!0)})))}function d(e){const t=e.layer;if(!t)return null;const l=t.fieldsIndex.get(t.objectIdField),n=l.alias||l.name,{attributes:s}=e,o=a.getDisplayFieldName(t);return o&&s[o]&&`${s[o]}`||`${n}: ${s[l.name]}`}e.FeatureList=i,e.loadFeatureListComponents=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
