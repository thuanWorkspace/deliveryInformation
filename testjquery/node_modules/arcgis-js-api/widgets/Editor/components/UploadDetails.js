/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../geometry/support/meshErrors","../../../layers/graphics/sources/support/uploadAssetErrors","./FooterActions","./PanelContent","../../support/componentsUtils","../../support/widgetUtils","../../support/jsxFactory"],(function(e,t,s,o,l,i,n,r,a){"use strict";const c="esri-editor__upload-details",d={base:c,status:`${c}__status`,titleWrapper:`${c}__title-wrapper`,title:`${c}__title`,description:`${c}__description`,loader:`${c}__loader`,iconSuccess:`${c}__icon ${c}__icon--success`,iconError:`${c}__icon ${c}__icon--error`,fileList:`${c}__file-list`,file:`${c}__file`,fileIcon:`${c}__file-icon`,fileName:`${c}__file-name`},p=()=>Promise.all([n.loadCalciteComponents({icon:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-icon"],t,s))),loader:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-loader"],t,s)))}),l.loadFooterActionsComponents(),i.loadPanelContentComponents()]);function u(e){const{messages:t,key:s,upload:o}=e;return a.tsx(a.tsxFragment,null,a.tsx(i.PanelContent,{key:s??"upload-details"},a.tsx(i.PanelContentSection,null,f(e))),"error"===o.state?a.tsx(l.FooterActions,{buttons:[{onClick:()=>o.retry(),label:t.modelUploads.error.uploadNew,iconStart:"upload-to"}],key:"upload-details-footer-actions"}):null)}function f(e){const t=m(e);return t?a.tsx("div",{class:d.base,"data-testid":"upload-details",key:"upload-details-content"},a.tsx("div",{class:d.status,key:"status"},t.iconContent,a.tsx("div",{class:d.titleWrapper,key:"text"},a.tsx("div",{class:d.title,key:"title"},t.title),a.tsx("div",{class:d.description,key:"description"},t.description))),g(e.upload)):null}function m({helpMessage:e,messages:t,upload:s}){switch(s.state){case"pending":{const{title:e,description:o}=t.modelUploads.pending;return{title:e,description:o,iconContent:a.tsx("calcite-loader",{"aria-hidden":"true",class:d.loader,label:"",scale:"s",type:"determinate",value:Math.min(Math.round(100*s.progress),1===s.progress?100:99)})}}case"success":{const{title:s}=t.modelUploads.success;return{title:s,description:e||t.helpMessages3d.mesh,iconContent:a.tsx("calcite-icon",{class:r.classes(d.iconSuccess),icon:"check",scale:"l"})}}case"error":{const{title:e}=t.modelUploads.error;return{title:e,description:_(s.error,t),iconContent:a.tsx("calcite-icon",{class:r.classes(d.iconError),icon:"exclamation-mark-circle",scale:"l"})}}default:return null}}function _(e,t){if(!e)return null;const l=t.modelUploads.error.messages;switch(e.constructor){case s.NoModelError:return l.noModel;case s.MultipleModelsError:return l.multipleModels;case o.Convert3DFailedError:return l.conversionFailed;default:return l.default}}function g(e){return a.tsx("div",{class:d.fileList,key:"file-list"},e.files.map((e=>a.tsx("div",{class:d.file,key:`file-${e.name}`},a.tsx("calcite-icon",{class:d.fileIcon,icon:y(e),scale:"s"}),a.tsx("span",{class:d.fileName},x(e.name))))))}function x(e){return e.split("/").pop()?.split("\\").pop()??""}function y(e){const t=e.name.split(".").pop()?.toLowerCase();return(t?$[t]:null)??C}const C="file",k="file-shape",h="file-image",$={glb:k,gltf:k,jpeg:h,jpg:h,png:h,svg:h,zip:"file-zip"};t.UploadDetails=u,t.css=d,t.loadUploadDetailsComponents=p,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
