/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/tslib.es6","../../../core/throttle","../../../core/unitFormatUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","../../Widget","../css","../support/constants","../../support/componentsUtils","../../support/widgetUtils","../../support/decorators/messageBundle","../../support/jsxFactory"],(function(t,e,s,i,a,r,o,n,c,l,d,p,u,h,g,_,v){"use strict";const m=100;e.Statistics=class extends d{constructor(t,e){super(t,e),this._updateLayout=t=>{const e=t.parentElement,s=t.style.display;e?.removeChild(t),document.body.appendChild(t),t.style.display="block";let i=80;for(const a of t.childNodes)a instanceof HTMLElement&&(i=Math.max(i,a.offsetWidth));document.body.removeChild(t),e?.appendChild(t),t.style.display=s,t.style.setProperty("--max-width",`${i}px`)},this._updateLayoutThrottled=i.throttle(this._updateLayout,m)}loadDependencies(){return h.loadCalciteComponents({icon:()=>new Promise(((e,s)=>t(["../../../chunks/calcite-icon"],e,s)))})}initialize(){this.addHandles(this._updateLayoutThrottled)}render(){return v.tsx("div",{afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled,bind:this,class:p.statisticsCss.base},this._renderStatistics())}_renderStatistics(){const t=this._messages?.statistics;return t?[this._renderDistanceStatistic("maxDistance",t.maxDistance),this._renderElevationStatistic("elevationGain",t.gain),this._renderElevationStatistic("elevationLoss",t.loss),this._renderElevationStatistic("minElevation",t.minElevation),this._renderElevationStatistic("maxElevation",t.maxElevation),this._renderElevationStatistic("avgElevation",t.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",t.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",t.avgSlope)]:[]}_renderDistanceStatistic(t,e){const s=u.getConfig().formatPrecision,i=this._renderValue(t,(t=>{const e=this.effectiveUnits.distance;return a.formatDecimal(this._messagesUnits,t,e,s)}));return this._renderStatistic(e,i)}_renderElevationStatistic(t,e){const s=u.getConfig().formatPrecision,i=this._renderValue(t,(t=>{const e=this.effectiveUnits.elevation;return a.formatDecimal(this._messagesUnits,t,e,s)}));return this._renderStatistic(e,i)}_renderSlopeStatistic(t,e,s){const i=u.getConfig().formatPrecision,r=v.tsx("div",{class:p.statisticsCss.slopeValue,key:"slope-up"},v.tsx("calcite-icon",{icon:"arrow-up",scale:"s"}),this._renderValue(t,(t=>a.formatAngleDegrees(t,"degrees","geographic","geographic",i))),v.tsx("calcite-icon",{icon:"arrow-down",scale:"s"}),this._renderValue(e,(t=>a.formatAngleDegrees(t,"degrees","geographic","geographic",i))));return this._renderStatistic(s,r)}_renderStatistic(t,e){return v.tsx("div",{class:p.statisticsCss.statistic},v.tsx("label",{class:p.statisticsCss.statisticLabel},t),v.tsx("div",{class:p.statisticsCss.statisticValue},e))}_renderValue(t,e){const s=this.line,i=1===s.progress?s.statistics:null,a=i?.[t];return null!=a?e(a):u.notAvailable}},s.__decorate([r.property()],e.Statistics.prototype,"effectiveUnits",void 0),s.__decorate([r.property()],e.Statistics.prototype,"line",void 0),s.__decorate([r.property(),_.messageBundle("esri/widgets/ElevationProfile/t9n/ElevationProfile")],e.Statistics.prototype,"_messages",void 0),s.__decorate([r.property(),_.messageBundle("esri/core/t9n/Units")],e.Statistics.prototype,"_messagesUnits",void 0),e.Statistics=s.__decorate([l.subclass("esri.widgets.ElevationProfile.Statistics")],e.Statistics),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
