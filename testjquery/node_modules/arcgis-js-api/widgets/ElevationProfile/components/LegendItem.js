/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../../chunks/tslib.es6","../../../intl","../../../core/maybe","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","../../Widget","../css","./Statistics","../support/intlUtils","../../support/componentsUtils","../../support/widgetUtils","../../support/jsxFactory","../../../intl/substitute"],(function(e,t,s,i,o,l,r,n,c,a,d,p,h,g,b,u,m,y,_){"use strict";t.LegendItem=class extends p{constructor(e,t){super(e,t),this.checkboxVisible=!0,this.expanded=!1}loadDependencies(){return u.loadCalciteComponents({action:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-action"],t,s))),checkbox:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-checkbox"],t,s))),label:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-label"],t,s))),tooltip:()=>new Promise(((t,s)=>e(["../../../chunks/calcite-tooltip"],t,s)))})}initialize(){this._statistics=new g.Statistics(this._statisticsProps),this.addHandles(l.watch((()=>this._statisticsProps),(e=>this._statistics.set(e))))}destroy(){this._statistics=o.destroyMaybe(this._statistics)}render(){const e=this.expanded;return y.tsx("div",{class:this.classes(h.legendItemCss.base,{[h.legendItemCss.disabled]:this.disabled,[h.legendItemCss.expanded]:e}),key:this},this._renderColorIndicator(),y.tsx("div",{class:h.legendItemCss.header,key:"header"},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),e?y.tsx("div",{class:h.legendItemCss.content,key:"content"},this._statistics.render()):null)}get disabled(){return!this.line.available}get _statisticsProps(){return{line:this.line,effectiveUnits:this.effectiveUnits}}_renderColorIndicator(){return y.tsx("div",{class:h.legendItemCss.colorIndicator,key:"color-indicator",styles:{backgroundColor:this.line.color.toCss()}})}_renderCollapseToggleButton(){const{expanded:e,messages:t}=this,s=e?t.hideDetails:t.showDetails;return y.tsx("calcite-action",{appearance:"transparent",bind:this,class:h.legendItemCss.collapseToggle,"data-testid":"legend-toggle",icon:e?"chevron-up":"chevron-down",key:"collapse-toggle",onclick:this._onCollapseToggleClick,scale:"s",text:s})}_onCollapseToggleClick(){this.onExpandedToggle()}_renderLabelWithCheckbox(){const{line:e,checkboxVisible:t,disabled:s,messages:i}=this,o=`label-${e.id}`;return y.tsx("calcite-label",{class:h.legendItemCss.label,disabled:s,key:o,layout:"inline"},t?this._renderCheckbox(e.id):null,b.getTranslatedLineTitle(e,i))}_renderCheckbox(e){const{disabled:t,line:s,messages:i}=this,o=s.visible,l=`${e}-checkbox`,r=o?i.hideProfile:i.showProfile,n=_.substitute(r,{name:b.getTranslatedLineTitle(s,i)});return y.tsx(y.tsxFragment,null,y.tsx("calcite-checkbox",{checked:o,class:h.legendItemCss.checkbox,disabled:t,id:l,key:"checkbox",onCalciteCheckboxChange:()=>s.toggleVisibility()}),y.tsx("calcite-tooltip",{overlayPositioning:"fixed",placement:"top",referenceElement:l},n))}},s.__decorate([r.property()],t.LegendItem.prototype,"checkboxVisible",void 0),s.__decorate([r.property()],t.LegendItem.prototype,"disabled",null),s.__decorate([r.property({nonNullable:!0})],t.LegendItem.prototype,"effectiveUnits",void 0),s.__decorate([r.property()],t.LegendItem.prototype,"expanded",void 0),s.__decorate([r.property({nonNullable:!0})],t.LegendItem.prototype,"line",void 0),s.__decorate([r.property()],t.LegendItem.prototype,"messages",void 0),s.__decorate([r.property()],t.LegendItem.prototype,"onExpandedToggle",void 0),s.__decorate([r.property()],t.LegendItem.prototype,"_statistics",void 0),t.LegendItem=s.__decorate([d.subclass("esri.widgets.ElevationProfile.LegendItem")],t.LegendItem),Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
