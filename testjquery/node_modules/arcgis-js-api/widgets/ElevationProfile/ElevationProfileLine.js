/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../Color","../../core/arrayUtils","../../core/Evented","../../core/handleUtils","../../core/memoize","../../core/reactiveUtils","../../core/uuid","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/has","../../core/accessorSupport/decorators/subclass","../../geometry/Point","./support/constants","./support/unitUtils"],(function(e,t,r,o,i,s,l,n,p,a,c,u,d,h,y){"use strict";let _=class extends o.EventedAccessor{constructor(e){super(e),this.type=null,this.id=n.generateUUID(),this.title=null,this.color=new t("#000000"),this.visible=!0,this._getSamplesMemoized=s.memoize(((e,t)=>y.convertSamples(e,t))),this._getStatisticsMemoized=s.memoize(((e,t)=>y.convertStatistics(e,t))),this.viewVisualizationEnabled=!0,this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0,this._viewModel=null}get progress(){return null!=this.result&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){const e=this._viewModel?.hoveredChartPosition;return null!=e?this._getPoint(e):null}get available(){return!0}get hasZ(){const e=this.result;return null!=e&&e.hasZ}get minDemResolution(){return h.getConfig().defaultDemResolution}queryElevation(){throw new Error("not implemented")}attach(e){return this._viewModel=e,i.handlesGroup([l.watch((()=>e.effectiveUnits),(e=>{this.effectiveUnits=e}),l.syncAndInitial),l.watch((()=>[e.input]),(()=>this._onChange()),l.sync)])}toggleVisibility(e){this.visible=void 0===e?!this.visible:e}_onChange(){this.emit("change")}_getPoint(e){const{samples:t,result:o}=this;if(null==t||null==o)return null;const i=t.length;if(0===i)return null;const s=e*t[i-1].distance,l=r.binaryFindClosest(t,s,(e=>e.distance));if(null==l)return null;const{x:n,y:p,z:a}=l;return null==a?null:new d({x:n,y:p,z:a,spatialReference:o.spatialReference})}};e.__decorate([p.property({nonNullable:!0})],_.prototype,"id",void 0),e.__decorate([p.property({nonNullable:!0})],_.prototype,"title",void 0),e.__decorate([p.property({type:t,nonNullable:!0})],_.prototype,"color",void 0),e.__decorate([p.property({nonNullable:!0})],_.prototype,"visible",void 0),e.__decorate([p.property({readOnly:!0})],_.prototype,"progress",null),e.__decorate([p.property({readOnly:!0})],_.prototype,"samples",null),e.__decorate([p.property({readOnly:!0})],_.prototype,"statistics",null),e.__decorate([p.property()],_.prototype,"hoveredPoint",null),e.__decorate([p.property()],_.prototype,"viewVisualizationEnabled",void 0),e.__decorate([p.property()],_.prototype,"available",null),e.__decorate([p.property()],_.prototype,"result",void 0),e.__decorate([p.property()],_.prototype,"effectiveUnits",void 0),e.__decorate([p.property()],_.prototype,"numSamplesForPreview",void 0),e.__decorate([p.property()],_.prototype,"numSamplesPerChunk",void 0),e.__decorate([p.property()],_.prototype,"chartFillEnabled",void 0),e.__decorate([p.property()],_.prototype,"chartStrokeWidth",void 0),e.__decorate([p.property()],_.prototype,"chartStrokeOffsetY",void 0),e.__decorate([p.property({readOnly:!0})],_.prototype,"hasZ",null),e.__decorate([p.property({readOnly:!0})],_.prototype,"minDemResolution",null),e.__decorate([p.property()],_.prototype,"_viewModel",void 0),_=e.__decorate([u.subclass("esri.widgets.ElevationProfile.ElevationProfileLine")],_);return _}));
