/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/Collection","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","./constants","../../support/AnchorElementViewModel"],(function(e,o,t,r,s,n,i,d,c,a,l,h){"use strict";e.HoveredPoints=class extends t{constructor(e){super(e),this._hoveredPoints=new r}initialize(){this.addHandles(s.watch((()=>this._hoveredPoints.toArray().map((({anchor:e,element:o})=>({screenLocation:e.screenLocation,element:o})))),(e=>{for(const{screenLocation:o,element:t}of e)o&&(t.style.transform=`translate(${o.x}px, ${o.y}px)`)}),s.syncAndInitial))}destroy(){this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const o=this.view,t=this._hoveredPoints,r=e.length;for(;this._hoveredPoints.length>r;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<r;){const e=this._makeHoveredPoint();t.push(e),o.surface?.appendChild(e.element)}for(let s=0;s<r;++s){const o=t.at(r-1-s),n=e[s];this._updateHoveredPoint(o,n)}}_makeHoveredPoint(){const{size:e,borderStyle:o,borderColor:t,borderWidth:r,boxShadow:s}=l.getConfig().hoveredPointsStyle,n=this.view,i=new h({view:n,screenLocationEnabled:!0}),d=document.createElement("div"),c=d.style;return c.position="absolute",c.top="0",c.left="0",c.contain="strict",c.boxSizing="border-box",c.width=`${e}px`,c.height=`${e}px`,c.marginTop=`-${e/2}px`,c.marginLeft=`-${e/2}px`,c.border=`${o} ${r}px ${t}`,c.borderRadius=`${e}px`,c.boxShadow=s,{anchor:i,element:d}}_updateHoveredPoint({anchor:e,element:o},t){e.screenLocationEnabled=!0,e.location=t.hoveredPoint;const r=o.style;r.display="block",r.background=t.color.toCss()}_destroyHoveredPoint({anchor:e,element:o}){e.destroy(),this.view.surface?.removeChild(o)}},o.__decorate([n.property()],e.HoveredPoints.prototype,"view",void 0),o.__decorate([n.property()],e.HoveredPoints.prototype,"_hoveredPoints",void 0),e.HoveredPoints=o.__decorate([a.subclass("esri.widgets.ElevationProfile.support.HoveredPoints")],e.HoveredPoints),Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
