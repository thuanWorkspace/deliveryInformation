/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/uuid","../../../layers/support/BuildingFilterBlock","../../../layers/support/BuildingFilterModeSolid","../../../layers/support/BuildingFilterModeXRay"],(function(t,e,n,i,r){"use strict";const l="__BUILDING_EXPLORER_FILTER__";function o(){return`${e.generateUUID()}${l}`}function u(t){const e="string"==typeof t?t:t.id;return!!e&&e.includes(l)}function s(t,e){for(const n of t.items)for(const t of n.filters.items){if(!u(t))continue;const n=e(t);if(null!=n)return n}return null}function f(t,e){t.forEach((t=>{const n=t.filters.filter((t=>!u(t)));null!=e&&n.push(e),c(t.filters,n)||(t.filters=n);const i=t.filters.find((t=>u(t)));t.activeFilterId=null!=i?i.id:null}))}function c(t,e){const n=e.length;if(null==t||t.length!==n)return!1;for(let i=0;i<n;++i){const n=e.at(i).toJSON(),r=t.at(i).toJSON();if(n.id="",r.id="",JSON.stringify(n)!==JSON.stringify(r))return!1}return!0}function d(t){const e=g(t);return e?new n({filterExpression:e,filterMode:new r}):null}function a(t){const e=g(t);return e?new n({filterExpression:e,filterMode:new i}):null}function g(t){return t.filter((t=>!!t)).map((t=>`(${t})`)).join(" AND ")}t.generateFilterId=o,t.getFilterBlockSolid=a,t.getFilterBlockXRay=d,t.getValueFromFilters=s,t.isBuildingExplorerFilter=u,t.setFilterOnLayers=f,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
