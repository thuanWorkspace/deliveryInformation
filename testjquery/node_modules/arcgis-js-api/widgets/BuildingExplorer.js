/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/subclass","./Widget","./BuildingExplorer/BuildingExplorerViewModel","./BuildingExplorer/css","./BuildingExplorer/BuildingDisciplinesTree/BuildingDisciplinesTree","./BuildingExplorer/BuildingLevelPicker/BuildingLevelPicker","./BuildingExplorer/BuildingPhasePicker/BuildingPhasePicker","./support/globalCss","./support/Heading","./support/legacyIcon","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],(function(e,s,i,t,l,r,o,n,a,d,c,p,g,u,h,v,y,_){"use strict";const m={levels:!0,phases:!0,disciplines:!0};let b=class extends o{constructor(e,s){super(e,s),this._defaultViewModel=new n,this.viewModel=this._defaultViewModel,this.visibleElements={...m},this.headingLevel=3,this.iconClass=a.css.widgetIcon,this.icon=null,this.messages=null,this.messagesCommon=null,this.toggleSiblingsVisibility=!1}destroy(){this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get layers(){return this.viewModel.layers}set layers(e){this.viewModel.layers=e}_castVisibleElements(e){return{...m,...e}}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}render(){const e=this.viewModel,s="disabled"===e.state||!e.isSupported;return _.tsx("div",{"aria-label":this.messages.widgetLabel,class:v.classes(g.globalCss.widget,a.css.base,g.globalCss.panel,{[g.globalCss.widgetDisabled]:s}),key:this},this._renderContent())}_renderContent(){const e=this.viewModel,s=this.messages;if(!e.isSupported)return _.tsx("p",{class:a.css.panelError},s.unsupported);if(!e.layers.length)return _.tsx("p",{class:a.css.panelError},s.noData);switch(e.state){case"loading":return this._renderLoadingIndicator();case"ready":return _.tsx("div",{class:a.css.content,key:"content"},this._renderLevelPickerSection(),this._renderPhasePickerSection(),this._renderDisciplinesSection());case"failed":return _.tsx("p",{class:a.css.panelError},s.failed);default:return null}}_renderLoadingIndicator(){const e=this.messagesCommon.loading;return _.tsx("div",{"aria-label":e,class:a.css.loadingContainer,key:"loading-container",role:"presentation",title:e},_.tsx("span",{"aria-hidden":"true",class:v.classes(h.legacyIcon.loadingIndicator,g.globalCss.rotating)}))}_renderLevelPickerSection(){const e=this.viewModel.level,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.levels||!s||!i)return null;const t=this.messages?.level;return _.tsx("div",{class:v.classes(a.css.section,a.css.levels),key:"levels"},_.tsx(u.Heading,{level:this.headingLevel},t?.title),_.tsx(c,{messages:t,vm:e}))}_renderPhasePickerSection(){const e=this.viewModel.phase,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.phases||!s||!i)return null;const t=this.messages.phase;return _.tsx("div",{class:v.classes(a.css.section,a.css.phases),key:"phases"},_.tsx(u.Heading,{level:this.headingLevel},t.title),_.tsx(p,{messages:t,vm:e}))}_renderDisciplinesSection(){const e=this.viewModel.disciplines,s="ready"===e.state,i=e.root.hasChildren;if(!this.visibleElements.disciplines||!s||!i)return null;const t=this.messages?.disciplines;return _.tsx("div",{class:v.classes(a.css.section,a.css.disciplines),key:"disciplines"},_.tsx(u.Heading,{level:this.headingLevel},t.title),_.tsx(d,{messages:t,toggleSiblingsVisibility:this.toggleSiblingsVisibility,vm:e}))}};e.__decorate([s.property({type:n})],b.prototype,"viewModel",void 0),e.__decorate([s.property()],b.prototype,"view",null),e.__decorate([s.property()],b.prototype,"layers",null),e.__decorate([s.property()],b.prototype,"visibleElements",void 0),e.__decorate([i.cast("visibleElements")],b.prototype,"_castVisibleElements",null),e.__decorate([s.property()],b.prototype,"headingLevel",void 0),e.__decorate([s.property()],b.prototype,"iconClass",void 0),e.__decorate([s.property()],b.prototype,"icon",void 0),e.__decorate([s.property()],b.prototype,"label",null),e.__decorate([s.property(),y.messageBundle("esri/widgets/BuildingExplorer/t9n/BuildingExplorer")],b.prototype,"messages",void 0),e.__decorate([s.property(),y.messageBundle("esri/t9n/common")],b.prototype,"messagesCommon",void 0),e.__decorate([s.property({nonNullable:!0})],b.prototype,"toggleSiblingsVisibility",void 0),e.__decorate([s.property()],b.prototype,"uiStrings",void 0),b=e.__decorate([r.subclass("esri.widgets.BuildingExplorer")],b);return b}));
