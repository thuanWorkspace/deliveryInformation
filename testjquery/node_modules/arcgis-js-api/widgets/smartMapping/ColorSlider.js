/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","./SmartMappingSliderBase","./ColorSlider/ColorSliderViewModel","../support/globalCss","../support/legacyIcon","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],(function(e,r,t,s,a,i,l,o,n,d,p,c,m){"use strict";var g;const h="esri-color-slider",u={base:h,widgetIcon:d.legacyIcon.edit,rampElement:`${h}__ramp`,sliderContainer:`${h}__slider-container`,histogramContainer:`${h}__histogram-container`,primaryHandle:`${h}--primary-handle`,track:`${h}--interactive-track`};let y=g=class extends l.SmartMappingSliderBase{constructor(e,r){super(e,r),this.messages=null,this.viewModel=new o,this._bgFillId=`${this.id}-bg-fill`,this._rampFillId=`${this.id}-linear-gradient`}get handlesSyncedToPrimary(){return this.viewModel.handlesSyncedToPrimary}set handlesSyncedToPrimary(e){this.viewModel.handlesSyncedToPrimary=e}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get primaryHandleEnabled(){return this.viewModel.primaryHandleEnabled}set primaryHandleEnabled(e){this.viewModel.primaryHandleEnabled=e}get stops(){return this.viewModel.stops}set stops(e){this.viewModel.stops=e}static fromRendererResult(e,r){const{visualVariable:{stops:t},statistics:s}=e,{avg:a,stddev:i}=s,l=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),o=l.minSliderValue,n=l.maxSliderValue;return new g({max:n,min:o,stops:t,histogramConfig:{average:a,standardDeviation:i,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==l.theme})}updateFromRendererResult(e,r){const{visualVariable:{stops:t},statistics:s}=e,{avg:a,stddev:i}=s,l=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),o=l.minSliderValue,n=l.maxSliderValue;this.set({max:n,min:o,stops:t,histogramConfig:{average:a,standardDeviation:i,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==l.theme})}render(){const{label:e,primaryHandleEnabled:r,state:t,visibleElements:s}=this,a="disabled"===t,i=this.classes(u.base,n.globalCss.widget,n.globalCss.panel,{[n.globalCss.disabled]:a,[u.primaryHandle]:r,[u.track]:!!s.interactiveTrack});return m.tsx("div",{"aria-label":e,class:i},a?null:this.renderContent(this._renderRamp(),u.sliderContainer,u.histogramContainer))}_renderRamp(){const{_bgFillId:e,_rampFillId:r,viewModel:t,zoomOptions:s}=this,a=t.getStopInfo();return m.tsx("div",{class:u.rampElement},m.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},m.tsx("defs",null,this.renderRampFillDefinition(r,a),this.renderBackgroundFillDefinition(e)),m.tsx("rect",{fill:`url(#${e})`,height:"100%",width:"100%",x:"0",y:"0"}),m.tsx("rect",{fill:`url(#${r})`,height:"100%",width:"100%",x:"0",y:"0"})),s?this.renderZoomCaps():null)}};e.__decorate([r.property()],y.prototype,"handlesSyncedToPrimary",null),e.__decorate([r.property()],y.prototype,"label",null),e.__decorate([r.property(),c.messageBundle("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],y.prototype,"messages",void 0),e.__decorate([r.property()],y.prototype,"primaryHandleEnabled",null),e.__decorate([r.property()],y.prototype,"stops",null),e.__decorate([r.property()],y.prototype,"viewModel",void 0),y=g=e.__decorate([i.subclass("esri.widgets.smartMapping.ColorSlider")],y);return y}));
