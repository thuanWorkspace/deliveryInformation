/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../geometry/support/spatialReferenceUtils","../../layers/support/layerUtils"],(function(e,i,s){"use strict";function t(e){const{contains:t,dynamicLayers:n,geometryPrecision:r,layerDefinitions:o,layerIds:l,maxAllowableOffset:a,outSR:c,returnGeometry:f,searchFields:d,searchText:y}=e.toJSON(),u={contains:t,returnGeometry:f,geometryPrecision:r,maxAllowableOffset:a,searchText:y};if(l&&(u.layers=l.join(",")),d&&(u.searchFields=d.join(",")),c&&(u.sr=i.srToRESTValue(c)),o){const e=[];for(let i=0;i<o.length;i++){const s=o[i];e[s.id]=s.definitionExpression}u.layerDefs=s.serializeLayerDefinitions(e)}if(n?.length){const e=[];for(let s=0;s<n.length;s++){const i=n[s],t=i.id;if(!i.subLayerIds&&l&&l.includes(t)){const s={id:t};s.source=i.source;let n=null;if(o?.length){const e=o.find((e=>e.id===t));n=e?.definitionExpression}n&&(s.definitionExpression=n),e.push(s)}}let i=JSON.stringify(e);"[]"===i&&(i="[{}]"),u.dynamicLayers=i}return u}e.findToFindRESTParameters=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
