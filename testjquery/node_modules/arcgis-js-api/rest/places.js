/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../geometry","../request","../core/accessorSupport/ensureType","../portal/Portal","./utils","./support/FetchPlaceParameters","./support/PlacesQueryParameters","./support/PlacesQueryResult","../views/support/projectionUtils","../geometry/SpatialReference"],(function(e,t,r,s,a,n,i,o,u,l,c){"use strict";async function p(e,t){e=s.ensureClass(i,e);const a={requestedFields:e.requestedFields?.join(),token:e.apiKey},o=n.asValidOptions(a,t),{data:u}=await r(`${e.url}/places/${e.placeId}`,o);return u}async function y(e,t){const r={radius:(e=s.ensureClass(o,e)).radius};let n=e.point;return n&&!n.spatialReference.isWGS84&&(n=await l.projectWithEngineOrService(n,c.WGS84,a.getDefault(),t?.signal)),n&&(r.x=n.x,r.y=n.y),x(`${e.url}/places/near-point`,r,e,t)}async function f(e,t){const r={};let n=(e=s.ensureClass(o,e)).extent;return n&&!n.spatialReference.isWGS84&&(n=await l.projectWithEngineOrService(n,c.WGS84,a.getDefault(),t?.signal)),n&&(r.xmin=n.xmin,r.ymin=n.ymin,r.xmax=n.xmax,r.ymax=n.ymax),x(`${e.url}/places/within-extent`,r,e,t)}async function x(e,t,s,a){t={...t,categoryIds:s.categoryIds?.join(),offset:s.offset,pageSize:s.pageSize,searchText:s.searchText,token:s.apiKey};const i=n.asValidOptions(t,a),{data:o}=await r(e,i),l=new u;l.results=o.results;const{pagination:c,links:p}=o;if(c?.nextUrl||p?.next){l.nextQueryParams=s.clone();const e=n.parseUrl(c?.nextUrl||p?.next).query;l.nextQueryParams.offset=Number(e.offset)}if(c?.previousUrl||p?.previous){l.previousQueryParams=s.clone();const e=n.parseUrl(c?.previousUrl||p?.previous).query;l.previousQueryParams.offset=Number(e.offset)}return l}e.fetchPlace=p,e.queryPlacesNearPoint=y,e.queryPlacesWithinExtent=f,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
