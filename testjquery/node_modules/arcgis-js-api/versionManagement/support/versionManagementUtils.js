/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["require","exports","../../core/uuid"],(function(e,r,n){"use strict";const t=e=>Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"})),o=n.generateLowercaseBracedUUID(),i=new Map,s=new Map,a=new Map;async function d(r,n,i=!1){if(!r||!n)return!0;const a=r.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),d=s.get(a)?.entries();if(d)for(const[s,u]of d)if(u.name===n){const r=!u.stack?.hasForwardEdits();if(!r&&i){const[{deleteForwardEdits:r},{default:n}]=await Promise.all([new Promise(((r,n)=>e(["../../rest/versionManagement/gdbVersion/deleteForwardEdits"],r,n))),new Promise(((r,n)=>e(["../../rest/versionManagement/gdbVersion/support/DeleteForwardEditsParameters"],(e=>r(t(e))),n)))]);return r(a,s,new n({sessionId:o,moment:u.moment}))}return r}return!0}function u(e,r){if(!e)return!1;const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),t=s.get(n)?.entries();if(t)for(const[o,i]of t)if(i.name===r){return"edit"===i.lockType}return!1}r.currentSessionId=o,r.defaultVersionNameLookup=i,r.isSafeToEditVersion=d,r.isVersionInEditSession=u,r.versionCollection=s,r.versionCollectionCount=a,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));
