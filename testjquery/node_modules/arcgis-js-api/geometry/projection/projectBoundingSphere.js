/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/mathUtils","../../chunks/vec3f64","./projectors","../support/Ellipsoid"],(function(e,r,t,o,n){"use strict";function c(e,r,t,c){if(null==r||null==c)return!1;const l=o.populateProjectorCache(r,c,s);if(l.projector===o.copy3)return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],!0;if(null==l.projector)return!1;const{source:u,dest:p}=l;if(p.spatialReferenceId===o.ProjectionID.WEB_MERCATOR){const r=o.projectionTable[u.spatialReferenceId][o.ProjectionID.WGS84];return null!=r&&(r(e,0,a,0),o.wgs84ToWebMercator(a,0,t,0),t[3]=i(a[1],e[2],e[3],n.earth.radius),!0)}if(u.spatialReferenceId!==o.ProjectionID.WGS84&&u.spatialReferenceId!==o.ProjectionID.CGCS2000||p.spatialReferenceId!==o.ProjectionID.PLATE_CARREE){l.projector(e,0,t,0);const r=u.metersPerUnit??1,o=p.metersPerUnit??1;t[3]=e[3]*r/o}else{const r=o.projectionTable[u.spatialReferenceId][o.ProjectionID.SPHERICAL_ECEF],c=o.projectionTable[o.ProjectionID.SPHERICAL_ECEF][o.ProjectionID.PLATE_CARREE];let a=e[3];null!=r&&null!=c&&(a=i(e[1],e[2],e[3],n.earth.radius)),l.projector(e,0,t,0),t[3]=a}return!0}function i(e,r,t,o){const n=o+r;if(n<o/2||t>n)return Number.MAX_VALUE;const c=Math.abs(l*e)+Math.asin(t/n);return c>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(c)}const a=t.create(),s=o.createEmptyProjectorCache(),l=r.deg2rad(1);e.projectBoundingSphere=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
