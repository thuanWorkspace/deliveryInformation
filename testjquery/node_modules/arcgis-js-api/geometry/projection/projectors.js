/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/mathUtils","../../core/unitUtils","../ellipsoidUtils","../support/Ellipsoid","../support/geodesicConstants","../support/spatialReferenceUtils","../support/SupportedGCSWkids"],(function(o,e,n,t,r,P,c,i){"use strict";var l;o.ProjectionID=void 0,(l=o.ProjectionID||(o.ProjectionID={}))[l.UNKNOWN=0]="UNKNOWN",l[l.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",l[l.WGS84=2]="WGS84",l[l.WEB_MERCATOR=3]="WEB_MERCATOR",l[l.WGS84_ECEF=4]="WGS84_ECEF",l[l.CGCS2000=5]="CGCS2000",l[l.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",l[l.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",l[l.GCSMARS2000=8]="GCSMARS2000",l[l.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",l[l.GCSMOON2000=10]="GCSMOON2000",l[l.LON_LAT=11]="LON_LAT",l[l.PLATE_CARREE=12]="PLATE_CARREE";const C={[o.ProjectionID.WGS84]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:j,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:j,[o.ProjectionID.SPHERICAL_ECEF]:H,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:R,[o.ProjectionID.PLATE_CARREE]:s,[o.ProjectionID.WGS84]:j,[o.ProjectionID.WGS84_ECEF]:k},[o.ProjectionID.CGCS2000]:{[o.ProjectionID.CGCS2000]:j,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:j,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:j,[o.ProjectionID.SPHERICAL_ECEF]:H,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:s,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:k},[o.ProjectionID.GCSMARS2000]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:j,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:j,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:null,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:d,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.GCSMOON2000]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:j,[o.ProjectionID.LON_LAT]:j,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:null,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:h,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.WEB_MERCATOR]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:A,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:A,[o.ProjectionID.SPHERICAL_ECEF]:D,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:j,[o.ProjectionID.PLATE_CARREE]:N,[o.ProjectionID.WGS84]:A,[o.ProjectionID.WGS84_ECEF]:_},[o.ProjectionID.WGS84_ECEF]:{[o.ProjectionID.CGCS2000]:q,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:q,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:q,[o.ProjectionID.SPHERICAL_ECEF]:y,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:v,[o.ProjectionID.PLATE_CARREE]:G,[o.ProjectionID.WGS84]:q,[o.ProjectionID.WGS84_ECEF]:j},[o.ProjectionID.SPHERICAL_ECEF]:{[o.ProjectionID.CGCS2000]:w,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:w,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:w,[o.ProjectionID.SPHERICAL_ECEF]:j,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:m,[o.ProjectionID.PLATE_CARREE]:W,[o.ProjectionID.WGS84]:w,[o.ProjectionID.WGS84_ECEF]:g},[o.ProjectionID.SPHERICAL_MARS_PCPF]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:K,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:K,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:null,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:j,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.SPHERICAL_MOON_PCPF]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:U,[o.ProjectionID.LON_LAT]:U,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:null,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:j,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.UNKNOWN]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:null,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:null,[o.ProjectionID.SPHERICAL_ECEF]:null,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:j,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:null,[o.ProjectionID.WGS84]:null,[o.ProjectionID.WGS84_ECEF]:null},[o.ProjectionID.LON_LAT]:{[o.ProjectionID.CGCS2000]:j,[o.ProjectionID.GCSMARS2000]:j,[o.ProjectionID.GCSMOON2000]:j,[o.ProjectionID.LON_LAT]:j,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:j,[o.ProjectionID.SPHERICAL_ECEF]:H,[o.ProjectionID.SPHERICAL_MARS_PCPF]:d,[o.ProjectionID.SPHERICAL_MOON_PCPF]:h,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:R,[o.ProjectionID.PLATE_CARREE]:s,[o.ProjectionID.WGS84]:j,[o.ProjectionID.WGS84_ECEF]:k},[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:{[o.ProjectionID.CGCS2000]:null,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:j,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:j,[o.ProjectionID.SPHERICAL_ECEF]:H,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:null,[o.ProjectionID.PLATE_CARREE]:s,[o.ProjectionID.WGS84]:j,[o.ProjectionID.WGS84_ECEF]:k},[o.ProjectionID.PLATE_CARREE]:{[o.ProjectionID.CGCS2000]:M,[o.ProjectionID.GCSMARS2000]:null,[o.ProjectionID.GCSMOON2000]:null,[o.ProjectionID.LON_LAT]:M,[o.ProjectionID.WGS84_COMPARABLE_LON_LAT]:M,[o.ProjectionID.SPHERICAL_ECEF]:F,[o.ProjectionID.SPHERICAL_MARS_PCPF]:null,[o.ProjectionID.SPHERICAL_MOON_PCPF]:null,[o.ProjectionID.UNKNOWN]:null,[o.ProjectionID.WEB_MERCATOR]:T,[o.ProjectionID.PLATE_CARREE]:j,[o.ProjectionID.WGS84]:M,[o.ProjectionID.WGS84_ECEF]:p}};function I(e){const n=S(e,J);return C[n][o.ProjectionID.WGS84_COMPARABLE_LON_LAT]}function E(o,e,n=z()){return null==o||null==e?null:x(o,e,n).projector}function a(o,e){switch(E(o,e,V)){case j:return"copy3";case H:return"wgs84ToSphericalECEF";case R:return"wgs84ToWebMercator";case s:return"wgs84ToPlateCarree";case k:return"wgs84ToWGS84ECEF";case A:return"webMercatorToWGS84";case D:return"webMercatorToSphericalECEF";case _:return"webMercatorToWGS84ECEF";case N:return"webMercatorToPlateCarree";case q:return"wgs84ECEFToWGS84";case y:return"wgs84ECEFToSphericalECEF";case v:return"wgs84ECEFToWebMercator";case w:return"sphericalECEFToWGS84";case m:return"sphericalECEFToWebMercator";case K:return"sphericalMarsPCPFToMars2000";case U:return"sphericalMoonPCPFToMoon2000";case g:return"sphericalECEFToWGS84ECEF";case d:return"mars2000ToSphericalPCPF";case h:return"moon2000ToSphericalPCPF";default:return null}}function S(e,r){return e?r.spatialReference===e?r.spatialReferenceId:(r.spatialReference=e,"metersPerUnit"in r&&(r.metersPerUnit=n.getMetersPerUnitForSR(e,1)),t.isSphericalECEF(e)?r.spatialReferenceId=o.ProjectionID.SPHERICAL_ECEF:c.isWGS84(e)?r.spatialReferenceId=o.ProjectionID.WGS84:c.isWebMercator(e)?r.spatialReferenceId=o.ProjectionID.WEB_MERCATOR:c.isPlateCarree(e)?r.spatialReferenceId=o.ProjectionID.PLATE_CARREE:e.wkt===t.WGS84ECEFSpatialReferenceLike.wkt?r.spatialReferenceId=o.ProjectionID.WGS84_ECEF:e.wkid===i.SupportedGCSWkids.CGCS2000?r.spatialReferenceId=o.ProjectionID.CGCS2000:e.wkt===t.SphericalPCPFMarsLike.wkt?r.spatialReferenceId=o.ProjectionID.SPHERICAL_MARS_PCPF:e.wkt===t.SphericalPCPFMoonLike.wkt?r.spatialReferenceId=o.ProjectionID.SPHERICAL_MOON_PCPF:c.isMars(e)?r.spatialReferenceId=o.ProjectionID.GCSMARS2000:c.isMoon(e)?r.spatialReferenceId=o.ProjectionID.GCSMOON2000:r.spatialReferenceId=o.ProjectionID.UNKNOWN):o.ProjectionID.UNKNOWN}function j(o,e,n,t){o!==n&&(n[t++]=o[e++],n[t++]=o[e++],n[t]=o[e])}function A(o,e,n,t){n[t++]=Y*(o[e++]/r.earth.radius),n[t++]=Y*(Math.PI/2-2*Math.atan(Math.exp(-o[e++]/r.earth.radius))),n[t]=o[e]}function D(o,e,n,t){A(o,e,n,t),H(n,t,n,t)}function _(o,e,n,t){A(o,e,n,t),k(n,t,n,t)}function u(o,n,t,r,P){const c=.4999999*Math.PI,i=e.clamp(X*o[n+1],-c,c),l=Math.sin(i);t[r++]=X*o[n]*P.radius,t[r++]=P.halfSemiMajorAxis*Math.log((1+l)/(1-l)),t[r]=o[n+2]}function R(o,e,n,t){u(o,e,n,t,r.earth)}const O=r.earth.radius*Math.PI/180,L=180/(r.earth.radius*Math.PI);function s(o,e,n,t){n[t]=o[e]*O,n[t+1]=o[e+1]*O,n[t+2]=o[e+2]}function M(o,e,n,t){n[t]=o[e]*L,n[t+1]=o[e+1]*L,n[t+2]=o[e+2]}function N(o,e,n,t){A(o,e,n,t),s(n,t,n,t)}function G(o,e,n,t){q(o,e,n,t),s(n,t,n,t)}function W(o,e,n,t){w(o,e,n,t),s(n,t,n,t)}function F(o,e,n,t){M(o,e,n,t),H(n,t,n,t)}function T(o,e,n,t){M(o,e,n,t),R(n,t,n,t)}function p(o,e,n,t){M(o,e,n,t),k(n,t,n,t)}function f(o,e,n,t,r){const P=r+o[e+2],c=X*o[e+1],i=X*o[e],l=Math.cos(c);n[t++]=Math.cos(i)*l*P,n[t++]=Math.sin(i)*l*P,n[t]=Math.sin(c)*P}function h(o,e,n,t){f(o,e,n,t,r.moon.radius)}function d(o,e,n,t){f(o,e,n,t,r.mars.radius)}function H(o,e,n,t){f(o,e,n,t,r.earth.radius)}function B(o,n,t,r,P){const c=o[n],i=o[n+1],l=o[n+2],C=Math.sqrt(c*c+i*i+l*l),I=e.asinClamped(l/(0===C?1:C)),E=Math.atan2(i,c);t[r++]=Y*E,t[r++]=Y*I,t[r]=C-P}function U(o,e,n,t){B(o,e,n,t,r.moon.radius)}function K(o,e,n,t){B(o,e,n,t,r.mars.radius)}function w(o,e,n,t){B(o,e,n,t,r.earth.radius)}function m(o,e,n,t){w(o,e,n,t),R(n,t,n,t)}function g(o,e,n,t){w(o,e,n,t),k(n,t,n,t)}function b(o,e,n,t,r){const P=X*o[e],c=X*o[e+1],i=o[e+2],l=Math.sin(c),C=Math.cos(c),I=r.radius/Math.sqrt(1-r.eccentricitySquared*l*l);n[t++]=(I+i)*C*Math.cos(P),n[t++]=(I+i)*C*Math.sin(P),n[t++]=(I*(1-r.eccentricitySquared)+i)*l}function k(o,e,n,t){b(o,e,n,t,r.earth)}function q(o,e,n,t){const c=P.earthEllipsoidConstants,i=o[e],l=o[e+1],C=o[e+2];let I,E,a,S,j,A,D,_,u,R,O,L,s,M,N,G,W,F,T,p,f;I=Math.abs(C),E=i*i+l*l,a=Math.sqrt(E),S=E+C*C,j=Math.sqrt(S),p=Math.atan2(l,i),A=C*C/S,D=E/S,M=c.a2/j,N=c.a3-c.a4/j,D>.3?(_=I/j*(1+D*(c.a1+M+A*N)/j),T=Math.asin(_),R=_*_,u=Math.sqrt(1-R)):(u=a/j*(1-A*(c.a5-M-D*N)/j),T=Math.acos(u),R=1-u*u,_=Math.sqrt(R)),O=1-r.earth.eccentricitySquared*R,L=r.earth.radius/Math.sqrt(O),s=c.a6*L,M=a-L*u,N=I-s*_,W=u*M+_*N,G=u*N-_*M,F=G/(s/O+W),T+=F,f=W+G*F/2,C<0&&(T=-T),n[t++]=Y*p,n[t++]=Y*T,n[t]=f}function y(o,e,n,t){q(o,e,n,t),H(n,t,n,t)}function v(o,e,n,t){q(o,e,n,t),R(n,t,n,t)}function x(e,n,t){if(null==e||null==n||t.source.spatialReference===e&&t.dest.spatialReference===n)return t;const r=S(e,t.source),P=S(n,t.dest);return r===o.ProjectionID.UNKNOWN&&P===o.ProjectionID.UNKNOWN?c.equals(e,n)?t.projector=j:t.projector=null:t.projector=C[r][P],t}function z(){return{source:{spatialReference:null,spatialReferenceId:o.ProjectionID.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:o.ProjectionID.UNKNOWN,metersPerUnit:1},projector:j}}const J={spatialReference:null,spatialReferenceId:o.ProjectionID.UNKNOWN},Q={spatialReference:null,spatialReferenceId:o.ProjectionID.UNKNOWN},V=z(),X=e.deg2rad(1),Y=e.rad2deg(1);o.classifySpatialReference=S,o.copy3=j,o.createEmptyProjectorCache=z,o.destClassificationCache=Q,o.getProjector=E,o.getProjectorName=a,o.getWGS84ComparableLonLatProjector=I,o.invPlateCarreeScale=L,o.lonLatToWebMercatorComparable=u,o.populateProjectorCache=x,o.projectionTable=C,o.projectorCache=V,o.sourceClassificationCache=J,o.sphericalPCPFtoLonLatElevation=B,o.wgs84ToWebMercator=R,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})}));
