/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/typedArrayUtil"],(function(r,n){"use strict";function e(r){if(n.isArray(r)){if(r.length<n.nativeArrayMaxSize)return r}else if(r.length<n.nativeArrayMaxSize)return Array.from(r);let e=!0,i=!0;return r.some(((r,n)=>(e=e&&0===r,i=i&&r===n,!e&&!i))),e?l(r.length):i?u(r.length):n.isArray(r)||r.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?t(r):r}function t(r){let e=!0;for(const t of r){if(t>=65536)return n.isArray(r)?new Uint32Array(r):r;t>=256&&(e=!1)}return e?new Uint8Array(r):new Uint16Array(r)}function i(r){return r<=n.nativeArrayMaxSize?new Array(r):r<=65536?new Uint16Array(r):new Uint32Array(r)}function a(r){return r<=n.nativeArrayMaxSize?new Array(r):new Uint32Array(r)}let y=(()=>{const r=new Uint32Array(131072);for(let n=0;n<r.length;++n)r[n]=n;return r})();const f=[0],A=(()=>{const r=new Uint16Array(65536);for(let n=0;n<r.length;++n)r[n]=n;return r})();function u(r){if(1===r)return f;if(r<n.nativeArrayMaxSize)return Array.from(new Uint16Array(A.buffer,0,r));if(r<A.length)return new Uint16Array(A.buffer,0,r);if(r>y.length){const n=Math.max(2*y.length,r);y=new Uint32Array(n);for(let r=0;r<y.length;r++)y[r]=r}return new Uint32Array(y.buffer,0,r)}let o=new Uint8Array(65536);function l(r){if(1===r)return f;if(r<n.nativeArrayMaxSize)return new Array(r).fill(0);if(r>o.length){const n=Math.max(2*o.length,r);o=new Uint8Array(n)}return new Uint8Array(o.buffer,0,r)}r.compactIndices=e,r.getContinuousIndexArray=u,r.getZeroIndexArray=l,r.newIndexArray=i,r.newIntArray=a,Object.defineProperty(r,Symbol.toStringTag,{value:"Module"})}));
