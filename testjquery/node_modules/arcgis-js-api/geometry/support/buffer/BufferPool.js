/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../core/PooledArray"],(function(e,t){"use strict";class o{constructor(e,t){this._factoryCallback=e,this._lengthCallback=t,this._pool=new Map}acquire(e){if(!o.test.disabled){const t=this._pool.get(e);if(t&&0!==t.length)return t.pop()}try{return this._factoryCallback(e)}catch(t){const o=window.performance&&window.performance.memory;let i="";throw o&&(i=`\n  totalJSHeapSize: ${o.totalJSHeapSize}, usedJSHeapSize: ${o.usedJSHeapSize}, jsHeapSizeLimit: ${o.jsHeapSizeLimit}`),console.log("Array allocation of size "+e+" failed: "+t+i),t}}release(e){if(o.test.disabled)return;const i=this._lengthCallback(e);let l=this._pool.get(i);l||(l=new t({shrink:!0}),this._pool.set(i,l)),l.push(e)}clear(){this._pool.clear()}get test(){return{size:this._pool.size}}}o.test={disabled:!1},e.BufferPool=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
