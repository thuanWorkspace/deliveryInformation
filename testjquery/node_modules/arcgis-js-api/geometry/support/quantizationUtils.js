/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","./jsonUtils"],(function(n,t){"use strict";function e(n){return n&&"upperLeft"===n.originPosition}const u=(n,t,e)=>[t,e],i=(n,t,e)=>[t,e,n[2]],r=(n,t,e)=>[t,e,n[2],n[3]];function o(n){if(!n)return null;return{originPosition:"upper-left"===n.originPosition?"upperLeft":"lower-left"===n.originPosition?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:null!=n.extent?[n.extent.xmin,n.extent.ymax]:[0,0]}}function a(n,t){if(n===t||null==n&&null==t)return!0;if(null==n||null==t)return!1;let u,i,r,o,a,l;return e(n)?(u=n.translate[0],i=n.translate[1],r=n.scale[0]):(u=null!=n.extent?n.extent.xmin:0,i=null!=n.extent?n.extent.ymax:0,r=n.tolerance),e(t)?(o=t.translate[0],a=t.translate[1],l=t.scale[0]):(o=null!=t.extent?t.extent.xmin:0,a=null!=t.extent?t.extent.ymax:0,l=t.tolerance),u===o&&i===a&&r===l}function l({scale:n,translate:t},e){return Math.round((e-t[0])/n[0])}function s({scale:n,translate:t},e){return Math.round((t[1]-e)/n[1])}function m(n,t,e){const u=[];let i,r,o,a;for(let m=0;m<e.length;m++){const c=e[m];m>0?(o=l(n,c[0]),a=s(n,c[1]),o===i&&a===r||(u.push(t(c,o-i,a-r)),i=o,r=a)):(i=l(n,c[0]),r=s(n,c[1]),u.push(t(c,i,r)))}return u.length>0?u:null}function c(n,t,e){return t[0]=l(n,e[0]),t[3]=s(n,e[1]),t[2]=l(n,e[2]),t[1]=s(n,e[3]),t}function f(n,t,e,o){return m(n,e?o?r:i:o?i:u,t)}function x(n,t,e,o){const a=[],l=e?o?r:i:o?i:u;for(let u=0;u<t.length;u++){const e=m(n,l,t[u]);e&&e.length>=3&&a.push(e)}return a.length?a:null}function z(n,t,e,o){const a=[],l=e?o?r:i:o?i:u;for(let u=0;u<t.length;u++){const e=m(n,l,t[u]);e&&e.length>=2&&a.push(e)}return a.length?a:null}function g({scale:n,translate:t},e){return e*n[0]+t[0]}function h({scale:n,translate:t},e){return t[1]-e*n[1]}function y(n,t,e){const u=new Array(e.length);if(!e.length)return u;const[i,r]=n.scale;let o=g(n,e[0][0]),a=h(n,e[0][1]);u[0]=t(e[0],o,a);for(let l=1;l<e.length;l++){const n=e[l];o+=n[0]*i,a-=n[1]*r,u[l]=t(n,o,a)}return u}function I(n,t,e){const u=new Array(e.length);for(let i=0;i<e.length;i++)u[i]=y(n,t,e[i]);return u}function q(n,t,e){return e?(t[0]=g(n,e[0]),t[1]=h(n,e[3]),t[2]=g(n,e[2]),t[3]=h(n,e[1]),t):[g(n,t[0]),h(n,t[3]),g(n,t[2]),h(n,t[1])]}function P(n,t,e,o){return y(n,e?o?r:i:o?i:u,t)}function p(n,t,e,o){return I(n,e?o?r:i:o?i:u,t)}function d(n,t,e,o){return I(n,e?o?r:i:o?i:u,t)}function N(n,t,e){let[u,i]=e[0],r=Math.min(u,t[0]),o=Math.min(i,t[1]),a=Math.max(u,t[2]),l=Math.max(i,t[3]);for(let s=1;s<e.length;s++){const[n,t]=e[s];u+=n,i+=t,n<0&&(r=Math.min(r,u)),n>0&&(a=Math.max(a,u)),t<0?o=Math.min(o,i):t>0&&(l=Math.max(l,i))}return n[0]=r,n[1]=o,n[2]=a,n[3]=l,n}function M(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++)N(n,n,t[e]);return n}function T(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return N(t,t,n)}function E(n){return M([0,0,0,0],n)}function A(n){return M([0,0,0,0],n)}function b(n,t,e,u,i){return t.xmin=l(n,e.xmin),t.ymin=s(n,e.ymin),t.xmax=l(n,e.xmax),t.ymax=s(n,e.ymax),t!==e&&(u&&(t.zmin=e.zmin,t.zmax=e.zmax),i&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function Y(n,t,e,u,i){return t.points=f(n,e.points,u,i)??[],t}function B(n,t,e,u,i){return t.x=l(n,e.x),t.y=s(n,e.y),t!==e&&(u&&(t.z=e.z),i&&(t.m=e.m)),t}function F(n,t,e,u,i){const r=x(n,e.rings,u,i);return r?(t.rings=r,t):null}function Q(n,t,e,u,i){const r=z(n,e.paths,u,i);return r?(t.paths=r,t):null}function V(n,e){return n&&e?t.isPoint(e)?B(n,{},e,!1,!1):t.isPolyline(e)?Q(n,{},e,!1,!1):t.isPolygon(e)?F(n,{},e,!1,!1):t.isMultipoint(e)?Y(n,{},e,!1,!1):t.isExtent(e)?b(n,{},e,!1,!1):null:null}function _(n,t,e,u,i){return t.xmin=g(n,e.xmin),t.ymin=h(n,e.ymin),t.xmax=g(n,e.xmax),t.ymax=h(n,e.ymax),t!==e&&(u&&(t.zmin=e.zmin,t.zmax=e.zmax),i&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function S(n,t,e,u,i){return null!=e&&(t.points=P(n,e.points,u,i)),t}function w(n,t,e,u,i){return null==e||(t.x=g(n,e.x),t.y=h(n,e.y),t!==e&&(u&&(t.z=e.z),i&&(t.m=e.m))),t}function C(n,t,e,u,i){return null!=e&&(t.rings=d(n,e.rings,u,i)),t}function G(n,t,e,u,i){return null!=e&&(t.paths=p(n,e.paths,u,i)),t}n.equals=a,n.getQuantizedBoundsCoordsArray=N,n.getQuantizedBoundsCoordsArrayArray=M,n.getQuantizedBoundsPaths=E,n.getQuantizedBoundsPoints=T,n.getQuantizedBoundsRings=A,n.quantizeBounds=c,n.quantizeExtent=b,n.quantizeGeometry=V,n.quantizeMultipoint=Y,n.quantizePaths=z,n.quantizePoint=B,n.quantizePoints=f,n.quantizePolygon=F,n.quantizePolyline=Q,n.quantizeRings=x,n.quantizeX=l,n.quantizeY=s,n.toQuantizationTransform=o,n.unquantizeBounds=q,n.unquantizeCoordsArray=y,n.unquantizeCoordsArrayArray=I,n.unquantizeExtent=_,n.unquantizeMultipoint=S,n.unquantizePaths=p,n.unquantizePoint=w,n.unquantizePoints=P,n.unquantizePolygon=C,n.unquantizePolyline=G,n.unquantizeRings=d,n.unquantizeX=g,n.unquantizeY=h,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
