/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/ObjectStack","../../chunks/mat4","../../chunks/vec3","../../chunks/vec3f64","../../chunks/vec4","../../chunks/vec4f64","./clipRay","./plane","./vectorStacks"],(function(n,e,T,t,_,o,O,R,i,P){"use strict";function r(n){return n?[i.create(n[0]),i.create(n[1]),i.create(n[2]),i.create(n[3]),i.create(n[4]),i.create(n[5])]:[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]}function I(){return[_.create(),_.create(),_.create(),_.create(),_.create(),_.create(),_.create(),_.create()]}function c(n,e){for(let T=0;T<B;T++)i.copy(n[T],e[T]);return n}function A(n,e,_,O=L){const R=T.multiply(P.sm4d.get(),e,n);T.invert(R,R);for(let T=0;T<N;++T){const n=o.transformMat4(P.sv4d.get(),G[T],R);t.set(O[T],n[0]/n[3],n[1]/n[3],n[2]/n[3])}d(_,O)}function d(e,T){i.fromPoints(T[n.PointIndex.FAR_BOTTOM_LEFT],T[n.PointIndex.NEAR_BOTTOM_LEFT],T[n.PointIndex.NEAR_TOP_LEFT],e[n.PlaneIndex.LEFT]),i.fromPoints(T[n.PointIndex.NEAR_BOTTOM_RIGHT],T[n.PointIndex.FAR_BOTTOM_RIGHT],T[n.PointIndex.FAR_TOP_RIGHT],e[n.PlaneIndex.RIGHT]),i.fromPoints(T[n.PointIndex.FAR_BOTTOM_LEFT],T[n.PointIndex.FAR_BOTTOM_RIGHT],T[n.PointIndex.NEAR_BOTTOM_RIGHT],e[n.PlaneIndex.BOTTOM]),i.fromPoints(T[n.PointIndex.NEAR_TOP_LEFT],T[n.PointIndex.NEAR_TOP_RIGHT],T[n.PointIndex.FAR_TOP_RIGHT],e[n.PlaneIndex.TOP]),i.fromPoints(T[n.PointIndex.NEAR_BOTTOM_LEFT],T[n.PointIndex.NEAR_BOTTOM_RIGHT],T[n.PointIndex.NEAR_TOP_RIGHT],e[n.PlaneIndex.NEAR]),i.fromPoints(T[n.PointIndex.FAR_BOTTOM_RIGHT],T[n.PointIndex.FAR_BOTTOM_LEFT],T[n.PointIndex.FAR_TOP_LEFT],e[n.PlaneIndex.FAR])}function E(n,e){for(let T=0;T<B;T++){const t=n[T];if(t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]>=e[3])return!1}return!0}function F(n,e){return f(n,R.fromRay(e,H.get()))}function a(n,e){for(let T=0;T<B;T++){const t=n[T];if(!i.clipInfinite(t,e))return!1}return!0}function x(n,e,T){return f(n,R.fromLineSegmentAndDirection(e,T,H.get()))}function s(n,e){for(let T=0;T<B;T++){if(i.signedDistance(n[T],e)>0)return!1}return!0}function f(n,e){for(let T=0;T<B;T++)if(!i.clip(n[T],e))return!1;return!0}var u,l;n.PlaneIndex=void 0,(u=n.PlaneIndex||(n.PlaneIndex={}))[u.LEFT=0]="LEFT",u[u.RIGHT=1]="RIGHT",u[u.BOTTOM=2]="BOTTOM",u[u.TOP=3]="TOP",u[u.NEAR=4]="NEAR",u[u.FAR=5]="FAR",n.PointIndex=void 0,(l=n.PointIndex||(n.PointIndex={}))[l.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",l[l.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",l[l.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",l[l.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",l[l.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",l[l.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",l[l.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",l[l.FAR_TOP_LEFT=7]="FAR_TOP_LEFT";const M={bottom:[n.PointIndex.FAR_BOTTOM_RIGHT,n.PointIndex.NEAR_BOTTOM_RIGHT,n.PointIndex.NEAR_BOTTOM_LEFT,n.PointIndex.FAR_BOTTOM_LEFT],near:[n.PointIndex.NEAR_BOTTOM_LEFT,n.PointIndex.NEAR_BOTTOM_RIGHT,n.PointIndex.NEAR_TOP_RIGHT,n.PointIndex.NEAR_TOP_LEFT],far:[n.PointIndex.FAR_BOTTOM_RIGHT,n.PointIndex.FAR_BOTTOM_LEFT,n.PointIndex.FAR_TOP_LEFT,n.PointIndex.FAR_TOP_RIGHT],right:[n.PointIndex.NEAR_BOTTOM_RIGHT,n.PointIndex.FAR_BOTTOM_RIGHT,n.PointIndex.FAR_TOP_RIGHT,n.PointIndex.NEAR_TOP_RIGHT],left:[n.PointIndex.FAR_BOTTOM_LEFT,n.PointIndex.NEAR_BOTTOM_LEFT,n.PointIndex.NEAR_TOP_LEFT,n.PointIndex.FAR_TOP_LEFT],top:[n.PointIndex.FAR_TOP_LEFT,n.PointIndex.NEAR_TOP_LEFT,n.PointIndex.NEAR_TOP_RIGHT,n.PointIndex.FAR_TOP_RIGHT]},B=6,N=8,G=[O.fromValues(-1,-1,-1,1),O.fromValues(1,-1,-1,1),O.fromValues(1,1,-1,1),O.fromValues(-1,1,-1,1),O.fromValues(-1,-1,1,1),O.fromValues(1,-1,1,1),O.fromValues(1,1,1,1),O.fromValues(-1,1,1,1)],H=new e.ObjectStack(R.create),L=I();n.NumPlanes=B,n.NumPoints=N,n.computePlanes=d,n.copy=c,n.create=r,n.createPoints=I,n.fromMatrix=A,n.intersectClipRay=a,n.intersectsLineSegment=x,n.intersectsPoint=s,n.intersectsRay=F,n.intersectsSphere=E,n.planePointIndices=M,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
