/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports"],(function(t){"use strict";var e;!function(t){t[t.JSON=1313821514]="JSON",t[t.BIN=5130562]="BIN"}(e||(e={}));class i{constructor(t,r){if(!t)throw new Error("GLB requires a JSON gltf chunk");this._length=i.HEADER_SIZE,this._length+=i.CHUNK_HEADER_SIZE;const n=this._textToArrayBuffer(t);if(this._length+=this._alignTo(n.byteLength,4),r&&(this._length+=i.CHUNK_HEADER_SIZE,this._length+=r.byteLength,r.byteLength%4))throw new Error("Expected BIN chunk length to be divisible by 4 at this point");this.buffer=new ArrayBuffer(this._length),this._outView=new DataView(this.buffer),this._writeHeader();const h=this._writeChunk(n,12,e.JSON,32);r&&this._writeChunk(r,h,e.BIN)}_writeHeader(){this._outView.setUint32(0,i.MAGIC,!0),this._outView.setUint32(4,i.VERSION,!0),this._outView.setUint32(8,this._length,!0)}_writeChunk(t,e,i,r=0){const n=this._alignTo(t.byteLength,4);for(this._outView.setUint32(e,n,!0),this._outView.setUint32(e+=4,i,!0),this._writeArrayBuffer(this._outView.buffer,t,e+=4,0,t.byteLength),e+=t.byteLength;e%4;)r&&this._outView.setUint8(e,r),e++;return e}_writeArrayBuffer(t,e,i,r,n){new Uint8Array(t,i,n).set(new Uint8Array(e,r,n),0)}_textToArrayBuffer(t){return(new TextEncoder).encode(t).buffer}_alignTo(t,e){return e*Math.ceil(t/e)}}i.HEADER_SIZE=12,i.CHUNK_HEADER_SIZE=8,i.MAGIC=1179937895,i.VERSION=2,t.GLB=i,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
