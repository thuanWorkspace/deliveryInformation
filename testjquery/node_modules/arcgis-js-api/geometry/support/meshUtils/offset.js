/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/mat3","../../../chunks/mat3f64","../../../chunks/mat4f64","../../../chunks/vec3","../../../chunks/vec3f64","../../spatialReferenceEllipsoidUtils","../../projection/computeTranslationToOriginAndRotation","./geographicUtils","./projection"],(function(t,e,n,o,r,i,l,a,c,s){"use strict";const u="esri.geometry.support.meshUtils.offset";function p(t,e,n){if(!t.vertexAttributes?.position)return;const{vertexSpace:o}=t;if(o.isRelative)c.validateGeographicFlag(o,u,n),f(o,e);else{c.isGeographicMesh(t.spatialReference,n)?g(t,e):h(t,e)}}function f(t,e){const n=t.origin;t.origin=r.add(i.create(),n,e)}function g(t,n){const o=t.spatialReference,i=t.vertexAttributes.position,c=t.vertexAttributes.normal,u=t.vertexAttributes.tangent,p=new Float64Array(i.length),f=null!=c?new Float32Array(c.length):null,g=null!=u?new Float32Array(u.length):null,h=t.extent.center,A=P;a.computeTranslationToOriginAndRotation(o,[h.x,h.y,h.z],F,l.getSphericalPCPF(o)),e.fromMat4(v,F),r.transformMat3(A,n,v),s.projectToPCPF(i,o,p),null!=c&&null!=f&&s.projectNormalToPCPF(c,i,p,o,f),null!=u&&null!=g&&s.projectTangentToPCPF(u,i,p,o,g),m(p,A),s.projectFromPCPF(p,i,o),null!=c&&null!=f&&s.projectNormalFromPCPF(f,i,p,o,c),null!=u&&null!=g&&s.projectTangentFromPCPF(g,i,p,o,u),t.vertexAttributesChanged()}function h(t,e){m(t.vertexAttributes.position,e),t.vertexAttributesChanged()}function m(t,e){if(t)for(let n=0;n<t.length;n+=3)for(let o=0;o<3;o++)t[n+o]+=e[o]}const P=i.create(),F=o.create(),v=n.create();t.offset=p,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
