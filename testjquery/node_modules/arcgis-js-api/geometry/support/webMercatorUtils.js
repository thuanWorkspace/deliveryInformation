/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
define(["exports","../../core/lang","../SpatialReference","./Ellipsoid","./spatialReferenceUtils"],(function(n,e,t,i,r){"use strict";const a=57.29577951308232,o=.017453292519943;function s(n){return n*a}function l(n){return n*o}function c(n){return n/i.earth.radius}function u(n){return Math.PI/2-2*Math.atan(Math.exp(-n/i.earth.radius))}function h(n){return null!=n.wkid||null!=n.wkt}const p=[0,0];function f(n,e,t,i,r){const a=n,o=r;if(o.spatialReference=t,"x"in a&&"x"in o)[o.x,o.y]=e(a.x,a.y,p,i);else if("xmin"in a&&"xmin"in o)[o.xmin,o.ymin]=e(a.xmin,a.ymin,p,i),[o.xmax,o.ymax]=e(a.xmax,a.ymax,p,i);else if("paths"in a&&"paths"in o||"rings"in a&&"rings"in o){const n="paths"in a?a.paths:a.rings,t=[];let r;for(let a=0;a<n.length;a++){const o=n[a];r=[],t.push(r);for(let n=0;n<o.length;n++)r.push(e(o[n][0],o[n][1],[0,0],i)),o[n].length>2&&r[n].push(o[n][2]),o[n].length>3&&r[n].push(o[n][3])}"paths"in o?o.paths=t:o.rings=t}else if("points"in a&&"points"in o){const n=a.points,t=[];for(let r=0;r<n.length;r++)t[r]=e(n[r][0],n[r][1],[0,0],i),n[r].length>2&&t[r].push(n[r][2]),n[r].length>3&&t[r].push(n[r][3]);o.points=t}return r}function g(n,e){const t=n&&(h(n)?n:n.spatialReference),i=e&&(h(e)?e:e.spatialReference);return!(n&&"type"in n&&"mesh"===n.type||e&&"type"in e&&"mesh"===e.type||!t||!i)&&(!!r.equals(i,t)||(r.isWebMercator(i)&&r.isWGS84(t)||r.isWebMercator(t)&&r.isWGS84(i)))}function x(n,i){if(null==n)return null;const a=n.spatialReference,o=i&&(h(i)?i:i.spatialReference);return g(a,o)?r.equals(a,o)?e.clone(n):r.isWebMercator(o)?f(n,M,t.WebMercator,!1,e.clone(n)):r.isWGS84(o)?f(n,m,t.WGS84,!1,e.clone(n)):null:null}function M(n,e,t=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const r=l(e);return t[0]=l(n)*i.earth.radius,t[1]=i.earth.halfSemiMajorAxis*Math.log((1+Math.sin(r))/(1-Math.sin(r))),t}function m(n,e,t=[0,0],r=!1){const a=s(n/i.earth.radius);return t[0]=r?a:a-360*Math.floor((a+180)/360),t[1]=s(Math.PI/2-2*Math.atan(Math.exp(-e/i.earth.radius))),t}function y(n,i=!1,r=e.clone(n)){return f(n,M,t.WebMercator,i,r)}function W(n,i=!1,r=e.clone(n)){return f(n,m,t.WGS84,i,r)}n.canProject=g,n.geographicToWebMercator=y,n.lngLatToXY=M,n.project=x,n.webMercatorToGeographic=W,n.x2lon=c,n.xyToLngLat=m,n.y2lat=u,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
